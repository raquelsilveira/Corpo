<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
<TITLE>f430-chomicki.dvi</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="generator" content="pdftohtml 0.35beta">
<META name="date" content="2004-11-08T20:11:38+00:00">
</HEAD>
<BODY bgcolor="#A0A0A0" vlink="blue" link="blue">
<!-- Page 1 -->
<a name="1"></a>
<DIV style="position:relative;width:918;height:1188;">
<STYLE type="text/css">
<!--
	.ft0{font-size:24px;font-family:Helvetica;color:#000000;}
	.ft1{font-size:6px;font-family:Times;color:#000000;}
	.ft2{font-size:15px;font-family:Helvetica;color:#000000;}
	.ft3{font-size:15px;font-family:Times;color:#000000;}
	.ft4{font-size:9px;font-family:Times;color:#000000;}
	.ft5{font-size:11px;font-family:Times;color:#000000;}
	.ft6{font-size:9px;font-family:Times;color:#000000;}
	.ft7{font-size:9px;font-family:Times;color:#000000;}
	.ft8{font-size:16px;font-family:Courier;color:#000000;}
	.ft9{font-size:11px;font-family:Times;color:#000000;}
	.ft10{font-size:9px;line-height:15px;font-family:Times;color:#000000;}
	.ft11{font-size:11px;line-height:15px;font-family:Times;color:#000000;}
	.ft12{font-size:9px;line-height:13px;font-family:Times;color:#000000;}
-->
</STYLE>
<IMG width="918" height="1188" src="54001.png" alt="background image">
<DIV style="position:absolute;top:108;left:211"><nobr><span class="ft0"><b>Computing Consistent Query Answers</b></span></nobr></DIV>
<DIV style="position:absolute;top:138;left:281"><nobr><span class="ft0"><b>using Conflict Hypergraphs</b></span></nobr></DIV>
<DIV style="position:absolute;top:144;left:633"><nobr><span class="ft1"></span></nobr></DIV>
<DIV style="position:absolute;top:207;left:181"><nobr><span class="ft2">Jan Chomicki</span></nobr></DIV>
<DIV style="position:absolute;top:225;left:155"><nobr><span class="ft2">University at Buffalo</span></nobr></DIV>
<DIV style="position:absolute;top:242;left:131"><nobr><span class="ft2">chomicki@cse.buffalo.edu</span></nobr></DIV>
<DIV style="position:absolute;top:207;left:379"><nobr><span class="ft2">Jerzy Marcinkowski</span></nobr></DIV>
<DIV style="position:absolute;top:224;left:381"><nobr><span class="ft2">Wroclaw University</span></nobr></DIV>
<DIV style="position:absolute;top:242;left:384"><nobr><span class="ft2">jma@ii.uni.wroc.pl</span></nobr></DIV>
<DIV style="position:absolute;top:207;left:603"><nobr><span class="ft2">Slawomir Staworko</span></nobr></DIV>
<DIV style="position:absolute;top:225;left:600"><nobr><span class="ft2">University at Buffalo</span></nobr></DIV>
<DIV style="position:absolute;top:242;left:575"><nobr><span class="ft2">staworko@cse.buffalo.edu</span></nobr></DIV>
<DIV style="position:absolute;top:312;left:81"><nobr><span class="ft3"><b>Abstract</b></span></nobr></DIV>
<DIV style="position:absolute;top:338;left:81"><nobr><span class="ft10">A consistent query answer in a possibly inconsistent database<br>is an answer which is true in every (minimal) repair of the<br>database. We present here a practical framework for computing<br>consistent query answers for large, possibly inconsistent relational<br>databases. We consider relational algebra queries without pro-<br>jection, and denial constraints. Because our framework handles<br>union queries, we can effectively (and efficiently) extract indefi-<br>nite disjunctive information from an inconsistent database. We<br>describe a number of novel optimization techniques applicable in<br>this context and summarize experimental results that validate our<br>approach.</span></nobr></DIV>
<DIV style="position:absolute;top:513;left:81"><nobr><span class="ft5">Categories: H.2.3, H.2.4, F.4.1.</span></nobr></DIV>
<DIV style="position:absolute;top:533;left:81"><nobr><span class="ft5">General Terms: Algorithms, Languages, Theory.</span></nobr></DIV>
<DIV style="position:absolute;top:553;left:81"><nobr><span class="ft11">Keywords: inconsistency, integrity constraints, query pro-<br>cessing.</span></nobr></DIV>
<DIV style="position:absolute;top:606;left:81"><nobr><span class="ft3"><b>1.</b></span></nobr></DIV>
<DIV style="position:absolute;top:606;left:112"><nobr><span class="ft3"><b>INTRODUCTION</b></span></nobr></DIV>
<DIV style="position:absolute;top:628;left:94"><nobr><span class="ft5">Traditionally, the main role of integrity constraints in</span></nobr></DIV>
<DIV style="position:absolute;top:644;left:81"><nobr><span class="ft5">databases was to enforce consistency.</span></nobr></DIV>
<DIV style="position:absolute;top:644;left:327"><nobr><span class="ft5">The occurrence of</span></nobr></DIV>
<DIV style="position:absolute;top:659;left:81"><nobr><span class="ft11">integrity violations was prevented by DBMS software. How-<br>ever, while integrity constraints continue to express impor-<br>tant semantic properties of data, enforcing the constraints<br>has become problematic in current database applications.<br>For example, in data integration systems integrity viola-<br>tions may be due to the presence of multiple autonomous<br>data sources. The sources may separately satisfy the con-<br>straints, but when they are integrated the constraints may<br>not hold. Moreover, because the sources are autonomous,<br>the violations cannot be simply fixed by removing the data<br>involved in the violations.</span></nobr></DIV>
<DIV style="position:absolute;top:847;left:96"><nobr><span class="ft5">Example</span></nobr></DIV>
<DIV style="position:absolute;top:844;left:162"><nobr><span class="ft5">1. Let Student be a relation schema with the</span></nobr></DIV>
<DIV style="position:absolute;top:860;left:81"><nobr><span class="ft11">attributes Name and Address and the key functional depen-<br>dency N ame  Address. Consider the following instance<br>of Student:</span></nobr></DIV>
<DIV style="position:absolute;top:911;left:81"><nobr><span class="ft1"></span></nobr></DIV>
<DIV style="position:absolute;top:915;left:88"><nobr><span class="ft5">Research supported by NSF Grant IIS-0119186.</span></nobr></DIV>
<DIV style="position:absolute;top:977;left:81"><nobr><span class="ft12">Permission to make digital or hard copies of all or part of this work for<br>personal or classroom use is granted without fee provided that copies are<br>not made or distributed for profit or commercial advantage and that copies<br>bear this notice and the full citation on the first page. To copy otherwise, to<br>republish, to post on servers or to redistribute to lists, requires prior specific<br>permission and/or a fee.<br><i>CIKM'04, </i>November 8­13, 2004, Washington, DC, USA.<br>Copyright 2004 ACM 1-58113-874-1/04/0011 ...</span></nobr></DIV>
<DIV style="position:absolute;top:1070;left:315"><nobr><span class="ft5">$</span></nobr></DIV>
<DIV style="position:absolute;top:1071;left:322"><nobr><span class="ft6">5.00.</span></nobr></DIV>
<DIV style="position:absolute;top:312;left:564"><nobr><span class="ft5">Name</span></nobr></DIV>
<DIV style="position:absolute;top:312;left:674"><nobr><span class="ft5">Address</span></nobr></DIV>
<DIV style="position:absolute;top:328;left:564"><nobr><span class="ft5">Jeremy Burford</span></nobr></DIV>
<DIV style="position:absolute;top:328;left:674"><nobr><span class="ft5">Los Angeles</span></nobr></DIV>
<DIV style="position:absolute;top:343;left:564"><nobr><span class="ft5">Jeremy Burford</span></nobr></DIV>
<DIV style="position:absolute;top:343;left:674"><nobr><span class="ft5">New York</span></nobr></DIV>
<DIV style="position:absolute;top:359;left:564"><nobr><span class="ft5">Linda Kenner</span></nobr></DIV>
<DIV style="position:absolute;top:359;left:674"><nobr><span class="ft5">Chicago</span></nobr></DIV>
<DIV style="position:absolute;top:389;left:489"><nobr><span class="ft5">The first two tuples may come from different data sources,</span></nobr></DIV>
<DIV style="position:absolute;top:404;left:475"><nobr><span class="ft11">so it may be impossible or impractical to resolve the inconsis-<br>tency between them. However, there is clearly a difference<br>between the first two tuples and the third one. We don't<br>know whether Jeremy Burford lives in Los Angeles or New<br>York, but we do know that Linda Kenner lives in Chicago.<br>An approach to query answering that ignores inconsistencies<br>will be unable to make this distinction ­ the distinction be-<br>tween reliable and unreliable data. On the other hand, any<br>approach that simply masks out inconsistent data (the first<br>two tuples in this example) will lose indefinite information<br>present in inconsistent databases. In this example, we know<br>that there is a student named Jeremy Burford (existential<br>information) and that Jeremy Burford lives in Los Angeles<br>or New York (disjunctive information).</span></nobr></DIV>
<DIV style="position:absolute;top:638;left:489"><nobr><span class="ft5">The above example illustrates the need to modify the stan-</span></nobr></DIV>
<DIV style="position:absolute;top:653;left:475"><nobr><span class="ft11">dard notion of query answer in the context of inconsistent<br>databases. We need to be able to talk about query answers<br>that are unaffected by integrity violations. In [2], the notion<br>of consistent query answer was proposed to achieve that ob -<br>jective. [2] introduced the notion of repair: a database that<br>satisfies the integrity constraints and is minimally different<br>from the original database. A consistent answer to a query,<br>in this framework, is an answer present in the result of the<br>query in every repair.</span></nobr></DIV>
<DIV style="position:absolute;top:807;left:490"><nobr><span class="ft5">Example</span></nobr></DIV>
<DIV style="position:absolute;top:805;left:556"><nobr><span class="ft5">2. In Example 1, there are two repairs corre-</span></nobr></DIV>
<DIV style="position:absolute;top:821;left:475"><nobr><span class="ft11">sponding to two different ways of restoring the consistency:<br>either the first or the second tuple is deleted. If a query asks<br>for all the information about students, only the tuple (Linda<br>Kenner,Chicago) is returned as a consistent answer because<br>it is the only tuple that is present in both repairs. On the<br>other hand, if a query asks for the names of students liv-<br>ing in Los Angeles or New York, then Jeremy Burford is a<br>consistent answer.</span></nobr></DIV>
<DIV style="position:absolute;top:957;left:489"><nobr><span class="ft5">The framework of [2] has served as a foundation for most</span></nobr></DIV>
<DIV style="position:absolute;top:972;left:475"><nobr><span class="ft11">of the subsequent work in the area of querying inconsistent<br>databases [3, 5, 11, 12, 13, 15, 17, 19, 23] (see [7] for a sur-<br>vey and an in-depth discussion). The work presented here<br>addresses the issue of computing consistent query answers<br>for projection-free queries and denial integrity constraints.<br>It is shown in [13] that this task can be done in polynomial<br>time, using the notion of conflict hypergraph that succinctly</span></nobr></DIV>
<DIV style="position:absolute;top:1116;left:449"><nobr><span class="ft9">417</span></nobr></DIV>
</DIV>
<!-- Page 2 -->
<a name="2"></a>
<DIV style="position:relative;width:918;height:1188;">
<STYLE type="text/css">
<!--
	.ft13{font-size:5px;font-family:Times;color:#000000;}
	.ft14{font-size:11px;line-height:18px;font-family:Times;color:#000000;}
-->
</STYLE>
<IMG width="918" height="1188" src="54002.png" alt="background image">
<DIV style="position:absolute;top:86;left:81"><nobr><span class="ft11">represents all the integrity violations in a given database.<br>This line research is pursued further in the present paper.</span></nobr></DIV>
<DIV style="position:absolute;top:118;left:94"><nobr><span class="ft5">The main contributions of this paper are as follows:</span></nobr></DIV>
<DIV style="position:absolute;top:137;left:101"><nobr><span class="ft5">· A complete, scalable framework for computing con-</span></nobr></DIV>
<DIV style="position:absolute;top:156;left:114"><nobr><span class="ft11">sistent answers to projection-free relational algebra<br>queries in the presence of denial constraints. Our ap-<br>proach uses a relational DBMS as a backend and scales<br>up to large databases.</span></nobr></DIV>
<DIV style="position:absolute;top:225;left:101"><nobr><span class="ft5">· Novel optimization techniques to eliminate redundant</span></nobr></DIV>
<DIV style="position:absolute;top:244;left:114"><nobr><span class="ft5">DBMS queries.</span></nobr></DIV>
<DIV style="position:absolute;top:265;left:101"><nobr><span class="ft5">· Encouraging experimental results that compare our</span></nobr></DIV>
<DIV style="position:absolute;top:284;left:114"><nobr><span class="ft11">approach with an approach based on query rewrit-<br>ing and estimate the overhead of computing consistent<br>query answers. No comprehensive results of this kind<br>exist in the literature.</span></nobr></DIV>
<DIV style="position:absolute;top:354;left:94"><nobr><span class="ft5">Because our query language includes union, our approach</span></nobr></DIV>
<DIV style="position:absolute;top:370;left:81"><nobr><span class="ft11">can extract indefinite disjunctive information present in an<br>inconsistent database (see Example 1). Moreover, consistent<br>query answers are computed in polynomial time. Other ex-<br>isting approaches are either unable to handle disjunction in<br>queries [2, 12, 17] or cannot guarantee polynomial time com-<br>putability of consistent query answers [3, 5, 11, 15, 19, 23].<br>The latter is due to the fact that those approaches rely on<br>the computation of answers sets of logic programs with dis-<br>junction and negation ­ a </span></nobr></DIV>
<DIV style="position:absolute;top:492;left:254"><nobr><span class="ft1">p</span></nobr></DIV>
<DIV style="position:absolute;top:500;left:254"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:496;left:261"><nobr><span class="ft5">-complete problem. Only the</span></nobr></DIV>
<DIV style="position:absolute;top:511;left:81"><nobr><span class="ft11">approach of [2, 12] (which uses query rewriting) and the ap-<br>proach presented here scale up to large databases. Related<br>research is further discussed in Section 6.</span></nobr></DIV>
<DIV style="position:absolute;top:558;left:94"><nobr><span class="ft5">The plan of the paper is as follows. In Section 2, we intro-</span></nobr></DIV>
<DIV style="position:absolute;top:574;left:81"><nobr><span class="ft11">duce basic concepts. In Section 3, we present our approach<br>to computing consistent answers to projection-free queries<br>and describe its implementation in a system called Hippo.<br>In Section 4, we describe several techniques for eliminat-<br>ing redundant DBMS queries, that we have implemented in<br>Hippo. In Section 5, we discuss a number of experiments we<br>have conducted with Hippo and query rewriting. In Section<br>6, we briefly discuss related work. Section 7 contains conclu-<br>sions and a discussion of possible future research directions.</span></nobr></DIV>
<DIV style="position:absolute;top:731;left:81"><nobr><span class="ft3"><b>2.</b></span></nobr></DIV>
<DIV style="position:absolute;top:731;left:112"><nobr><span class="ft3"><b>BASIC NOTIONS AND FACTS</b></span></nobr></DIV>
<DIV style="position:absolute;top:762;left:81"><nobr><span class="ft3"><b>2.1</b></span></nobr></DIV>
<DIV style="position:absolute;top:762;left:121"><nobr><span class="ft3"><b>Query languages</b></span></nobr></DIV>
<DIV style="position:absolute;top:784;left:94"><nobr><span class="ft5">In this paper we work in the relational model of data. We</span></nobr></DIV>
<DIV style="position:absolute;top:799;left:81"><nobr><span class="ft5">recall that a database schema</span></nobr></DIV>
<DIV style="position:absolute;top:796;left:269"><nobr><span class="ft5">S is a set of relation names</span></nobr></DIV>
<DIV style="position:absolute;top:815;left:81"><nobr><span class="ft11">with attribute names and types. An instance of a database<br>is a function that assigns a finite set of tuples to each relation<br>name. For the purposes of this paper we consider only two<br>fixed database domains</span></nobr></DIV>
<DIV style="position:absolute;top:859;left:228"><nobr><span class="ft5">N (natural numbers) and D (unin-</span></nobr></DIV>
<DIV style="position:absolute;top:878;left:81"><nobr><span class="ft11">terpreted constants). We also use the natural interpretation<br>over</span></nobr></DIV>
<DIV style="position:absolute;top:890;left:111"><nobr><span class="ft5">N of binary relational symbols =, =, &lt;, &gt;, and we as-</span></nobr></DIV>
<DIV style="position:absolute;top:909;left:81"><nobr><span class="ft11">sume that two constants are equal only if they have the same<br>name. We also view I as a structure for the first-order lan-<br>guage over the vocabulary consisting of symbols of</span></nobr></DIV>
<DIV style="position:absolute;top:937;left:398"><nobr><span class="ft5">S, and</span></nobr></DIV>
<DIV style="position:absolute;top:956;left:81"><nobr><span class="ft5">standard built-in predicates over</span></nobr></DIV>
<DIV style="position:absolute;top:953;left:283"><nobr><span class="ft5">N (=, =, &lt;, &gt;).</span></nobr></DIV>
<DIV style="position:absolute;top:972;left:94"><nobr><span class="ft5">In this article, we use projection-free (-free) relational</span></nobr></DIV>
<DIV style="position:absolute;top:988;left:81"><nobr><span class="ft5">algebra expressions, defined using the following grammar:</span></nobr></DIV>
<DIV style="position:absolute;top:1011;left:137"><nobr><span class="ft5">E :: R | </span></nobr></DIV>
<DIV style="position:absolute;top:1016;left:204"><nobr><span class="ft1"></span></nobr></DIV>
<DIV style="position:absolute;top:1011;left:212"><nobr><span class="ft5">(E) | E × E | E  E | E \ E.</span></nobr></DIV>
<DIV style="position:absolute;top:1032;left:81"><nobr><span class="ft11">|R| is the arity of the relation symbol R and (unless speci-<br>fied otherwise) for the sake of simplicity we assume that at-<br>tribute names are consecutive natural numbers. We extend</span></nobr></DIV>
<DIV style="position:absolute;top:86;left:475"><nobr><span class="ft5">this to expressions, i.e.</span></nobr></DIV>
<DIV style="position:absolute;top:83;left:627"><nobr><span class="ft5">|E| is the arity of the expression,</span></nobr></DIV>
<DIV style="position:absolute;top:102;left:475"><nobr><span class="ft11">and E.i is the reference to the i-th column resulting from<br>the expression E (used in conditions for subexpressions).<br>Morover, t[i] is the value on the i-th position of t, t[i, j] is<br>an abbreviation for a tuple (t[i], . . . , t[j]), and with |t| we<br>denote the length of the tuple t. We say that a tuple t is<br>compatible with an expression E if the length of the tuple is<br>equal to the arity of the expression, i.e.</span></nobr></DIV>
<DIV style="position:absolute;top:193;left:719"><nobr><span class="ft5">|t| = |E|.</span></nobr></DIV>
<DIV style="position:absolute;top:212;left:475"><nobr><span class="ft5">For a given expression E, QA</span></nobr></DIV>
<DIV style="position:absolute;top:209;left:652"><nobr><span class="ft1">E</span></nobr></DIV>
<DIV style="position:absolute;top:212;left:661"><nobr><span class="ft5">(I) is the result of evaluating</span></nobr></DIV>
<DIV style="position:absolute;top:227;left:475"><nobr><span class="ft11">E in the database instance I. In this paper we use only the<br>set semantics of relational algebra expressions.</span></nobr></DIV>
<DIV style="position:absolute;top:259;left:489"><nobr><span class="ft5">We also use relational calculus queries consisting of</span></nobr></DIV>
<DIV style="position:absolute;top:275;left:475"><nobr><span class="ft11">quantifier-free first-order formulas which may be open (hav-<br>ing free variables) or ground.</span></nobr></DIV>
<DIV style="position:absolute;top:290;left:672"><nobr><span class="ft5">In fact, our approach can</span></nobr></DIV>
<DIV style="position:absolute;top:306;left:475"><nobr><span class="ft11">handle relational algebra queries that require projection, as<br>long as they can be translated to quantifier-free relational<br>calculus queries. That's why we can deal with the relational<br>algebra query corresponding to the query</span></nobr></DIV>
<DIV style="position:absolute;top:378;left:502"><nobr><span class="ft5">Student (X, LosAngeles )  Student(X, NewYork )</span></nobr></DIV>
<DIV style="position:absolute;top:402;left:475"><nobr><span class="ft5">in Example 1.We also occasionally use SQL.</span></nobr></DIV>
<DIV style="position:absolute;top:428;left:475"><nobr><span class="ft3"><b>2.2</b></span></nobr></DIV>
<DIV style="position:absolute;top:428;left:516"><nobr><span class="ft3"><b>Repairs and consistent query answers</b></span></nobr></DIV>
<DIV style="position:absolute;top:450;left:489"><nobr><span class="ft5">An integrity constraint is a consistent closed first-order</span></nobr></DIV>
<DIV style="position:absolute;top:465;left:475"><nobr><span class="ft11">formula. In this paper we consider only the class of denial<br>integrity constraints of the form:</span></nobr></DIV>
<DIV style="position:absolute;top:502;left:488"><nobr><span class="ft5">¯x</span></nobr></DIV>
<DIV style="position:absolute;top:508;left:504"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:506;left:510"><nobr><span class="ft5">, . . . , ¯</span></nobr></DIV>
<DIV style="position:absolute;top:506;left:541"><nobr><span class="ft5">x</span></nobr></DIV>
<DIV style="position:absolute;top:510;left:549"><nobr><span class="ft1">k</span></nobr></DIV>
<DIV style="position:absolute;top:506;left:556"><nobr><span class="ft5">.¬ [R</span></nobr></DIV>
<DIV style="position:absolute;top:510;left:585"><nobr><span class="ft1">i</span></nobr></DIV>
<DIV style="position:absolute;top:511;left:589"><nobr><span class="ft13">1</span></nobr></DIV>
<DIV style="position:absolute;top:506;left:596"><nobr><span class="ft5">(¯</span></nobr></DIV>
<DIV style="position:absolute;top:506;left:601"><nobr><span class="ft5">x</span></nobr></DIV>
<DIV style="position:absolute;top:508;left:609"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:506;left:615"><nobr><span class="ft5">)</span></nobr></DIV>
<DIV style="position:absolute;top:502;left:624"><nobr><span class="ft5"> . . .  R</span></nobr></DIV>
<DIV style="position:absolute;top:510;left:680"><nobr><span class="ft1">i</span></nobr></DIV>
<DIV style="position:absolute;top:514;left:684"><nobr><span class="ft13">k</span></nobr></DIV>
<DIV style="position:absolute;top:506;left:691"><nobr><span class="ft5">(¯</span></nobr></DIV>
<DIV style="position:absolute;top:506;left:697"><nobr><span class="ft5">x</span></nobr></DIV>
<DIV style="position:absolute;top:510;left:705"><nobr><span class="ft1">k</span></nobr></DIV>
<DIV style="position:absolute;top:506;left:712"><nobr><span class="ft5">)</span></nobr></DIV>
<DIV style="position:absolute;top:502;left:720"><nobr><span class="ft5"> (¯x</span></nobr></DIV>
<DIV style="position:absolute;top:508;left:754"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:506;left:760"><nobr><span class="ft5">, . . . , ¯</span></nobr></DIV>
<DIV style="position:absolute;top:506;left:791"><nobr><span class="ft5">x</span></nobr></DIV>
<DIV style="position:absolute;top:510;left:798"><nobr><span class="ft1">k</span></nobr></DIV>
<DIV style="position:absolute;top:506;left:805"><nobr><span class="ft5">)] ,</span></nobr></DIV>
<DIV style="position:absolute;top:521;left:816"><nobr><span class="ft5">(1)</span></nobr></DIV>
<DIV style="position:absolute;top:537;left:475"><nobr><span class="ft11">where  is a boolean expression consisting of atomic formu-<br>las referring to built-in predicates. The number k is called<br>the arity of a constraint.<br>Note that, for example, functional dependencies and exclu-<br>sion constraints are of the above form. Below we give an-<br>other example.</span></nobr></DIV>
<DIV style="position:absolute;top:645;left:490"><nobr><span class="ft5">Example</span></nobr></DIV>
<DIV style="position:absolute;top:642;left:556"><nobr><span class="ft5">3. Consider the relation Emp with attributes</span></nobr></DIV>
<DIV style="position:absolute;top:658;left:475"><nobr><span class="ft11">Name, Salary, and Manager, with Name being the primary<br>key.</span></nobr></DIV>
<DIV style="position:absolute;top:673;left:512"><nobr><span class="ft5">The constraint that no employee can have a salary</span></nobr></DIV>
<DIV style="position:absolute;top:689;left:475"><nobr><span class="ft5">greater that that of her manager is a denial constraint:</span></nobr></DIV>
<DIV style="position:absolute;top:711;left:479"><nobr><span class="ft5">n, s, m, s , m . ¬[Emp(n, s, m)  Emp(m, s , m )  s &gt; s ].</span></nobr></DIV>
<DIV style="position:absolute;top:746;left:490"><nobr><span class="ft5">Definition 1</span></nobr></DIV>
<DIV style="position:absolute;top:746;left:591"><nobr><span class="ft5">(Consistent database).</span></nobr></DIV>
<DIV style="position:absolute;top:743;left:755"><nobr><span class="ft5">A</span></nobr></DIV>
<DIV style="position:absolute;top:743;left:783"><nobr><span class="ft5">database</span></nobr></DIV>
<DIV style="position:absolute;top:759;left:475"><nobr><span class="ft11">instance I is consistent with a set of integrity constraints C<br>if I |= C (i.e., C is true in I); inconsistent otherwise.</span></nobr></DIV>
<DIV style="position:absolute;top:807;left:490"><nobr><span class="ft5">Definition</span></nobr></DIV>
<DIV style="position:absolute;top:804;left:569"><nobr><span class="ft5">2. For a given database instance I of schema</span></nobr></DIV>
<DIV style="position:absolute;top:817;left:475"><nobr><span class="ft14">S, its set of facts (I) is the set of all positive facts that hold<br>in this database:</span></nobr></DIV>
<DIV style="position:absolute;top:860;left:556"><nobr><span class="ft5">(I) = {R(t)|R  S  t  I(R)}.</span></nobr></DIV>
<DIV style="position:absolute;top:893;left:490"><nobr><span class="ft5">Definition 3</span></nobr></DIV>
<DIV style="position:absolute;top:893;left:591"><nobr><span class="ft5">(Database distance).</span></nobr></DIV>
<DIV style="position:absolute;top:890;left:740"><nobr><span class="ft5">Given two in-</span></nobr></DIV>
<DIV style="position:absolute;top:906;left:475"><nobr><span class="ft5">stances I</span></nobr></DIV>
<DIV style="position:absolute;top:908;left:528"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:906;left:539"><nobr><span class="ft5">and I</span></nobr></DIV>
<DIV style="position:absolute;top:908;left:571"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:906;left:581"><nobr><span class="ft5">of the same database, the distance between</span></nobr></DIV>
<DIV style="position:absolute;top:921;left:475"><nobr><span class="ft5">those instances (I</span></nobr></DIV>
<DIV style="position:absolute;top:924;left:591"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:921;left:598"><nobr><span class="ft5">, I</span></nobr></DIV>
<DIV style="position:absolute;top:924;left:610"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:921;left:616"><nobr><span class="ft5">) is the symmetric difference between</span></nobr></DIV>
<DIV style="position:absolute;top:937;left:475"><nobr><span class="ft5">sets of facts of those instances:</span></nobr></DIV>
<DIV style="position:absolute;top:962;left:519"><nobr><span class="ft5">(I</span></nobr></DIV>
<DIV style="position:absolute;top:964;left:542"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:962;left:549"><nobr><span class="ft5">, I</span></nobr></DIV>
<DIV style="position:absolute;top:964;left:561"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:962;left:567"><nobr><span class="ft5">) = ((I</span></nobr></DIV>
<DIV style="position:absolute;top:964;left:618"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:962;left:624"><nobr><span class="ft5">)</span></nobr></DIV>
<DIV style="position:absolute;top:959;left:632"><nobr><span class="ft5">\ (I</span></nobr></DIV>
<DIV style="position:absolute;top:964;left:664"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:962;left:670"><nobr><span class="ft5">))</span></nobr></DIV>
<DIV style="position:absolute;top:959;left:684"><nobr><span class="ft5"> ((I</span></nobr></DIV>
<DIV style="position:absolute;top:964;left:723"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:962;left:729"><nobr><span class="ft5">)</span></nobr></DIV>
<DIV style="position:absolute;top:959;left:737"><nobr><span class="ft5">\ (I</span></nobr></DIV>
<DIV style="position:absolute;top:964;left:769"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:962;left:775"><nobr><span class="ft5">)).</span></nobr></DIV>
<DIV style="position:absolute;top:994;left:490"><nobr><span class="ft5">Definition 4</span></nobr></DIV>
<DIV style="position:absolute;top:994;left:591"><nobr><span class="ft5">(Proximity relation).</span></nobr></DIV>
<DIV style="position:absolute;top:991;left:747"><nobr><span class="ft5">Given</span></nobr></DIV>
<DIV style="position:absolute;top:991;left:805"><nobr><span class="ft5">three</span></nobr></DIV>
<DIV style="position:absolute;top:1007;left:475"><nobr><span class="ft5">instances I, I</span></nobr></DIV>
<DIV style="position:absolute;top:1010;left:556"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:1007;left:562"><nobr><span class="ft5">, I</span></nobr></DIV>
<DIV style="position:absolute;top:1010;left:575"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:1007;left:581"><nobr><span class="ft5">, the instance I</span></nobr></DIV>
<DIV style="position:absolute;top:1010;left:679"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:1007;left:692"><nobr><span class="ft5">is closer to I than the</span></nobr></DIV>
<DIV style="position:absolute;top:1023;left:475"><nobr><span class="ft5">instance I</span></nobr></DIV>
<DIV style="position:absolute;top:1025;left:536"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:1023;left:547"><nobr><span class="ft5">if the distance between I</span></nobr></DIV>
<DIV style="position:absolute;top:1025;left:694"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:1023;left:705"><nobr><span class="ft5">and I is contained in</span></nobr></DIV>
<DIV style="position:absolute;top:1038;left:475"><nobr><span class="ft5">the distance between I</span></nobr></DIV>
<DIV style="position:absolute;top:1041;left:608"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:1038;left:619"><nobr><span class="ft5">and I, i.e.</span></nobr></DIV>
<DIV style="position:absolute;top:1063;left:551"><nobr><span class="ft5">I</span></nobr></DIV>
<DIV style="position:absolute;top:1066;left:557"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:1060;left:567"><nobr><span class="ft5"></span></nobr></DIV>
<DIV style="position:absolute;top:1068;left:577"><nobr><span class="ft1">I</span></nobr></DIV>
<DIV style="position:absolute;top:1063;left:588"><nobr><span class="ft5">I</span></nobr></DIV>
<DIV style="position:absolute;top:1066;left:594"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:1060;left:608"><nobr><span class="ft5"> (I, I</span></nobr></DIV>
<DIV style="position:absolute;top:1066;left:677"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:1063;left:683"><nobr><span class="ft5">)</span></nobr></DIV>
<DIV style="position:absolute;top:1060;left:692"><nobr><span class="ft5"> (I, I</span></nobr></DIV>
<DIV style="position:absolute;top:1066;left:743"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:1063;left:749"><nobr><span class="ft5">).</span></nobr></DIV>
<DIV style="position:absolute;top:1116;left:449"><nobr><span class="ft9">418</span></nobr></DIV>
</DIV>
<!-- Page 3 -->
<a name="3"></a>
<DIV style="position:relative;width:918;height:1188;">
<STYLE type="text/css">
<!--
	.ft15{font-size:6px;line-height:9px;font-family:Times;color:#000000;}
-->
</STYLE>
<IMG width="918" height="1188" src="54003.png" alt="background image">
<DIV style="position:absolute;top:89;left:96"><nobr><span class="ft5">Definition 5</span></nobr></DIV>
<DIV style="position:absolute;top:89;left:197"><nobr><span class="ft5">(Database repair).</span></nobr></DIV>
<DIV style="position:absolute;top:86;left:330"><nobr><span class="ft5">For a given in-</span></nobr></DIV>
<DIV style="position:absolute;top:102;left:81"><nobr><span class="ft11">stance I and set of integrity constraints C, I is a repair<br>of I w.r.t. C if I is the closest instance to I, which is con-<br>sistent with C , i.e. I |= C and I is </span></nobr></DIV>
<DIV style="position:absolute;top:138;left:333"><nobr><span class="ft1">I</span></nobr></DIV>
<DIV style="position:absolute;top:133;left:340"><nobr><span class="ft5">-minimal among</span></nobr></DIV>
<DIV style="position:absolute;top:149;left:81"><nobr><span class="ft5">the instances that satisfy C.</span></nobr></DIV>
<DIV style="position:absolute;top:178;left:81"><nobr><span class="ft5">By Rep</span></nobr></DIV>
<DIV style="position:absolute;top:185;left:125"><nobr><span class="ft1">C</span></nobr></DIV>
<DIV style="position:absolute;top:178;left:135"><nobr><span class="ft5">(I) we denote the set of all repairs of I with respect</span></nobr></DIV>
<DIV style="position:absolute;top:194;left:81"><nobr><span class="ft5">to C.</span></nobr></DIV>
<DIV style="position:absolute;top:209;left:94"><nobr><span class="ft5">The following fact captures an important property of re-</span></nobr></DIV>
<DIV style="position:absolute;top:225;left:81"><nobr><span class="ft11">pairs of denial constraints: each repair is a maximal consis-<br>tent subset of the database.</span></nobr></DIV>
<DIV style="position:absolute;top:269;left:96"><nobr><span class="ft5">Fact</span></nobr></DIV>
<DIV style="position:absolute;top:267;left:135"><nobr><span class="ft5">1. If C consists only of denial constraints, then:</span></nobr></DIV>
<DIV style="position:absolute;top:292;left:169"><nobr><span class="ft5">I  Rep</span></nobr></DIV>
<DIV style="position:absolute;top:298;left:221"><nobr><span class="ft1">C</span></nobr></DIV>
<DIV style="position:absolute;top:292;left:230"><nobr><span class="ft5">(I)  (I )  (I).</span></nobr></DIV>
<DIV style="position:absolute;top:323;left:96"><nobr><span class="ft5">Definition 6</span></nobr></DIV>
<DIV style="position:absolute;top:323;left:197"><nobr><span class="ft5">(Core instance).</span></nobr></DIV>
<DIV style="position:absolute;top:321;left:317"><nobr><span class="ft5">For a given instance</span></nobr></DIV>
<DIV style="position:absolute;top:336;left:81"><nobr><span class="ft11">I, its core w.r.t a set of integrity constraints C is an instance<br>Core</span></nobr></DIV>
<DIV style="position:absolute;top:349;left:109"><nobr><span class="ft1">I</span></nobr></DIV>
<DIV style="position:absolute;top:358;left:109"><nobr><span class="ft1">C</span></nobr></DIV>
<DIV style="position:absolute;top:352;left:123"><nobr><span class="ft5">such that:</span></nobr></DIV>
<DIV style="position:absolute;top:379;left:173"><nobr><span class="ft5">Core</span></nobr></DIV>
<DIV style="position:absolute;top:376;left:201"><nobr><span class="ft1">I</span></nobr></DIV>
<DIV style="position:absolute;top:385;left:201"><nobr><span class="ft1">C</span></nobr></DIV>
<DIV style="position:absolute;top:379;left:210"><nobr><span class="ft5">(R) =</span></nobr></DIV>
<DIV style="position:absolute;top:399;left:250"><nobr><span class="ft1">I Rep</span></nobr></DIV>
<DIV style="position:absolute;top:402;left:286"><nobr><span class="ft13">C</span></nobr></DIV>
<DIV style="position:absolute;top:397;left:295"><nobr><span class="ft1">(I)</span></nobr></DIV>
<DIV style="position:absolute;top:379;left:311"><nobr><span class="ft5">I (R).</span></nobr></DIV>
<DIV style="position:absolute;top:419;left:81"><nobr><span class="ft11">For any relation R and set of integrity constraints C, if there<br>exists a relational algebra expression </span></nobr></DIV>
<DIV style="position:absolute;top:432;left:319"><nobr><span class="ft1">R</span></nobr></DIV>
<DIV style="position:absolute;top:441;left:319"><nobr><span class="ft1">C</span></nobr></DIV>
<DIV style="position:absolute;top:435;left:333"><nobr><span class="ft5">such that that for</span></nobr></DIV>
<DIV style="position:absolute;top:451;left:81"><nobr><span class="ft5">any instance I:</span></nobr></DIV>
<DIV style="position:absolute;top:479;left:191"><nobr><span class="ft5">QA</span></nobr></DIV>
<DIV style="position:absolute;top:474;left:212"><nobr><span class="ft1"></span></nobr></DIV>
<DIV style="position:absolute;top:473;left:221"><nobr><span class="ft13">R</span></nobr></DIV>
<DIV style="position:absolute;top:480;left:221"><nobr><span class="ft13">C</span></nobr></DIV>
<DIV style="position:absolute;top:479;left:230"><nobr><span class="ft5">(I) = Core</span></nobr></DIV>
<DIV style="position:absolute;top:476;left:295"><nobr><span class="ft1">I</span></nobr></DIV>
<DIV style="position:absolute;top:485;left:295"><nobr><span class="ft1">C</span></nobr></DIV>
<DIV style="position:absolute;top:479;left:304"><nobr><span class="ft5">(R),</span></nobr></DIV>
<DIV style="position:absolute;top:504;left:81"><nobr><span class="ft5">we call </span></nobr></DIV>
<DIV style="position:absolute;top:501;left:138"><nobr><span class="ft1">R</span></nobr></DIV>
<DIV style="position:absolute;top:509;left:138"><nobr><span class="ft1">C</span></nobr></DIV>
<DIV style="position:absolute;top:504;left:153"><nobr><span class="ft5">a core expression of the relation R w.r.t the set</span></nobr></DIV>
<DIV style="position:absolute;top:519;left:81"><nobr><span class="ft5">of integrity constraints C.</span></nobr></DIV>
<DIV style="position:absolute;top:551;left:96"><nobr><span class="ft5">Fact</span></nobr></DIV>
<DIV style="position:absolute;top:548;left:135"><nobr><span class="ft5">2. If C is a set of denial integrity constraints, then</span></nobr></DIV>
<DIV style="position:absolute;top:564;left:81"><nobr><span class="ft5">for any R  S there exists a core expression </span></nobr></DIV>
<DIV style="position:absolute;top:562;left:365"><nobr><span class="ft1">R</span></nobr></DIV>
<DIV style="position:absolute;top:570;left:365"><nobr><span class="ft1">C</span></nobr></DIV>
<DIV style="position:absolute;top:564;left:379"><nobr><span class="ft5">of R w.r.t</span></nobr></DIV>
<DIV style="position:absolute;top:580;left:81"><nobr><span class="ft5">C.</span></nobr></DIV>
<DIV style="position:absolute;top:609;left:96"><nobr><span class="ft5">Example</span></nobr></DIV>
<DIV style="position:absolute;top:607;left:162"><nobr><span class="ft5">4. Suppose we have a table P (A, B) with a</span></nobr></DIV>
<DIV style="position:absolute;top:620;left:81"><nobr><span class="ft5">functional dependency A  B. The core expression for P</span></nobr></DIV>
<DIV style="position:absolute;top:633;left:81"><nobr><span class="ft5">in SQL is:</span></nobr></DIV>
<DIV style="position:absolute;top:656;left:93"><nobr><span class="ft4">SELECT * FROM P P1 WHERE NOT EXISTS (</span></nobr></DIV>
<DIV style="position:absolute;top:669;left:119"><nobr><span class="ft4">SELECT * FROM P P2</span></nobr></DIV>
<DIV style="position:absolute;top:682;left:144"><nobr><span class="ft4">WHERE P1.A = P2.A AND P1.B &lt;&gt; P2.B);</span></nobr></DIV>
<DIV style="position:absolute;top:713;left:81"><nobr><span class="ft11">Having defined repairs, we can define consistent answers to<br>queries. In general, the intuition is that the consistent query<br>answer is an answer to the query in every repair. In this pa-<br>per we consider consistent answers for two classes of queries.</span></nobr></DIV>
<DIV style="position:absolute;top:789;left:96"><nobr><span class="ft5">Definition 7</span></nobr></DIV>
<DIV style="position:absolute;top:789;left:197"><nobr><span class="ft5">(CQA for ground queries).</span></nobr></DIV>
<DIV style="position:absolute;top:787;left:391"><nobr><span class="ft5">Given a</span></nobr></DIV>
<DIV style="position:absolute;top:802;left:81"><nobr><span class="ft11">database instance I and a set of denial integrity constraints<br>C, we say that true (resp. false) is the consistent answer to<br>a ground query  w.r.t. C in I , and we write I |=</span></nobr></DIV>
<DIV style="position:absolute;top:838;left:397"><nobr><span class="ft1">C</span></nobr></DIV>
<DIV style="position:absolute;top:834;left:412"><nobr><span class="ft5">, if</span></nobr></DIV>
<DIV style="position:absolute;top:849;left:81"><nobr><span class="ft5">in every repair I  Rep</span></nobr></DIV>
<DIV style="position:absolute;top:856;left:226"><nobr><span class="ft1">C</span></nobr></DIV>
<DIV style="position:absolute;top:849;left:235"><nobr><span class="ft5">(I), I |=  (resp. I |= ).</span></nobr></DIV>
<DIV style="position:absolute;top:881;left:96"><nobr><span class="ft5">Definition 8</span></nobr></DIV>
<DIV style="position:absolute;top:881;left:197"><nobr><span class="ft5">(CQA for relational algebra).</span></nobr></DIV>
<DIV style="position:absolute;top:894;left:81"><nobr><span class="ft11">Given a database instance I and a set of denial integrity<br>constraints C, the set of consistent answers to a query E<br>w.r.t. C in I is defined as follows:</span></nobr></DIV>
<DIV style="position:absolute;top:953;left:163"><nobr><span class="ft5">CQA</span></nobr></DIV>
<DIV style="position:absolute;top:949;left:194"><nobr><span class="ft15">E<br>C</span></nobr></DIV>
<DIV style="position:absolute;top:953;left:203"><nobr><span class="ft5">(I) =</span></nobr></DIV>
<DIV style="position:absolute;top:972;left:240"><nobr><span class="ft1">I Rep</span></nobr></DIV>
<DIV style="position:absolute;top:976;left:276"><nobr><span class="ft13">C</span></nobr></DIV>
<DIV style="position:absolute;top:970;left:284"><nobr><span class="ft1">(I)</span></nobr></DIV>
<DIV style="position:absolute;top:953;left:301"><nobr><span class="ft5">QA</span></nobr></DIV>
<DIV style="position:absolute;top:949;left:322"><nobr><span class="ft1">E</span></nobr></DIV>
<DIV style="position:absolute;top:953;left:331"><nobr><span class="ft5">(I ).</span></nobr></DIV>
<DIV style="position:absolute;top:998;left:81"><nobr><span class="ft3"><b>2.3</b></span></nobr></DIV>
<DIV style="position:absolute;top:998;left:121"><nobr><span class="ft3"><b>Conflict hypergraphs</b></span></nobr></DIV>
<DIV style="position:absolute;top:1019;left:94"><nobr><span class="ft5">The conflict hypergraph [13] constitutes a compact, space-</span></nobr></DIV>
<DIV style="position:absolute;top:1035;left:81"><nobr><span class="ft11">efficient representation of all repairs of a given database in-<br>stance. Note that this representation is specifically geared<br>toward denial constraints.</span></nobr></DIV>
<DIV style="position:absolute;top:89;left:490"><nobr><span class="ft5">Definition 9</span></nobr></DIV>
<DIV style="position:absolute;top:89;left:591"><nobr><span class="ft5">(Conflict).</span></nobr></DIV>
<DIV style="position:absolute;top:86;left:676"><nobr><span class="ft5">For a given integrity con-</span></nobr></DIV>
<DIV style="position:absolute;top:102;left:475"><nobr><span class="ft5">straint c of form (1), a set of facts {R</span></nobr></DIV>
<DIV style="position:absolute;top:107;left:715"><nobr><span class="ft1">i</span></nobr></DIV>
<DIV style="position:absolute;top:108;left:719"><nobr><span class="ft13">1</span></nobr></DIV>
<DIV style="position:absolute;top:102;left:726"><nobr><span class="ft5">(t</span></nobr></DIV>
<DIV style="position:absolute;top:104;left:736"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:102;left:742"><nobr><span class="ft5">), . . . , R</span></nobr></DIV>
<DIV style="position:absolute;top:107;left:789"><nobr><span class="ft1">i</span></nobr></DIV>
<DIV style="position:absolute;top:110;left:793"><nobr><span class="ft13">k</span></nobr></DIV>
<DIV style="position:absolute;top:102;left:800"><nobr><span class="ft5">(t</span></nobr></DIV>
<DIV style="position:absolute;top:107;left:810"><nobr><span class="ft1">k</span></nobr></DIV>
<DIV style="position:absolute;top:102;left:817"><nobr><span class="ft5">)</span></nobr></DIV>
<DIV style="position:absolute;top:99;left:823"><nobr><span class="ft5">},</span></nobr></DIV>
<DIV style="position:absolute;top:118;left:475"><nobr><span class="ft5">where t</span></nobr></DIV>
<DIV style="position:absolute;top:122;left:521"><nobr><span class="ft1">j</span></nobr></DIV>
<DIV style="position:absolute;top:114;left:534"><nobr><span class="ft5"> I(R</span></nobr></DIV>
<DIV style="position:absolute;top:122;left:573"><nobr><span class="ft1">i</span></nobr></DIV>
<DIV style="position:absolute;top:125;left:577"><nobr><span class="ft13">j</span></nobr></DIV>
<DIV style="position:absolute;top:118;left:584"><nobr><span class="ft5">), is a conflict in a database instance I</span></nobr></DIV>
<DIV style="position:absolute;top:133;left:475"><nobr><span class="ft5">if (t</span></nobr></DIV>
<DIV style="position:absolute;top:136;left:509"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:133;left:515"><nobr><span class="ft5">, . . . , t</span></nobr></DIV>
<DIV style="position:absolute;top:138;left:551"><nobr><span class="ft1">k</span></nobr></DIV>
<DIV style="position:absolute;top:133;left:558"><nobr><span class="ft5">). By</span></nobr></DIV>
<DIV style="position:absolute;top:130;left:601"><nobr><span class="ft5">E</span></nobr></DIV>
<DIV style="position:absolute;top:138;left:609"><nobr><span class="ft1">c,I</span></nobr></DIV>
<DIV style="position:absolute;top:133;left:630"><nobr><span class="ft5">we denote the set of all conflicts</span></nobr></DIV>
<DIV style="position:absolute;top:149;left:475"><nobr><span class="ft5">generated by the integrity constraint c in I.</span></nobr></DIV>
<DIV style="position:absolute;top:182;left:490"><nobr><span class="ft5">Definition 10</span></nobr></DIV>
<DIV style="position:absolute;top:182;left:599"><nobr><span class="ft5">(Conflict hypergraph).</span></nobr></DIV>
<DIV style="position:absolute;top:180;left:768"><nobr><span class="ft5">For</span></nobr></DIV>
<DIV style="position:absolute;top:180;left:827"><nobr><span class="ft5">a</span></nobr></DIV>
<DIV style="position:absolute;top:195;left:475"><nobr><span class="ft11">given set of integrity constraints C and a database instance<br>I, a conflict hypergraph G</span></nobr></DIV>
<DIV style="position:absolute;top:216;left:639"><nobr><span class="ft1">C,I</span></nobr></DIV>
<DIV style="position:absolute;top:211;left:663"><nobr><span class="ft5">is a hypergraph with the set</span></nobr></DIV>
<DIV style="position:absolute;top:227;left:475"><nobr><span class="ft11">of vertices being the set of facts from the instance I, and<br>the set of hyperedges consisting of all conflicts generated by<br>constraints from C in I, i.e.</span></nobr></DIV>
<DIV style="position:absolute;top:283;left:485"><nobr><span class="ft5">G</span></nobr></DIV>
<DIV style="position:absolute;top:291;left:493"><nobr><span class="ft1">C,I</span></nobr></DIV>
<DIV style="position:absolute;top:286;left:514"><nobr><span class="ft5">= (</span></nobr></DIV>
<DIV style="position:absolute;top:283;left:534"><nobr><span class="ft5">V</span></nobr></DIV>
<DIV style="position:absolute;top:291;left:543"><nobr><span class="ft1">I</span></nobr></DIV>
<DIV style="position:absolute;top:286;left:549"><nobr><span class="ft5">, E</span></nobr></DIV>
<DIV style="position:absolute;top:291;left:563"><nobr><span class="ft1">C,I</span></nobr></DIV>
<DIV style="position:absolute;top:286;left:580"><nobr><span class="ft5">), where V</span></nobr></DIV>
<DIV style="position:absolute;top:291;left:643"><nobr><span class="ft1">I</span></nobr></DIV>
<DIV style="position:absolute;top:286;left:653"><nobr><span class="ft5">= (I), and E</span></nobr></DIV>
<DIV style="position:absolute;top:291;left:739"><nobr><span class="ft1">C,I</span></nobr></DIV>
<DIV style="position:absolute;top:286;left:761"><nobr><span class="ft5">=</span></nobr></DIV>
<DIV style="position:absolute;top:305;left:775"><nobr><span class="ft1">cC</span></nobr></DIV>
<DIV style="position:absolute;top:283;left:799"><nobr><span class="ft5">E</span></nobr></DIV>
<DIV style="position:absolute;top:291;left:806"><nobr><span class="ft1">c,I</span></nobr></DIV>
<DIV style="position:absolute;top:286;left:821"><nobr><span class="ft5">.</span></nobr></DIV>
<DIV style="position:absolute;top:333;left:490"><nobr><span class="ft5">Definition 11</span></nobr></DIV>
<DIV style="position:absolute;top:333;left:599"><nobr><span class="ft5">(Maximal independent set).</span></nobr></DIV>
<DIV style="position:absolute;top:331;left:796"><nobr><span class="ft5">For a</span></nobr></DIV>
<DIV style="position:absolute;top:347;left:475"><nobr><span class="ft5">hypergraph</span></nobr></DIV>
<DIV style="position:absolute;top:343;left:544"><nobr><span class="ft5">G = (V, E), the set of vertices is a maximal inde-</span></nobr></DIV>
<DIV style="position:absolute;top:362;left:475"><nobr><span class="ft11">pendent set if it is a maximal set that contains no hyperedge<br>from</span></nobr></DIV>
<DIV style="position:absolute;top:375;left:508"><nobr><span class="ft5">E.</span></nobr></DIV>
<DIV style="position:absolute;top:411;left:490"><nobr><span class="ft5">Fact</span></nobr></DIV>
<DIV style="position:absolute;top:409;left:529"><nobr><span class="ft5">3. Let I be a database instance, and C a set of</span></nobr></DIV>
<DIV style="position:absolute;top:424;left:475"><nobr><span class="ft5">denial constraints, then for any repair I  Rep</span></nobr></DIV>
<DIV style="position:absolute;top:431;left:765"><nobr><span class="ft1">C</span></nobr></DIV>
<DIV style="position:absolute;top:424;left:775"><nobr><span class="ft5">(I), (I )</span></nobr></DIV>
<DIV style="position:absolute;top:440;left:475"><nobr><span class="ft5">is a maximal independent set M in G</span></nobr></DIV>
<DIV style="position:absolute;top:445;left:701"><nobr><span class="ft1">C,I</span></nobr></DIV>
<DIV style="position:absolute;top:440;left:719"><nobr><span class="ft5">, and vice versa.</span></nobr></DIV>
<DIV style="position:absolute;top:471;left:475"><nobr><span class="ft11">As shown in the following example in case of denial con-<br>straints the set of conflicts can be defined using a simple<br>query.</span></nobr></DIV>
<DIV style="position:absolute;top:530;left:490"><nobr><span class="ft5">Example</span></nobr></DIV>
<DIV style="position:absolute;top:527;left:556"><nobr><span class="ft5">5. Suppose we have a table P (A, B) with a</span></nobr></DIV>
<DIV style="position:absolute;top:541;left:475"><nobr><span class="ft5">functional dependency A  B. The SQL expression for se-</span></nobr></DIV>
<DIV style="position:absolute;top:554;left:475"><nobr><span class="ft5">lecting all conflicts from P generated by the functional con-</span></nobr></DIV>
<DIV style="position:absolute;top:568;left:475"><nobr><span class="ft5">straint is:</span></nobr></DIV>
<DIV style="position:absolute;top:591;left:494"><nobr><span class="ft4">SELECT * FROM P P1, P P2</span></nobr></DIV>
<DIV style="position:absolute;top:604;left:520"><nobr><span class="ft4">WHERE P1.A = P2.A AND P1.B &lt;&gt; P2.B;</span></nobr></DIV>
<DIV style="position:absolute;top:639;left:490"><nobr><span class="ft5">Definition 12</span></nobr></DIV>
<DIV style="position:absolute;top:639;left:599"><nobr><span class="ft5">(Data complexity).</span></nobr></DIV>
<DIV style="position:absolute;top:637;left:737"><nobr><span class="ft5">The data com-</span></nobr></DIV>
<DIV style="position:absolute;top:653;left:475"><nobr><span class="ft11">plexity of consistent answers to ground first-order queries<br>is the complexity of determining the membership in the set<br>D</span></nobr></DIV>
<DIV style="position:absolute;top:689;left:487"><nobr><span class="ft1">C,</span></nobr></DIV>
<DIV style="position:absolute;top:684;left:511"><nobr><span class="ft5">=</span></nobr></DIV>
<DIV style="position:absolute;top:681;left:528"><nobr><span class="ft5">{I|I |=</span></nobr></DIV>
<DIV style="position:absolute;top:689;left:570"><nobr><span class="ft1">C</span></nobr></DIV>
<DIV style="position:absolute;top:684;left:585"><nobr><span class="ft5">}, where  is a fixed ground first-order</span></nobr></DIV>
<DIV style="position:absolute;top:700;left:475"><nobr><span class="ft5">query, and C is a fixed finite set of integrity constraints.</span></nobr></DIV>
<DIV style="position:absolute;top:730;left:475"><nobr><span class="ft11">We note that for a fixed set of integrity constraints, the<br>conflict hypergraph is of polynomial size (in the number of<br>tuples in the database instance).</span></nobr></DIV>
<DIV style="position:absolute;top:797;left:475"><nobr><span class="ft3"><b>3.</b></span></nobr></DIV>
<DIV style="position:absolute;top:797;left:507"><nobr><span class="ft3"><b>IMPLEMENTATION</b></span></nobr></DIV>
<DIV style="position:absolute;top:829;left:475"><nobr><span class="ft3"><b>3.1</b></span></nobr></DIV>
<DIV style="position:absolute;top:829;left:516"><nobr><span class="ft3"><b>Consistent query answers</b></span></nobr></DIV>
<DIV style="position:absolute;top:851;left:489"><nobr><span class="ft5">We review here the algorithm [13] for checking the consis-</span></nobr></DIV>
<DIV style="position:absolute;top:867;left:475"><nobr><span class="ft11">tency of ground queries in the presence of denial constraints,<br>and then show how to use it to answer -free queries re-<br>lational algebra queries, which which correspond to open<br>quantifier-free relational calculus queries.</span></nobr></DIV>
<DIV style="position:absolute;top:929;left:489"><nobr><span class="ft5">We assume here that we work with a set of integrity con-</span></nobr></DIV>
<DIV style="position:absolute;top:945;left:475"><nobr><span class="ft11">straints consisting only of denial constraints. The input to<br>the algorithm consists of a ground quantifier-free formula<br>, a set of integrity constraints C, and a database instance<br>I. We want the algorithm to answer the question whether<br>I |=</span></nobr></DIV>
<DIV style="position:absolute;top:1013;left:498"><nobr><span class="ft1">C</span></nobr></DIV>
<DIV style="position:absolute;top:1008;left:512"><nobr><span class="ft5">.</span></nobr></DIV>
<DIV style="position:absolute;top:1038;left:490"><nobr><span class="ft5">Theorem</span></nobr></DIV>
<DIV style="position:absolute;top:1035;left:558"><nobr><span class="ft5">1. [13] The data complexity of consistent an-</span></nobr></DIV>
<DIV style="position:absolute;top:1051;left:475"><nobr><span class="ft11">swers to quantifier-free ground queries w.r.t a set of denial<br>constraints is in P .</span></nobr></DIV>
<DIV style="position:absolute;top:1116;left:449"><nobr><span class="ft9">419</span></nobr></DIV>
</DIV>
<!-- Page 4 -->
<a name="4"></a>
<DIV style="position:relative;width:918;height:1188;">
<STYLE type="text/css">
<!--
	.ft16{font-size:11px;line-height:25px;font-family:Times;color:#000000;}
	.ft17{font-size:6px;line-height:10px;font-family:Times;color:#000000;}
-->
</STYLE>
<IMG width="918" height="1188" src="54004.png" alt="background image">
<DIV style="position:absolute;top:86;left:81"><nobr><span class="ft11">The proof of this theorem can be found in [13] together with<br>the corresponding algorithm that we call HProver.</span></nobr></DIV>
<DIV style="position:absolute;top:102;left:412"><nobr><span class="ft5">This</span></nobr></DIV>
<DIV style="position:absolute;top:118;left:81"><nobr><span class="ft11">algorithm takes the query in CNF, and a conflict hyper-<br>graph</span></nobr></DIV>
<DIV style="position:absolute;top:130;left:121"><nobr><span class="ft5">G</span></nobr></DIV>
<DIV style="position:absolute;top:138;left:129"><nobr><span class="ft1">C,I</span></nobr></DIV>
<DIV style="position:absolute;top:133;left:152"><nobr><span class="ft5">that corresponds to the database instance I in</span></nobr></DIV>
<DIV style="position:absolute;top:149;left:81"><nobr><span class="ft5">the presence of integrity constraints C. The first step of</span></nobr></DIV>
<DIV style="position:absolute;top:195;left:81"><nobr><span class="ft4">Input:  = </span></nobr></DIV>
<DIV style="position:absolute;top:196;left:159"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:192;left:168"><nobr><span class="ft4"> . . .  </span></nobr></DIV>
<DIV style="position:absolute;top:199;left:219"><nobr><span class="ft1">k</span></nobr></DIV>
<DIV style="position:absolute;top:195;left:230"><nobr><span class="ft4">­ ground input formula in CNF,</span></nobr></DIV>
<DIV style="position:absolute;top:205;left:125"><nobr><span class="ft4">G</span></nobr></DIV>
<DIV style="position:absolute;top:212;left:133"><nobr><span class="ft1">C,I</span></nobr></DIV>
<DIV style="position:absolute;top:208;left:154"><nobr><span class="ft4">= (</span></nobr></DIV>
<DIV style="position:absolute;top:205;left:173"><nobr><span class="ft4">V</span></nobr></DIV>
<DIV style="position:absolute;top:212;left:180"><nobr><span class="ft1">I</span></nobr></DIV>
<DIV style="position:absolute;top:205;left:187"><nobr><span class="ft4">, E</span></nobr></DIV>
<DIV style="position:absolute;top:212;left:199"><nobr><span class="ft1">C,I</span></nobr></DIV>
<DIV style="position:absolute;top:208;left:217"><nobr><span class="ft4">) ­ conflict hypergraph of</span></nobr></DIV>
<DIV style="position:absolute;top:205;left:367"><nobr><span class="ft4">I w.r.t. C.</span></nobr></DIV>
<DIV style="position:absolute;top:222;left:81"><nobr><span class="ft4">1</span></nobr></DIV>
<DIV style="position:absolute;top:222;left:100"><nobr><span class="ft4">for i  {1, . . . , k} do</span></nobr></DIV>
<DIV style="position:absolute;top:235;left:81"><nobr><span class="ft4">2</span></nobr></DIV>
<DIV style="position:absolute;top:235;left:119"><nobr><span class="ft4">let ¬</span></nobr></DIV>
<DIV style="position:absolute;top:239;left:157"><nobr><span class="ft1">i</span></nobr></DIV>
<DIV style="position:absolute;top:232;left:165"><nobr><span class="ft4"> ¬R</span></nobr></DIV>
<DIV style="position:absolute;top:239;left:197"><nobr><span class="ft1">i</span></nobr></DIV>
<DIV style="position:absolute;top:240;left:201"><nobr><span class="ft13">1</span></nobr></DIV>
<DIV style="position:absolute;top:235;left:207"><nobr><span class="ft4">(</span></nobr></DIV>
<DIV style="position:absolute;top:232;left:212"><nobr><span class="ft4">t</span></nobr></DIV>
<DIV style="position:absolute;top:237;left:217"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:235;left:223"><nobr><span class="ft4">)</span></nobr></DIV>
<DIV style="position:absolute;top:232;left:231"><nobr><span class="ft4"> . . .  ¬R</span></nobr></DIV>
<DIV style="position:absolute;top:239;left:291"><nobr><span class="ft1">i</span></nobr></DIV>
<DIV style="position:absolute;top:242;left:295"><nobr><span class="ft13">p</span></nobr></DIV>
<DIV style="position:absolute;top:235;left:302"><nobr><span class="ft4">(</span></nobr></DIV>
<DIV style="position:absolute;top:232;left:307"><nobr><span class="ft4">t</span></nobr></DIV>
<DIV style="position:absolute;top:239;left:312"><nobr><span class="ft1">p</span></nobr></DIV>
<DIV style="position:absolute;top:235;left:318"><nobr><span class="ft4">)</span></nobr></DIV>
<DIV style="position:absolute;top:232;left:326"><nobr><span class="ft4"></span></nobr></DIV>
<DIV style="position:absolute;top:246;left:198"><nobr><span class="ft4"> R</span></nobr></DIV>
<DIV style="position:absolute;top:253;left:219"><nobr><span class="ft1">i</span></nobr></DIV>
<DIV style="position:absolute;top:256;left:223"><nobr><span class="ft13">p+1</span></nobr></DIV>
<DIV style="position:absolute;top:249;left:242"><nobr><span class="ft4">(</span></nobr></DIV>
<DIV style="position:absolute;top:246;left:247"><nobr><span class="ft4">t</span></nobr></DIV>
<DIV style="position:absolute;top:253;left:252"><nobr><span class="ft1">p+1</span></nobr></DIV>
<DIV style="position:absolute;top:249;left:272"><nobr><span class="ft4">)</span></nobr></DIV>
<DIV style="position:absolute;top:246;left:280"><nobr><span class="ft4"> . . . R</span></nobr></DIV>
<DIV style="position:absolute;top:253;left:318"><nobr><span class="ft1">i</span></nobr></DIV>
<DIV style="position:absolute;top:256;left:322"><nobr><span class="ft13">m</span></nobr></DIV>
<DIV style="position:absolute;top:249;left:333"><nobr><span class="ft4">(</span></nobr></DIV>
<DIV style="position:absolute;top:246;left:338"><nobr><span class="ft4">t</span></nobr></DIV>
<DIV style="position:absolute;top:253;left:342"><nobr><span class="ft1">m</span></nobr></DIV>
<DIV style="position:absolute;top:249;left:353"><nobr><span class="ft4">).</span></nobr></DIV>
<DIV style="position:absolute;top:264;left:81"><nobr><span class="ft4">3</span></nobr></DIV>
<DIV style="position:absolute;top:264;left:119"><nobr><span class="ft4">for j  {p + 1, . . . , m} do</span></nobr></DIV>
<DIV style="position:absolute;top:277;left:81"><nobr><span class="ft4">4</span></nobr></DIV>
<DIV style="position:absolute;top:277;left:138"><nobr><span class="ft4">if t</span></nobr></DIV>
<DIV style="position:absolute;top:281;left:156"><nobr><span class="ft1">j</span></nobr></DIV>
<DIV style="position:absolute;top:274;left:165"><nobr><span class="ft4"> I(R</span></nobr></DIV>
<DIV style="position:absolute;top:281;left:198"><nobr><span class="ft1">i</span></nobr></DIV>
<DIV style="position:absolute;top:284;left:202"><nobr><span class="ft13">j</span></nobr></DIV>
<DIV style="position:absolute;top:277;left:209"><nobr><span class="ft4">) then</span></nobr></DIV>
<DIV style="position:absolute;top:292;left:81"><nobr><span class="ft4">5</span></nobr></DIV>
<DIV style="position:absolute;top:292;left:157"><nobr><span class="ft4">next i;</span></nobr></DIV>
<DIV style="position:absolute;top:305;left:81"><nobr><span class="ft4">6</span></nobr></DIV>
<DIV style="position:absolute;top:302;left:119"><nobr><span class="ft4">B  {R</span></nobr></DIV>
<DIV style="position:absolute;top:309;left:165"><nobr><span class="ft1">i</span></nobr></DIV>
<DIV style="position:absolute;top:312;left:169"><nobr><span class="ft13">p+1</span></nobr></DIV>
<DIV style="position:absolute;top:305;left:188"><nobr><span class="ft4">(</span></nobr></DIV>
<DIV style="position:absolute;top:302;left:193"><nobr><span class="ft4">t</span></nobr></DIV>
<DIV style="position:absolute;top:309;left:198"><nobr><span class="ft1">p+1</span></nobr></DIV>
<DIV style="position:absolute;top:305;left:218"><nobr><span class="ft4">)</span></nobr></DIV>
<DIV style="position:absolute;top:302;left:223"><nobr><span class="ft4">, . . . , R</span></nobr></DIV>
<DIV style="position:absolute;top:309;left:261"><nobr><span class="ft1">i</span></nobr></DIV>
<DIV style="position:absolute;top:312;left:265"><nobr><span class="ft13">m</span></nobr></DIV>
<DIV style="position:absolute;top:305;left:276"><nobr><span class="ft4">(</span></nobr></DIV>
<DIV style="position:absolute;top:302;left:281"><nobr><span class="ft4">t</span></nobr></DIV>
<DIV style="position:absolute;top:309;left:285"><nobr><span class="ft1">m</span></nobr></DIV>
<DIV style="position:absolute;top:305;left:296"><nobr><span class="ft4">)</span></nobr></DIV>
<DIV style="position:absolute;top:302;left:301"><nobr><span class="ft4">}</span></nobr></DIV>
<DIV style="position:absolute;top:320;left:81"><nobr><span class="ft4">7</span></nobr></DIV>
<DIV style="position:absolute;top:320;left:119"><nobr><span class="ft4">for j  {1, . . . , p} do</span></nobr></DIV>
<DIV style="position:absolute;top:333;left:81"><nobr><span class="ft4">8</span></nobr></DIV>
<DIV style="position:absolute;top:333;left:138"><nobr><span class="ft4">if t</span></nobr></DIV>
<DIV style="position:absolute;top:337;left:156"><nobr><span class="ft1">j</span></nobr></DIV>
<DIV style="position:absolute;top:330;left:165"><nobr><span class="ft4"> I(R</span></nobr></DIV>
<DIV style="position:absolute;top:337;left:198"><nobr><span class="ft1">i</span></nobr></DIV>
<DIV style="position:absolute;top:340;left:202"><nobr><span class="ft13">j</span></nobr></DIV>
<DIV style="position:absolute;top:333;left:209"><nobr><span class="ft4">) then</span></nobr></DIV>
<DIV style="position:absolute;top:348;left:81"><nobr><span class="ft4">9</span></nobr></DIV>
<DIV style="position:absolute;top:348;left:157"><nobr><span class="ft4">choose e</span></nobr></DIV>
<DIV style="position:absolute;top:352;left:209"><nobr><span class="ft1">j</span></nobr></DIV>
<DIV style="position:absolute;top:345;left:219"><nobr><span class="ft4"> {e  E</span></nobr></DIV>
<DIV style="position:absolute;top:352;left:265"><nobr><span class="ft1">C,I</span></nobr></DIV>
<DIV style="position:absolute;top:345;left:283"><nobr><span class="ft4">|R</span></nobr></DIV>
<DIV style="position:absolute;top:352;left:296"><nobr><span class="ft1">i</span></nobr></DIV>
<DIV style="position:absolute;top:355;left:300"><nobr><span class="ft13">j</span></nobr></DIV>
<DIV style="position:absolute;top:348;left:306"><nobr><span class="ft4">(</span></nobr></DIV>
<DIV style="position:absolute;top:345;left:311"><nobr><span class="ft4">t</span></nobr></DIV>
<DIV style="position:absolute;top:352;left:316"><nobr><span class="ft1">j</span></nobr></DIV>
<DIV style="position:absolute;top:348;left:322"><nobr><span class="ft4">)</span></nobr></DIV>
<DIV style="position:absolute;top:345;left:330"><nobr><span class="ft4"> e} nondeterm.</span></nobr></DIV>
<DIV style="position:absolute;top:363;left:81"><nobr><span class="ft4">10</span></nobr></DIV>
<DIV style="position:absolute;top:360;left:157"><nobr><span class="ft4">B  B  (e</span></nobr></DIV>
<DIV style="position:absolute;top:366;left:222"><nobr><span class="ft1">j</span></nobr></DIV>
<DIV style="position:absolute;top:360;left:231"><nobr><span class="ft4">\ {R</span></nobr></DIV>
<DIV style="position:absolute;top:366;left:256"><nobr><span class="ft1">i</span></nobr></DIV>
<DIV style="position:absolute;top:369;left:260"><nobr><span class="ft13">j</span></nobr></DIV>
<DIV style="position:absolute;top:363;left:266"><nobr><span class="ft4">(</span></nobr></DIV>
<DIV style="position:absolute;top:360;left:271"><nobr><span class="ft4">t</span></nobr></DIV>
<DIV style="position:absolute;top:366;left:276"><nobr><span class="ft1">j</span></nobr></DIV>
<DIV style="position:absolute;top:363;left:281"><nobr><span class="ft4">)</span></nobr></DIV>
<DIV style="position:absolute;top:360;left:286"><nobr><span class="ft4">}).</span></nobr></DIV>
<DIV style="position:absolute;top:377;left:81"><nobr><span class="ft4">11</span></nobr></DIV>
<DIV style="position:absolute;top:377;left:119"><nobr><span class="ft4">if B is independent in G</span></nobr></DIV>
<DIV style="position:absolute;top:381;left:253"><nobr><span class="ft1">C,I</span></nobr></DIV>
<DIV style="position:absolute;top:377;left:275"><nobr><span class="ft4">then</span></nobr></DIV>
<DIV style="position:absolute;top:391;left:81"><nobr><span class="ft4">12</span></nobr></DIV>
<DIV style="position:absolute;top:391;left:138"><nobr><span class="ft4">return false;</span></nobr></DIV>
<DIV style="position:absolute;top:404;left:81"><nobr><span class="ft4">13 return true;</span></nobr></DIV>
<DIV style="position:absolute;top:460;left:157"><nobr><span class="ft5">Figure 1: Algorithm</span></nobr></DIV>
<DIV style="position:absolute;top:457;left:304"><nobr><span class="ft5">HProver</span></nobr></DIV>
<DIV style="position:absolute;top:493;left:81"><nobr><span class="ft11">the algorithm reduces the task of determining whether true<br>is the consistent answer to the query  to answering the<br>same question for every conjunct </span></nobr></DIV>
<DIV style="position:absolute;top:529;left:293"><nobr><span class="ft1">i</span></nobr></DIV>
<DIV style="position:absolute;top:524;left:298"><nobr><span class="ft5">. Then each formula </span></nobr></DIV>
<DIV style="position:absolute;top:529;left:435"><nobr><span class="ft1">i</span></nobr></DIV>
<DIV style="position:absolute;top:540;left:81"><nobr><span class="ft11">is negated and the rest of the algorithm attempts to find a<br>repair I in which ¬</span></nobr></DIV>
<DIV style="position:absolute;top:560;left:210"><nobr><span class="ft1">i</span></nobr></DIV>
<DIV style="position:absolute;top:555;left:220"><nobr><span class="ft5">is true, i.e., in which</span></nobr></DIV>
<DIV style="position:absolute;top:582;left:97"><nobr><span class="ft5">1. t</span></nobr></DIV>
<DIV style="position:absolute;top:587;left:119"><nobr><span class="ft1">j</span></nobr></DIV>
<DIV style="position:absolute;top:579;left:129"><nobr><span class="ft5"> I (R</span></nobr></DIV>
<DIV style="position:absolute;top:587;left:169"><nobr><span class="ft1">i</span></nobr></DIV>
<DIV style="position:absolute;top:590;left:173"><nobr><span class="ft13">j</span></nobr></DIV>
<DIV style="position:absolute;top:582;left:179"><nobr><span class="ft5">) for (j = p + 1, . . . , m)</span></nobr></DIV>
<DIV style="position:absolute;top:603;left:97"><nobr><span class="ft5">2. t</span></nobr></DIV>
<DIV style="position:absolute;top:608;left:119"><nobr><span class="ft1">j</span></nobr></DIV>
<DIV style="position:absolute;top:600;left:129"><nobr><span class="ft5"> I (R</span></nobr></DIV>
<DIV style="position:absolute;top:608;left:169"><nobr><span class="ft1">i</span></nobr></DIV>
<DIV style="position:absolute;top:611;left:173"><nobr><span class="ft13">j</span></nobr></DIV>
<DIV style="position:absolute;top:603;left:179"><nobr><span class="ft5">) for (j = 1, . . . , p)</span></nobr></DIV>
<DIV style="position:absolute;top:630;left:81"><nobr><span class="ft11">Such a repair corresponds to a maximal independent set M<br>in the conflict hypergraph such that:</span></nobr></DIV>
<DIV style="position:absolute;top:673;left:93"><nobr><span class="ft5">1 . every of R</span></nobr></DIV>
<DIV style="position:absolute;top:677;left:176"><nobr><span class="ft1">i</span></nobr></DIV>
<DIV style="position:absolute;top:680;left:180"><nobr><span class="ft13">p+1</span></nobr></DIV>
<DIV style="position:absolute;top:673;left:200"><nobr><span class="ft5">(t</span></nobr></DIV>
<DIV style="position:absolute;top:677;left:210"><nobr><span class="ft1">p+1</span></nobr></DIV>
<DIV style="position:absolute;top:673;left:231"><nobr><span class="ft5">), . . . , R</span></nobr></DIV>
<DIV style="position:absolute;top:677;left:277"><nobr><span class="ft1">i</span></nobr></DIV>
<DIV style="position:absolute;top:680;left:281"><nobr><span class="ft13">m</span></nobr></DIV>
<DIV style="position:absolute;top:673;left:292"><nobr><span class="ft5">(t</span></nobr></DIV>
<DIV style="position:absolute;top:677;left:302"><nobr><span class="ft1">m</span></nobr></DIV>
<DIV style="position:absolute;top:673;left:313"><nobr><span class="ft5">) is an element of M ,</span></nobr></DIV>
<DIV style="position:absolute;top:694;left:93"><nobr><span class="ft5">2 . none of R</span></nobr></DIV>
<DIV style="position:absolute;top:699;left:174"><nobr><span class="ft1">i</span></nobr></DIV>
<DIV style="position:absolute;top:700;left:178"><nobr><span class="ft13">1</span></nobr></DIV>
<DIV style="position:absolute;top:694;left:184"><nobr><span class="ft5">(t</span></nobr></DIV>
<DIV style="position:absolute;top:697;left:194"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:694;left:201"><nobr><span class="ft5">), . . . , R</span></nobr></DIV>
<DIV style="position:absolute;top:699;left:247"><nobr><span class="ft1">i</span></nobr></DIV>
<DIV style="position:absolute;top:701;left:251"><nobr><span class="ft13">p</span></nobr></DIV>
<DIV style="position:absolute;top:694;left:258"><nobr><span class="ft5">(t</span></nobr></DIV>
<DIV style="position:absolute;top:699;left:269"><nobr><span class="ft1">p</span></nobr></DIV>
<DIV style="position:absolute;top:694;left:275"><nobr><span class="ft5">) is an element of M .</span></nobr></DIV>
<DIV style="position:absolute;top:721;left:81"><nobr><span class="ft11">If the algorithm succeeds in building an independent set<br>satisfying the properties 1 and 2 , such a set can be extended<br>to a maximal one which also satisfies those properties. That<br>means that there is a repair in which</span></nobr></DIV>
<DIV style="position:absolute;top:765;left:322"><nobr><span class="ft5">¬</span></nobr></DIV>
<DIV style="position:absolute;top:773;left:341"><nobr><span class="ft1">i</span></nobr></DIV>
<DIV style="position:absolute;top:768;left:345"><nobr><span class="ft5">, and thus also</span></nobr></DIV>
<DIV style="position:absolute;top:780;left:81"><nobr><span class="ft14">¬, is true. If the algorithm does not succeed for any i,<br>i = 1, . . . , k, then true is the consistent answer to .</span></nobr></DIV>
<DIV style="position:absolute;top:815;left:94"><nobr><span class="ft5">The condition 1 is satisfied by simply including the appro-</span></nobr></DIV>
<DIV style="position:absolute;top:831;left:81"><nobr><span class="ft11">priate facts in M . The condition 2 is satisfied by excluding<br>the appropriate facts from M . A fact can be excluded if it is<br>not in (I) or if it belongs to a hyperedge whose remaining<br>elements are already in M .</span></nobr></DIV>
<DIV style="position:absolute;top:903;left:81"><nobr><span class="ft3"><b>3.2</b></span></nobr></DIV>
<DIV style="position:absolute;top:903;left:121"><nobr><span class="ft3"><b>Finding an envelope</b></span></nobr></DIV>
<DIV style="position:absolute;top:925;left:94"><nobr><span class="ft5">Any relational algebra expression E can be translated to a</span></nobr></DIV>
<DIV style="position:absolute;top:941;left:81"><nobr><span class="ft5">corresponding first-order formula </span></nobr></DIV>
<DIV style="position:absolute;top:946;left:295"><nobr><span class="ft1">E</span></nobr></DIV>
<DIV style="position:absolute;top:941;left:304"><nobr><span class="ft5">(¯</span></nobr></DIV>
<DIV style="position:absolute;top:941;left:309"><nobr><span class="ft5">x) in a standard way.</span></nobr></DIV>
<DIV style="position:absolute;top:957;left:81"><nobr><span class="ft11">Since we consider only -free algebra expressions, the for-<br>mula </span></nobr></DIV>
<DIV style="position:absolute;top:977;left:123"><nobr><span class="ft1">E</span></nobr></DIV>
<DIV style="position:absolute;top:972;left:132"><nobr><span class="ft5">(¯</span></nobr></DIV>
<DIV style="position:absolute;top:972;left:138"><nobr><span class="ft5">x) is quantifier-free. To be able to use HProver, we</span></nobr></DIV>
<DIV style="position:absolute;top:988;left:81"><nobr><span class="ft11">have to ground this formula, i.e., find an appropriate set of<br>bindings for the variables in the formula. This will be done<br>by evaluating an envelope query over the database. An enve-<br>lope query should satisfy two properties: (1) it should return<br>a superset of the set of consistent query answers for every<br>database instance, and (2) it should be easily constructible</span></nobr></DIV>
<DIV style="position:absolute;top:86;left:475"><nobr><span class="ft11">from the original query. The result of evaluating an envelope<br>query over a given database will be called an envelope.</span></nobr></DIV>
<DIV style="position:absolute;top:118;left:489"><nobr><span class="ft5">Suppose K</span></nobr></DIV>
<DIV style="position:absolute;top:122;left:554"><nobr><span class="ft1">E</span></nobr></DIV>
<DIV style="position:absolute;top:118;left:567"><nobr><span class="ft5">is an envelope query for a query E. We have</span></nobr></DIV>
<DIV style="position:absolute;top:133;left:475"><nobr><span class="ft5">that</span></nobr></DIV>
<DIV style="position:absolute;top:157;left:527"><nobr><span class="ft5">CQA</span></nobr></DIV>
<DIV style="position:absolute;top:154;left:558"><nobr><span class="ft15">E<br>C</span></nobr></DIV>
<DIV style="position:absolute;top:157;left:567"><nobr><span class="ft5">(I) = {¯</span></nobr></DIV>
<DIV style="position:absolute;top:157;left:610"><nobr><span class="ft5">t  QA</span></nobr></DIV>
<DIV style="position:absolute;top:154;left:653"><nobr><span class="ft1">K</span></nobr></DIV>
<DIV style="position:absolute;top:157;left:662"><nobr><span class="ft13">E</span></nobr></DIV>
<DIV style="position:absolute;top:157;left:672"><nobr><span class="ft5">(I) | I |=</span></nobr></DIV>
<DIV style="position:absolute;top:161;left:724"><nobr><span class="ft1">C</span></nobr></DIV>
<DIV style="position:absolute;top:157;left:738"><nobr><span class="ft5"></span></nobr></DIV>
<DIV style="position:absolute;top:161;left:747"><nobr><span class="ft1">E</span></nobr></DIV>
<DIV style="position:absolute;top:157;left:756"><nobr><span class="ft5">(¯</span></nobr></DIV>
<DIV style="position:absolute;top:157;left:761"><nobr><span class="ft5">t)}.</span></nobr></DIV>
<DIV style="position:absolute;top:180;left:475"><nobr><span class="ft11">If an expression E does not use the difference operator (and<br>thus is a monotonic expression), E itself is an envelope<br>query, as stated by the following lemma:</span></nobr></DIV>
<DIV style="position:absolute;top:236;left:490"><nobr><span class="ft5">Lemma</span></nobr></DIV>
<DIV style="position:absolute;top:234;left:543"><nobr><span class="ft5">1. For any monotonic relational expression E,</span></nobr></DIV>
<DIV style="position:absolute;top:249;left:475"><nobr><span class="ft5">the following holds:</span></nobr></DIV>
<DIV style="position:absolute;top:273;left:590"><nobr><span class="ft5">CQA</span></nobr></DIV>
<DIV style="position:absolute;top:269;left:621"><nobr><span class="ft15">E<br>C</span></nobr></DIV>
<DIV style="position:absolute;top:273;left:631"><nobr><span class="ft5">(I)  QA</span></nobr></DIV>
<DIV style="position:absolute;top:269;left:688"><nobr><span class="ft1">E</span></nobr></DIV>
<DIV style="position:absolute;top:273;left:697"><nobr><span class="ft5">(I).</span></nobr></DIV>
<DIV style="position:absolute;top:295;left:475"><nobr><span class="ft11">However when E is not monotonic, then the set of consistent<br>query answers may contain tuples not contained in QA</span></nobr></DIV>
<DIV style="position:absolute;top:308;left:803"><nobr><span class="ft1">E</span></nobr></DIV>
<DIV style="position:absolute;top:310;left:812"><nobr><span class="ft5">(I).</span></nobr></DIV>
<DIV style="position:absolute;top:326;left:475"><nobr><span class="ft5">That kind of a situation is shown in the example below.</span></nobr></DIV>
<DIV style="position:absolute;top:350;left:490"><nobr><span class="ft5">Example</span></nobr></DIV>
<DIV style="position:absolute;top:348;left:556"><nobr><span class="ft5">6. Suppose we have two relations R(A, B) and</span></nobr></DIV>
<DIV style="position:absolute;top:364;left:475"><nobr><span class="ft11">S(A, B, C, D), and we have functional dependency over R :<br>A  B. In case when I(R) = {(1, 2), (1, 3)}, and I(S) =</span></nobr></DIV>
<DIV style="position:absolute;top:392;left:475"><nobr><span class="ft5">{(1, 2, 1, 3)}, the set of answers to the query</span></nobr></DIV>
<DIV style="position:absolute;top:418;left:535"><nobr><span class="ft5">E = S \ (R(A</span></nobr></DIV>
<DIV style="position:absolute;top:421;left:618"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:418;left:625"><nobr><span class="ft5">, B</span></nobr></DIV>
<DIV style="position:absolute;top:421;left:641"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:418;left:647"><nobr><span class="ft5">)</span></nobr></DIV>
<DIV style="position:absolute;top:415;left:657"><nobr><span class="ft5"></span></nobr></DIV>
<DIV style="position:absolute;top:423;left:667"><nobr><span class="ft1">B</span></nobr></DIV>
<DIV style="position:absolute;top:424;left:675"><nobr><span class="ft13">1</span></nobr></DIV>
<DIV style="position:absolute;top:421;left:681"><nobr><span class="ft1">=B</span></nobr></DIV>
<DIV style="position:absolute;top:424;left:697"><nobr><span class="ft13">2</span></nobr></DIV>
<DIV style="position:absolute;top:418;left:708"><nobr><span class="ft5">R(A</span></nobr></DIV>
<DIV style="position:absolute;top:421;left:734"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:418;left:740"><nobr><span class="ft5">, B</span></nobr></DIV>
<DIV style="position:absolute;top:421;left:757"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:418;left:763"><nobr><span class="ft5">))</span></nobr></DIV>
<DIV style="position:absolute;top:442;left:475"><nobr><span class="ft5">is</span></nobr></DIV>
<DIV style="position:absolute;top:439;left:489"><nobr><span class="ft16">, while the set of consistent query answers is {(1, 2, 1, 3)}.<br>To obtain the expression for an envelope, we define two</span></nobr></DIV>
<DIV style="position:absolute;top:479;left:475"><nobr><span class="ft11">operators F and G by mutual recursion. The operator F<br>defines the envelope by overestimating the set of consistent<br>answers. The auxiliary operator G underestimates the set<br>of consistent answers.</span></nobr></DIV>
<DIV style="position:absolute;top:551;left:490"><nobr><span class="ft5">Definition</span></nobr></DIV>
<DIV style="position:absolute;top:548;left:569"><nobr><span class="ft5">13. We define the operators F and G recur-</span></nobr></DIV>
<DIV style="position:absolute;top:564;left:475"><nobr><span class="ft5">sively:</span></nobr></DIV>
<DIV style="position:absolute;top:588;left:601"><nobr><span class="ft5">F (R) = R,</span></nobr></DIV>
<DIV style="position:absolute;top:608;left:563"><nobr><span class="ft5">F (E</span></nobr></DIV>
<DIV style="position:absolute;top:610;left:589"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:604;left:599"><nobr><span class="ft5"> E</span></nobr></DIV>
<DIV style="position:absolute;top:610;left:621"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:608;left:627"><nobr><span class="ft5">) = F (E</span></nobr></DIV>
<DIV style="position:absolute;top:610;left:677"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:608;left:684"><nobr><span class="ft5">)</span></nobr></DIV>
<DIV style="position:absolute;top:604;left:692"><nobr><span class="ft5"> F (E</span></nobr></DIV>
<DIV style="position:absolute;top:610;left:731"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:608;left:737"><nobr><span class="ft5">),</span></nobr></DIV>
<DIV style="position:absolute;top:628;left:565"><nobr><span class="ft5">F (E</span></nobr></DIV>
<DIV style="position:absolute;top:630;left:592"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:625;left:601"><nobr><span class="ft5">\ E</span></nobr></DIV>
<DIV style="position:absolute;top:630;left:621"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:628;left:627"><nobr><span class="ft5">) = F (E</span></nobr></DIV>
<DIV style="position:absolute;top:630;left:677"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:628;left:684"><nobr><span class="ft5">)</span></nobr></DIV>
<DIV style="position:absolute;top:625;left:692"><nobr><span class="ft5">\ G(E</span></nobr></DIV>
<DIV style="position:absolute;top:630;left:728"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:628;left:735"><nobr><span class="ft5">),</span></nobr></DIV>
<DIV style="position:absolute;top:648;left:561"><nobr><span class="ft5">F (E</span></nobr></DIV>
<DIV style="position:absolute;top:651;left:588"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:645;left:597"><nobr><span class="ft5">× E</span></nobr></DIV>
<DIV style="position:absolute;top:651;left:621"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:648;left:627"><nobr><span class="ft5">) = F (E</span></nobr></DIV>
<DIV style="position:absolute;top:651;left:677"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:648;left:684"><nobr><span class="ft5">)</span></nobr></DIV>
<DIV style="position:absolute;top:645;left:692"><nobr><span class="ft5">× F (E</span></nobr></DIV>
<DIV style="position:absolute;top:651;left:732"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:648;left:738"><nobr><span class="ft5">),</span></nobr></DIV>
<DIV style="position:absolute;top:668;left:574"><nobr><span class="ft5">F (</span></nobr></DIV>
<DIV style="position:absolute;top:673;left:598"><nobr><span class="ft1"></span></nobr></DIV>
<DIV style="position:absolute;top:668;left:606"><nobr><span class="ft5">(E)) = </span></nobr></DIV>
<DIV style="position:absolute;top:673;left:659"><nobr><span class="ft1"></span></nobr></DIV>
<DIV style="position:absolute;top:668;left:667"><nobr><span class="ft5">(F (E)),</span></nobr></DIV>
<DIV style="position:absolute;top:692;left:600"><nobr><span class="ft5">G(R) = </span></nobr></DIV>
<DIV style="position:absolute;top:688;left:663"><nobr><span class="ft1">R</span></nobr></DIV>
<DIV style="position:absolute;top:697;left:663"><nobr><span class="ft1">C</span></nobr></DIV>
<DIV style="position:absolute;top:692;left:672"><nobr><span class="ft5">,</span></nobr></DIV>
<DIV style="position:absolute;top:712;left:563"><nobr><span class="ft5">G(E</span></nobr></DIV>
<DIV style="position:absolute;top:714;left:589"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:708;left:599"><nobr><span class="ft5"> E</span></nobr></DIV>
<DIV style="position:absolute;top:714;left:621"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:712;left:627"><nobr><span class="ft5">) = G(E</span></nobr></DIV>
<DIV style="position:absolute;top:714;left:677"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:712;left:684"><nobr><span class="ft5">)</span></nobr></DIV>
<DIV style="position:absolute;top:708;left:692"><nobr><span class="ft5"> G(E</span></nobr></DIV>
<DIV style="position:absolute;top:714;left:731"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:712;left:737"><nobr><span class="ft5">),</span></nobr></DIV>
<DIV style="position:absolute;top:732;left:565"><nobr><span class="ft5">G(E</span></nobr></DIV>
<DIV style="position:absolute;top:734;left:592"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:729;left:601"><nobr><span class="ft5">\ E</span></nobr></DIV>
<DIV style="position:absolute;top:734;left:621"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:732;left:627"><nobr><span class="ft5">) = G(E</span></nobr></DIV>
<DIV style="position:absolute;top:734;left:677"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:732;left:684"><nobr><span class="ft5">)</span></nobr></DIV>
<DIV style="position:absolute;top:729;left:692"><nobr><span class="ft5">\ F (E</span></nobr></DIV>
<DIV style="position:absolute;top:734;left:728"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:732;left:735"><nobr><span class="ft5">),</span></nobr></DIV>
<DIV style="position:absolute;top:752;left:561"><nobr><span class="ft5">G(E</span></nobr></DIV>
<DIV style="position:absolute;top:755;left:588"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:749;left:597"><nobr><span class="ft5">× E</span></nobr></DIV>
<DIV style="position:absolute;top:755;left:621"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:752;left:627"><nobr><span class="ft5">) = G(E</span></nobr></DIV>
<DIV style="position:absolute;top:755;left:677"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:752;left:684"><nobr><span class="ft5">)</span></nobr></DIV>
<DIV style="position:absolute;top:749;left:692"><nobr><span class="ft5">× G(E</span></nobr></DIV>
<DIV style="position:absolute;top:755;left:732"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:752;left:739"><nobr><span class="ft5">),</span></nobr></DIV>
<DIV style="position:absolute;top:772;left:574"><nobr><span class="ft5">G(</span></nobr></DIV>
<DIV style="position:absolute;top:777;left:598"><nobr><span class="ft1"></span></nobr></DIV>
<DIV style="position:absolute;top:772;left:606"><nobr><span class="ft5">(E)) = </span></nobr></DIV>
<DIV style="position:absolute;top:777;left:659"><nobr><span class="ft1"></span></nobr></DIV>
<DIV style="position:absolute;top:772;left:667"><nobr><span class="ft5">(G(E)).</span></nobr></DIV>
<DIV style="position:absolute;top:794;left:475"><nobr><span class="ft11">Because C consist only of denial constraints, Fact 2 guaran-<br>tees that the expression </span></nobr></DIV>
<DIV style="position:absolute;top:807;left:636"><nobr><span class="ft1">R</span></nobr></DIV>
<DIV style="position:absolute;top:816;left:636"><nobr><span class="ft1">C</span></nobr></DIV>
<DIV style="position:absolute;top:810;left:650"><nobr><span class="ft5">exists, and therefore the oper-</span></nobr></DIV>
<DIV style="position:absolute;top:825;left:475"><nobr><span class="ft11">ators are well defined. The pair of operators (F, G) has the<br>following properties:</span></nobr></DIV>
<DIV style="position:absolute;top:865;left:490"><nobr><span class="ft5">Lemma</span></nobr></DIV>
<DIV style="position:absolute;top:863;left:543"><nobr><span class="ft5">2. For any -free relational algebra expression E:</span></nobr></DIV>
<DIV style="position:absolute;top:888;left:536"><nobr><span class="ft5">QA</span></nobr></DIV>
<DIV style="position:absolute;top:885;left:558"><nobr><span class="ft1">G(E)</span></nobr></DIV>
<DIV style="position:absolute;top:888;left:584"><nobr><span class="ft5">(I)  QA</span></nobr></DIV>
<DIV style="position:absolute;top:885;left:641"><nobr><span class="ft1">E</span></nobr></DIV>
<DIV style="position:absolute;top:888;left:651"><nobr><span class="ft5">(I)  QA</span></nobr></DIV>
<DIV style="position:absolute;top:885;left:708"><nobr><span class="ft1">F (E)</span></nobr></DIV>
<DIV style="position:absolute;top:888;left:734"><nobr><span class="ft5">(I), and</span></nobr></DIV>
<DIV style="position:absolute;top:912;left:526"><nobr><span class="ft5">CQA</span></nobr></DIV>
<DIV style="position:absolute;top:909;left:558"><nobr><span class="ft17">G(E)<br>C</span></nobr></DIV>
<DIV style="position:absolute;top:912;left:584"><nobr><span class="ft5">(I)  CQA</span></nobr></DIV>
<DIV style="position:absolute;top:909;left:651"><nobr><span class="ft15">E<br>C</span></nobr></DIV>
<DIV style="position:absolute;top:912;left:661"><nobr><span class="ft5">(I)  CQA</span></nobr></DIV>
<DIV style="position:absolute;top:909;left:728"><nobr><span class="ft17">F (E)<br>C</span></nobr></DIV>
<DIV style="position:absolute;top:912;left:754"><nobr><span class="ft5">(I).</span></nobr></DIV>
<DIV style="position:absolute;top:939;left:490"><nobr><span class="ft5">Lemma</span></nobr></DIV>
<DIV style="position:absolute;top:936;left:543"><nobr><span class="ft5">3. For any -free relational algebra expression E:</span></nobr></DIV>
<DIV style="position:absolute;top:958;left:498"><nobr><span class="ft5">I  Rep</span></nobr></DIV>
<DIV style="position:absolute;top:968;left:558"><nobr><span class="ft1">C</span></nobr></DIV>
<DIV style="position:absolute;top:961;left:567"><nobr><span class="ft5">(I). QA</span></nobr></DIV>
<DIV style="position:absolute;top:958;left:612"><nobr><span class="ft1">G(E)</span></nobr></DIV>
<DIV style="position:absolute;top:961;left:639"><nobr><span class="ft5">(I)  QA</span></nobr></DIV>
<DIV style="position:absolute;top:958;left:696"><nobr><span class="ft1">E</span></nobr></DIV>
<DIV style="position:absolute;top:961;left:705"><nobr><span class="ft5">(I )  QA</span></nobr></DIV>
<DIV style="position:absolute;top:958;left:767"><nobr><span class="ft1">F (E)</span></nobr></DIV>
<DIV style="position:absolute;top:961;left:793"><nobr><span class="ft5">(I)</span></nobr></DIV>
<DIV style="position:absolute;top:985;left:475"><nobr><span class="ft5">With those two lemmas we can prove the following theorem.</span></nobr></DIV>
<DIV style="position:absolute;top:1009;left:490"><nobr><span class="ft5">Theorem</span></nobr></DIV>
<DIV style="position:absolute;top:1007;left:558"><nobr><span class="ft5">2. If C contains only denial constraints, then</span></nobr></DIV>
<DIV style="position:absolute;top:1022;left:475"><nobr><span class="ft11">for any -free relational algebra expression E the following<br>holds for every database instance I:</span></nobr></DIV>
<DIV style="position:absolute;top:1063;left:540"><nobr><span class="ft5">QA</span></nobr></DIV>
<DIV style="position:absolute;top:1060;left:561"><nobr><span class="ft1">G(E)</span></nobr></DIV>
<DIV style="position:absolute;top:1063;left:587"><nobr><span class="ft5">(I)  CQA</span></nobr></DIV>
<DIV style="position:absolute;top:1060;left:655"><nobr><span class="ft15">E<br>C</span></nobr></DIV>
<DIV style="position:absolute;top:1063;left:664"><nobr><span class="ft5">(I)  QA</span></nobr></DIV>
<DIV style="position:absolute;top:1060;left:721"><nobr><span class="ft1">F (E)</span></nobr></DIV>
<DIV style="position:absolute;top:1063;left:748"><nobr><span class="ft5">(I).</span></nobr></DIV>
<DIV style="position:absolute;top:1116;left:449"><nobr><span class="ft9">420</span></nobr></DIV>
</DIV>
<!-- Page 5 -->
<a name="5"></a>
<DIV style="position:relative;width:918;height:1188;">
<STYLE type="text/css">
<!--
	.ft18{font-size:8px;font-family:Times;color:#000000;}
-->
</STYLE>
<IMG width="918" height="1188" src="54005.png" alt="background image">
<DIV style="position:absolute;top:84;left:81"><nobr><span class="ft3"><b>3.3</b></span></nobr></DIV>
<DIV style="position:absolute;top:84;left:121"><nobr><span class="ft3"><b>The system Hippo</b></span></nobr></DIV>
<DIV style="position:absolute;top:106;left:94"><nobr><span class="ft5">We have implemented a system called Hippo for finding</span></nobr></DIV>
<DIV style="position:absolute;top:121;left:81"><nobr><span class="ft11">consistent answers to -free relational algebra queries. The<br>data is stored in an RDBMS (in our case, PostgreSQL).<br>The flow of data in Hippo is shown in Figure 2. The only</span></nobr></DIV>
<DIV style="position:absolute;top:212;left:212"><nobr><span class="ft18">E : , , \, ×</span></nobr></DIV>
<DIV style="position:absolute;top:257;left:155"><nobr><span class="ft18">Estimating</span></nobr></DIV>
<DIV style="position:absolute;top:302;left:142"><nobr><span class="ft18">F (E) : , , ×, \</span></nobr></DIV>
<DIV style="position:absolute;top:349;left:156"><nobr><span class="ft18">Evaluation</span></nobr></DIV>
<DIV style="position:absolute;top:393;left:123"><nobr><span class="ft18">Conflict Detection</span></nobr></DIV>
<DIV style="position:absolute;top:364;left:100"><nobr><span class="ft18">DB</span></nobr></DIV>
<DIV style="position:absolute;top:258;left:275"><nobr><span class="ft18">Translation</span></nobr></DIV>
<DIV style="position:absolute;top:302;left:274"><nobr><span class="ft18"></span></nobr></DIV>
<DIV style="position:absolute;top:305;left:282"><nobr><span class="ft13">E</span></nobr></DIV>
<DIV style="position:absolute;top:302;left:294"><nobr><span class="ft18">:</span></nobr></DIV>
<DIV style="position:absolute;top:299;left:301"><nobr><span class="ft18">, , ¬</span></nobr></DIV>
<DIV style="position:absolute;top:348;left:274"><nobr><span class="ft18">Envelope</span></nobr></DIV>
<DIV style="position:absolute;top:393;left:245"><nobr><span class="ft18">Conflict Hypergraph</span></nobr></DIV>
<DIV style="position:absolute;top:348;left:368"><nobr><span class="ft18">Grounding</span></nobr></DIV>
<DIV style="position:absolute;top:394;left:374"><nobr><span class="ft18">HProver</span></nobr></DIV>
<DIV style="position:absolute;top:454;left:366"><nobr><span class="ft18">Answer Set</span></nobr></DIV>
<DIV style="position:absolute;top:439;left:247"><nobr><span class="ft18">IC</span></nobr></DIV>
<DIV style="position:absolute;top:523;left:158"><nobr><span class="ft5">Figure 2: Data flow in Hippo</span></nobr></DIV>
<DIV style="position:absolute;top:556;left:81"><nobr><span class="ft11">output of this system is the Answer Set consisting of the<br>consistent answers to the input query E with respect to<br>a set of integrity constraints IC in the database instance<br>DB. Before processing any input query, the system performs<br>Conflict Detection, and creates the Conflict Hypergraph. We<br>assume that the number of conflicts is small enough to allow<br>us to store the hypergraph in main memory. We keep in<br>main memory only the set of hyperedges corresponding to<br>conflicts in database. The set of all the vertices represents<br>the entire contents of the database and thus may be too big<br>to fit in main memory. In this way, we guarantee that our<br>approach is scalable.</span></nobr></DIV>
<DIV style="position:absolute;top:744;left:94"><nobr><span class="ft5">The processing of a query E consists of Estimating it to an</span></nobr></DIV>
<DIV style="position:absolute;top:760;left:81"><nobr><span class="ft11">envelope query F (E) that after Evaluation b y an RDBMS<br>gives us the Envelope. Also, the system performs Transla-<br>tion of the input query E to a corresponding first-order logic<br>formula </span></nobr></DIV>
<DIV style="position:absolute;top:811;left:142"><nobr><span class="ft1">E</span></nobr></DIV>
<DIV style="position:absolute;top:807;left:152"><nobr><span class="ft5">. Now, for every tuple from the Envelope we</span></nobr></DIV>
<DIV style="position:absolute;top:823;left:81"><nobr><span class="ft5">perform Grounding of </span></nobr></DIV>
<DIV style="position:absolute;top:827;left:226"><nobr><span class="ft1">E</span></nobr></DIV>
<DIV style="position:absolute;top:823;left:235"><nobr><span class="ft5">. Having now a first-order ground</span></nobr></DIV>
<DIV style="position:absolute;top:838;left:81"><nobr><span class="ft11">query we can check if true is the consistent answer to this<br>query using HProver. Depending on the result of this check<br>we return the tuple or not. It's important to notice here that<br>because the hypergraph is stored in main memory, HProver<br>doesn't need any immediate knowledge of the integrity con-<br>straints (no arrow from IC to HProver). This is because<br>in HProver the independence of constructed sets B is being<br>checked only for sets of vertices that are contained in the<br>database, and if such vertices are in any conflict, it is regis-<br>tered in the hypergraph. HProver makes, however, database<br>accesses to check tuple membership in database relations.</span></nobr></DIV>
<DIV style="position:absolute;top:1029;left:81"><nobr><span class="ft3"><b>4.</b></span></nobr></DIV>
<DIV style="position:absolute;top:1029;left:112"><nobr><span class="ft3"><b>OPTIMIZATIONS</b></span></nobr></DIV>
<DIV style="position:absolute;top:1051;left:94"><nobr><span class="ft5">The previous section showed how to build a system for</span></nobr></DIV>
<DIV style="position:absolute;top:1067;left:81"><nobr><span class="ft5">computing consistent query answers. But even though we</span></nobr></DIV>
<DIV style="position:absolute;top:86;left:475"><nobr><span class="ft11">have decided to store the conflict hypergraph in main mem-<br>ory, we still have to perform tuple membership checks (steps<br>4 and 8 in the HProver algorithm). To check if a tuple is<br>present in a given table, we execute a simple membership<br>query. For every tuple from the envelope we have to per-<br>form several tuple checks (depending on the complexity of<br>the query). Executing any query is usually a costly opera-<br>tion in the database context. Therefore tuple membership<br>checks are a significant factor in the algorithm execution<br>time.</span></nobr></DIV>
<DIV style="position:absolute;top:243;left:489"><nobr><span class="ft5">In this section we address the problem of eliminating tuple</span></nobr></DIV>
<DIV style="position:absolute;top:259;left:475"><nobr><span class="ft5">membership checks. We propose two improvements:</span></nobr></DIV>
<DIV style="position:absolute;top:288;left:491"><nobr><span class="ft5">1. The first infers information about the tuples present</span></nobr></DIV>
<DIV style="position:absolute;top:303;left:509"><nobr><span class="ft11">in the database from the current envelope tuple. That<br>makes it possible to answer some tuple checks without<br>interrogating the database.</span></nobr></DIV>
<DIV style="position:absolute;top:358;left:491"><nobr><span class="ft5">2. The second supplements the first by extending the en-</span></nobr></DIV>
<DIV style="position:absolute;top:374;left:509"><nobr><span class="ft11">velope expression so that we can find the results of all<br>relevant tuple checks without executing any member-<br>ship query.</span></nobr></DIV>
<DIV style="position:absolute;top:432;left:475"><nobr><span class="ft3"><b>4.1</b></span></nobr></DIV>
<DIV style="position:absolute;top:432;left:516"><nobr><span class="ft3"><b>Knowledge gathering</b></span></nobr></DIV>
<DIV style="position:absolute;top:454;left:489"><nobr><span class="ft5">In this section we address the problem of answering tuple</span></nobr></DIV>
<DIV style="position:absolute;top:470;left:475"><nobr><span class="ft5">checks.</span></nobr></DIV>
<DIV style="position:absolute;top:501;left:490"><nobr><span class="ft5">Definition 14</span></nobr></DIV>
<DIV style="position:absolute;top:501;left:599"><nobr><span class="ft5">(Relevant facts).</span></nobr></DIV>
<DIV style="position:absolute;top:499;left:727"><nobr><span class="ft5">For a given -free</span></nobr></DIV>
<DIV style="position:absolute;top:515;left:475"><nobr><span class="ft11">expression E and a tuple t compatible with E, the set<br>TC(E, t) of relevant facts is defined recursively:</span></nobr></DIV>
<DIV style="position:absolute;top:557;left:582"><nobr><span class="ft5">TC(R, t) = {R(t)},</span></nobr></DIV>
<DIV style="position:absolute;top:577;left:544"><nobr><span class="ft5">TC(E</span></nobr></DIV>
<DIV style="position:absolute;top:580;left:580"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:574;left:589"><nobr><span class="ft5"> E</span></nobr></DIV>
<DIV style="position:absolute;top:580;left:611"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:577;left:618"><nobr><span class="ft5">, t) = TC(E</span></nobr></DIV>
<DIV style="position:absolute;top:580;left:688"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:577;left:694"><nobr><span class="ft5">, t)  TC(E</span></nobr></DIV>
<DIV style="position:absolute;top:580;left:762"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:577;left:768"><nobr><span class="ft5">, t),</span></nobr></DIV>
<DIV style="position:absolute;top:598;left:546"><nobr><span class="ft5">TC(E</span></nobr></DIV>
<DIV style="position:absolute;top:600;left:582"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:594;left:591"><nobr><span class="ft5">\ E</span></nobr></DIV>
<DIV style="position:absolute;top:600;left:611"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:598;left:618"><nobr><span class="ft5">, t) = TC(E</span></nobr></DIV>
<DIV style="position:absolute;top:600;left:688"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:598;left:694"><nobr><span class="ft5">, t)  TC(E</span></nobr></DIV>
<DIV style="position:absolute;top:600;left:762"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:598;left:768"><nobr><span class="ft5">, t),</span></nobr></DIV>
<DIV style="position:absolute;top:618;left:508"><nobr><span class="ft5">TC(E</span></nobr></DIV>
<DIV style="position:absolute;top:620;left:544"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:614;left:553"><nobr><span class="ft5">× E</span></nobr></DIV>
<DIV style="position:absolute;top:620;left:577"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:618;left:583"><nobr><span class="ft5">, (t</span></nobr></DIV>
<DIV style="position:absolute;top:620;left:600"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:618;left:606"><nobr><span class="ft5">, t</span></nobr></DIV>
<DIV style="position:absolute;top:620;left:617"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:618;left:623"><nobr><span class="ft5">)) = TC(E</span></nobr></DIV>
<DIV style="position:absolute;top:620;left:688"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:618;left:694"><nobr><span class="ft5">, t</span></nobr></DIV>
<DIV style="position:absolute;top:620;left:706"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:618;left:712"><nobr><span class="ft5">)</span></nobr></DIV>
<DIV style="position:absolute;top:614;left:720"><nobr><span class="ft5"> TC(E</span></nobr></DIV>
<DIV style="position:absolute;top:620;left:768"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:618;left:774"><nobr><span class="ft5">, t</span></nobr></DIV>
<DIV style="position:absolute;top:620;left:785"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:618;left:792"><nobr><span class="ft5">),</span></nobr></DIV>
<DIV style="position:absolute;top:638;left:555"><nobr><span class="ft5">TC(</span></nobr></DIV>
<DIV style="position:absolute;top:643;left:588"><nobr><span class="ft1"></span></nobr></DIV>
<DIV style="position:absolute;top:638;left:596"><nobr><span class="ft5">(E), t) = TC(E, t).</span></nobr></DIV>
<DIV style="position:absolute;top:667;left:475"><nobr><span class="ft11">The set of facts TC(E, t) consists of all facts that HProver<br>may need when working with the query </span></nobr></DIV>
<DIV style="position:absolute;top:687;left:735"><nobr><span class="ft1">E</span></nobr></DIV>
<DIV style="position:absolute;top:682;left:744"><nobr><span class="ft5">(t) (we conjec-</span></nobr></DIV>
<DIV style="position:absolute;top:698;left:475"><nobr><span class="ft11">ture that the same set of facts will be needed by any prac-<br>tical checker of consistent query answers for quantifier-free<br>queries). In the following example we show that the tuple t<br>itself may carry information that can be used to derive some<br>relevant facts.</span></nobr></DIV>
<DIV style="position:absolute;top:792;left:490"><nobr><span class="ft5">Example</span></nobr></DIV>
<DIV style="position:absolute;top:789;left:556"><nobr><span class="ft5">7. Recall that relation attributes are named by</span></nobr></DIV>
<DIV style="position:absolute;top:805;left:475"><nobr><span class="ft11">natural numbers. Assume that we have two tables R(1, 2),<br>P (1, 2) and a query E = F (E) = </span></nobr></DIV>
<DIV style="position:absolute;top:823;left:681"><nobr><span class="ft1">1=a</span></nobr></DIV>
<DIV style="position:absolute;top:821;left:702"><nobr><span class="ft5">(R×(RP )). Suppose</span></nobr></DIV>
<DIV style="position:absolute;top:837;left:475"><nobr><span class="ft11">that a tuple t = (a, b, c, d) is the only result of the evaluation<br>of F (E) in a database instance I. The set of relevant facts<br>is TC(E, t) = {R(a, b), R(c, d), P (c, d)}. A natural conse-<br>quence of the semantics of relational algebra expressions is<br>that t  QA</span></nobr></DIV>
<DIV style="position:absolute;top:897;left:547"><nobr><span class="ft1"></span></nobr></DIV>
<DIV style="position:absolute;top:898;left:553"><nobr><span class="ft13">1=a</span></nobr></DIV>
<DIV style="position:absolute;top:895;left:572"><nobr><span class="ft1">(R×(RP ))</span></nobr></DIV>
<DIV style="position:absolute;top:899;left:632"><nobr><span class="ft5">(I) implies (a, b)  I(R). We can</span></nobr></DIV>
<DIV style="position:absolute;top:915;left:475"><nobr><span class="ft11">use this information to avoid performing some membership<br>queries. At the same time the tuple t itself doesn't carry<br>enough information to decide whether (c, d) belongs to ei-<br>ther I(R), I(P ), or both of them.</span></nobr></DIV>
<DIV style="position:absolute;top:991;left:475"><nobr><span class="ft11">We call the process of inferring the information from result<br>of the evaluation of a query knowledge gathering. Formally,<br>we define the set of derived facts in the following way:</span></nobr></DIV>
<DIV style="position:absolute;top:1053;left:490"><nobr><span class="ft5">Definition 15</span></nobr></DIV>
<DIV style="position:absolute;top:1053;left:599"><nobr><span class="ft5">(Knowledge gathering).</span></nobr></DIV>
<DIV style="position:absolute;top:1051;left:773"><nobr><span class="ft5">For</span></nobr></DIV>
<DIV style="position:absolute;top:1051;left:827"><nobr><span class="ft5">a</span></nobr></DIV>
<DIV style="position:absolute;top:1067;left:475"><nobr><span class="ft5">given -free expression E and a tuple t compatible with E</span></nobr></DIV>
<DIV style="position:absolute;top:1116;left:449"><nobr><span class="ft9">421</span></nobr></DIV>
</DIV>
<!-- Page 6 -->
<a name="6"></a>
<DIV style="position:relative;width:918;height:1188;">
<STYLE type="text/css">
<!--
	.ft19{font-size:23px;font-family:Times;color:#000000;}
	.ft20{font-size:5px;line-height:10px;font-family:Times;color:#000000;}
	.ft21{font-size:11px;line-height:17px;font-family:Times;color:#000000;}
-->
</STYLE>
<IMG width="918" height="1188" src="54006.png" alt="background image">
<DIV style="position:absolute;top:86;left:81"><nobr><span class="ft5">we define the set KG recursively:</span></nobr></DIV>
<DIV style="position:absolute;top:111;left:185"><nobr><span class="ft5">KG(R, t) = {R(t)},</span></nobr></DIV>
<DIV style="position:absolute;top:131;left:148"><nobr><span class="ft5">KG(E</span></nobr></DIV>
<DIV style="position:absolute;top:134;left:185"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:128;left:194"><nobr><span class="ft5"> E</span></nobr></DIV>
<DIV style="position:absolute;top:134;left:216"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:131;left:223"><nobr><span class="ft5">, t) = KG(E</span></nobr></DIV>
<DIV style="position:absolute;top:134;left:294"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:131;left:300"><nobr><span class="ft5">, t)  KG(E</span></nobr></DIV>
<DIV style="position:absolute;top:134;left:369"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:131;left:375"><nobr><span class="ft5">, t),</span></nobr></DIV>
<DIV style="position:absolute;top:151;left:150"><nobr><span class="ft5">KG(E</span></nobr></DIV>
<DIV style="position:absolute;top:154;left:187"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:148;left:196"><nobr><span class="ft5">\ E</span></nobr></DIV>
<DIV style="position:absolute;top:154;left:216"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:151;left:223"><nobr><span class="ft5">, t) = KG(E</span></nobr></DIV>
<DIV style="position:absolute;top:154;left:294"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:151;left:300"><nobr><span class="ft5">, t),</span></nobr></DIV>
<DIV style="position:absolute;top:171;left:159"><nobr><span class="ft5">KG(</span></nobr></DIV>
<DIV style="position:absolute;top:176;left:193"><nobr><span class="ft1"></span></nobr></DIV>
<DIV style="position:absolute;top:171;left:201"><nobr><span class="ft5">(E), t) = KG(E, t),</span></nobr></DIV>
<DIV style="position:absolute;top:192;left:112"><nobr><span class="ft5">KG(E</span></nobr></DIV>
<DIV style="position:absolute;top:194;left:149"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:188;left:158"><nobr><span class="ft5">× E</span></nobr></DIV>
<DIV style="position:absolute;top:194;left:182"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:192;left:188"><nobr><span class="ft5">, (t</span></nobr></DIV>
<DIV style="position:absolute;top:194;left:205"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:192;left:211"><nobr><span class="ft5">, t</span></nobr></DIV>
<DIV style="position:absolute;top:194;left:222"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:192;left:228"><nobr><span class="ft5">)) = KG(E</span></nobr></DIV>
<DIV style="position:absolute;top:194;left:294"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:192;left:300"><nobr><span class="ft5">, t</span></nobr></DIV>
<DIV style="position:absolute;top:194;left:312"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:192;left:318"><nobr><span class="ft5">)</span></nobr></DIV>
<DIV style="position:absolute;top:188;left:326"><nobr><span class="ft5"> KG(E</span></nobr></DIV>
<DIV style="position:absolute;top:194;left:375"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:192;left:382"><nobr><span class="ft5">, t</span></nobr></DIV>
<DIV style="position:absolute;top:194;left:393"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:192;left:399"><nobr><span class="ft5">).</span></nobr></DIV>
<DIV style="position:absolute;top:218;left:81"><nobr><span class="ft11">We note here that the cardinality of the set of facts inferred<br>with KG is linear in the size of the query and doesn't depend<br>on the value of the tuple t. Now we state the main property<br>of KG.</span></nobr></DIV>
<DIV style="position:absolute;top:294;left:96"><nobr><span class="ft5">Theorem 3</span></nobr></DIV>
<DIV style="position:absolute;top:294;left:186"><nobr><span class="ft5">(Soundness of KG).</span></nobr></DIV>
<DIV style="position:absolute;top:292;left:327"><nobr><span class="ft5">Given a database</span></nobr></DIV>
<DIV style="position:absolute;top:307;left:81"><nobr><span class="ft5">instance I and a -free expression E</span></nobr></DIV>
<DIV style="position:absolute;top:335;left:96"><nobr><span class="ft5">t  QA</span></nobr></DIV>
<DIV style="position:absolute;top:335;left:146"><nobr><span class="ft1">F (E)</span></nobr></DIV>
<DIV style="position:absolute;top:338;left:173"><nobr><span class="ft5">(I).R(t )  TC(E, t).</span></nobr></DIV>
<DIV style="position:absolute;top:360;left:240"><nobr><span class="ft5">R(t )</span></nobr></DIV>
<DIV style="position:absolute;top:357;left:275"><nobr><span class="ft5"> KG(E, t)  I |= R(t ).</span></nobr></DIV>
<DIV style="position:absolute;top:387;left:81"><nobr><span class="ft5">Knowledge gathering is also complete in the case of</span></nobr></DIV>
<DIV style="position:absolute;top:383;left:396"><nobr><span class="ft5">{, ×}-</span></nobr></DIV>
<DIV style="position:absolute;top:402;left:81"><nobr><span class="ft11">expressions, i.e. it derives all relevant facts that hold in the<br>database I.</span></nobr></DIV>
<DIV style="position:absolute;top:447;left:96"><nobr><span class="ft5">Theorem 4</span></nobr></DIV>
<DIV style="position:absolute;top:447;left:186"><nobr><span class="ft5">(Completeness of KG for</span></nobr></DIV>
<DIV style="position:absolute;top:441;left:369"><nobr><span class="ft5">{, ×}).</span></nobr></DIV>
<DIV style="position:absolute;top:460;left:81"><nobr><span class="ft5">Given a database I and any {, ×}-query E.</span></nobr></DIV>
<DIV style="position:absolute;top:488;left:96"><nobr><span class="ft5">t  QA</span></nobr></DIV>
<DIV style="position:absolute;top:488;left:146"><nobr><span class="ft1">F (E)</span></nobr></DIV>
<DIV style="position:absolute;top:492;left:173"><nobr><span class="ft5">(I).R(t )  TC(E, t).</span></nobr></DIV>
<DIV style="position:absolute;top:514;left:240"><nobr><span class="ft5">I |= R(t )</span></nobr></DIV>
<DIV style="position:absolute;top:510;left:302"><nobr><span class="ft5"> R(t )  KG(E, t).</span></nobr></DIV>
<DIV style="position:absolute;top:542;left:81"><nobr><span class="ft3"><b>4.2</b></span></nobr></DIV>
<DIV style="position:absolute;top:542;left:121"><nobr><span class="ft3"><b>Extended knowledge gathering</b></span></nobr></DIV>
<DIV style="position:absolute;top:564;left:94"><nobr><span class="ft5">In general, when the expression translates to a disjunctive</span></nobr></DIV>
<DIV style="position:absolute;top:579;left:81"><nobr><span class="ft11">query we need to extend the query so that the resulting tuple<br>carries some additional information allowing us to derive all<br>relevant facts. The extended approach described in detail<br>below is illustrated first by the following example.</span></nobr></DIV>
<DIV style="position:absolute;top:655;left:96"><nobr><span class="ft5">Example</span></nobr></DIV>
<DIV style="position:absolute;top:653;left:162"><nobr><span class="ft5">8. For the previously considered expression</span></nobr></DIV>
<DIV style="position:absolute;top:668;left:81"><nobr><span class="ft5">E = </span></nobr></DIV>
<DIV style="position:absolute;top:671;left:122"><nobr><span class="ft1">1=a</span></nobr></DIV>
<DIV style="position:absolute;top:668;left:143"><nobr><span class="ft5">(R × (R  P )) the extended approach constructs</span></nobr></DIV>
<DIV style="position:absolute;top:689;left:81"><nobr><span class="ft5">the expression </span></nobr></DIV>
<DIV style="position:absolute;top:691;left:182"><nobr><span class="ft1">1=a</span></nobr></DIV>
<DIV style="position:absolute;top:689;left:203"><nobr><span class="ft5">(R × (R  P ))</span></nobr></DIV>
<DIV style="position:absolute;top:682;left:308"><nobr><span class="ft1">3,4</span></nobr></DIV>
<DIV style="position:absolute;top:686;left:302"><nobr><span class="ft5">-- R</span></nobr></DIV>
<DIV style="position:absolute;top:682;left:357"><nobr><span class="ft1">3,4</span></nobr></DIV>
<DIV style="position:absolute;top:686;left:352"><nobr><span class="ft5">-- P , where</span></nobr></DIV>
<DIV style="position:absolute;top:701;left:81"><nobr><span class="ft5"> is the left outer join operator</span></nobr></DIV>
<DIV style="position:absolute;top:700;left:283"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:705;left:290"><nobr><span class="ft5">. Suppose now, I(R) =</span></nobr></DIV>
<DIV style="position:absolute;top:717;left:81"><nobr><span class="ft14">{(a, b), (e, f)} and I(P ) = {(c, d), (e, f)}. Then the evalua-<br>tion of the extended envelope expression yields the following:</span></nobr></DIV>
<DIV style="position:absolute;top:767;left:161"><nobr><span class="ft5"></span></nobr></DIV>
<DIV style="position:absolute;top:769;left:169"><nobr><span class="ft1">1=a</span></nobr></DIV>
<DIV style="position:absolute;top:767;left:190"><nobr><span class="ft5">(R × (R  P ))</span></nobr></DIV>
<DIV style="position:absolute;top:760;left:285"><nobr><span class="ft1">3,4</span></nobr></DIV>
<DIV style="position:absolute;top:764;left:279"><nobr><span class="ft5">-- R</span></nobr></DIV>
<DIV style="position:absolute;top:760;left:326"><nobr><span class="ft1">3,4</span></nobr></DIV>
<DIV style="position:absolute;top:764;left:321"><nobr><span class="ft5">-- P</span></nobr></DIV>
<DIV style="position:absolute;top:783;left:161"><nobr><span class="ft5">a</span></nobr></DIV>
<DIV style="position:absolute;top:783;left:185"><nobr><span class="ft5">b</span></nobr></DIV>
<DIV style="position:absolute;top:783;left:207"><nobr><span class="ft5">a</span></nobr></DIV>
<DIV style="position:absolute;top:783;left:230"><nobr><span class="ft5">b</span></nobr></DIV>
<DIV style="position:absolute;top:783;left:255"><nobr><span class="ft5">a</span></nobr></DIV>
<DIV style="position:absolute;top:783;left:282"><nobr><span class="ft5">b</span></nobr></DIV>
<DIV style="position:absolute;top:780;left:308"><nobr><span class="ft5"> </span></nobr></DIV>
<DIV style="position:absolute;top:799;left:161"><nobr><span class="ft5">a</span></nobr></DIV>
<DIV style="position:absolute;top:799;left:185"><nobr><span class="ft5">b</span></nobr></DIV>
<DIV style="position:absolute;top:799;left:207"><nobr><span class="ft5">c</span></nobr></DIV>
<DIV style="position:absolute;top:799;left:230"><nobr><span class="ft5">d</span></nobr></DIV>
<DIV style="position:absolute;top:796;left:255"><nobr><span class="ft5">  c</span></nobr></DIV>
<DIV style="position:absolute;top:799;left:335"><nobr><span class="ft5">d</span></nobr></DIV>
<DIV style="position:absolute;top:815;left:161"><nobr><span class="ft5">a</span></nobr></DIV>
<DIV style="position:absolute;top:815;left:185"><nobr><span class="ft5">b</span></nobr></DIV>
<DIV style="position:absolute;top:815;left:207"><nobr><span class="ft5">e</span></nobr></DIV>
<DIV style="position:absolute;top:815;left:230"><nobr><span class="ft5">f</span></nobr></DIV>
<DIV style="position:absolute;top:815;left:255"><nobr><span class="ft5">e</span></nobr></DIV>
<DIV style="position:absolute;top:815;left:282"><nobr><span class="ft5">f</span></nobr></DIV>
<DIV style="position:absolute;top:815;left:308"><nobr><span class="ft5">e</span></nobr></DIV>
<DIV style="position:absolute;top:815;left:335"><nobr><span class="ft5">f</span></nobr></DIV>
<DIV style="position:absolute;top:842;left:81"><nobr><span class="ft11">Now, consider the tuple (a, b, c, d, , , c, d). We can de-<br>compose it into two parts (a, b, c, d) and (, , c, d). The<br>first part is simply the tuple from the envelope F (E), and<br>it can be used to infer the fact R(a, b). The second part al-<br>lows us to make two other important inferences. Namely,<br>(c, d)  I(R) and (c, d)  I(P ).</span></nobr></DIV>
<DIV style="position:absolute;top:947;left:94"><nobr><span class="ft5">Our goal is to minimally extend the expression so that we</span></nobr></DIV>
<DIV style="position:absolute;top:963;left:81"><nobr><span class="ft11">can derive all relevant facts. In order to find what informa-<br>tion is not guaranteed to be gathered from evaluation of the<br>envelope expression, we generalize the definitions of KG and<br>TC to non-ground tuples consisting of distinct variables.</span></nobr></DIV>
<DIV style="position:absolute;top:1029;left:81"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:1033;left:88"><nobr><span class="ft5">For clarity we simplify the notion of the outer join condi-</span></nobr></DIV>
<DIV style="position:absolute;top:1053;left:81"><nobr><span class="ft5">tion. When writing S</span></nobr></DIV>
<DIV style="position:absolute;top:1046;left:220"><nobr><span class="ft1">3,4</span></nobr></DIV>
<DIV style="position:absolute;top:1050;left:214"><nobr><span class="ft5">-- T we mean S</span></nobr></DIV>
<DIV style="position:absolute;top:1049;left:330"><nobr><span class="ft1">S.3=T.1S.4=T.2</span></nobr></DIV>
<DIV style="position:absolute;top:1050;left:325"><nobr><span class="ft5">----------- T ,</span></nobr></DIV>
<DIV style="position:absolute;top:1067;left:81"><nobr><span class="ft5">and we assume the left join operator is left associative</span></nobr></DIV>
<DIV style="position:absolute;top:89;left:490"><nobr><span class="ft5">Definition 16</span></nobr></DIV>
<DIV style="position:absolute;top:89;left:599"><nobr><span class="ft5">(Complementary set).</span></nobr></DIV>
<DIV style="position:absolute;top:86;left:756"><nobr><span class="ft5">For a given</span></nobr></DIV>
<DIV style="position:absolute;top:102;left:475"><nobr><span class="ft11">-free expression E, the complementary set (E) is defined<br>as follows:</span></nobr></DIV>
<DIV style="position:absolute;top:143;left:565"><nobr><span class="ft5">(E) = TC(E, ¯</span></nobr></DIV>
<DIV style="position:absolute;top:143;left:657"><nobr><span class="ft5">x) \ KG(E, ¯</span></nobr></DIV>
<DIV style="position:absolute;top:143;left:727"><nobr><span class="ft5">x),</span></nobr></DIV>
<DIV style="position:absolute;top:168;left:475"><nobr><span class="ft5">where ¯</span></nobr></DIV>
<DIV style="position:absolute;top:168;left:514"><nobr><span class="ft5">x = (x</span></nobr></DIV>
<DIV style="position:absolute;top:170;left:554"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:168;left:560"><nobr><span class="ft5">, . . . , x</span></nobr></DIV>
<DIV style="position:absolute;top:171;left:598"><nobr><span class="ft1">|E|</span></nobr></DIV>
<DIV style="position:absolute;top:168;left:615"><nobr><span class="ft5">).</span></nobr></DIV>
<DIV style="position:absolute;top:200;left:490"><nobr><span class="ft5">Example</span></nobr></DIV>
<DIV style="position:absolute;top:198;left:556"><nobr><span class="ft5">9. Taking again under consideration the ex-</span></nobr></DIV>
<DIV style="position:absolute;top:214;left:475"><nobr><span class="ft5">pression E = </span></nobr></DIV>
<DIV style="position:absolute;top:216;left:571"><nobr><span class="ft1">1=a</span></nobr></DIV>
<DIV style="position:absolute;top:214;left:591"><nobr><span class="ft5">(R × (R  P )) and ¯</span></nobr></DIV>
<DIV style="position:absolute;top:214;left:713"><nobr><span class="ft5">x = (x</span></nobr></DIV>
<DIV style="position:absolute;top:216;left:756"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:214;left:762"><nobr><span class="ft5">, . . . , x</span></nobr></DIV>
<DIV style="position:absolute;top:216;left:801"><nobr><span class="ft1">4</span></nobr></DIV>
<DIV style="position:absolute;top:214;left:807"><nobr><span class="ft5">) we</span></nobr></DIV>
<DIV style="position:absolute;top:229;left:475"><nobr><span class="ft5">have:</span></nobr></DIV>
<DIV style="position:absolute;top:254;left:520"><nobr><span class="ft5">TC(E, ¯</span></nobr></DIV>
<DIV style="position:absolute;top:254;left:562"><nobr><span class="ft5">x) = {R(x</span></nobr></DIV>
<DIV style="position:absolute;top:257;left:624"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:254;left:631"><nobr><span class="ft5">, x</span></nobr></DIV>
<DIV style="position:absolute;top:257;left:645"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:254;left:651"><nobr><span class="ft5">), P (x</span></nobr></DIV>
<DIV style="position:absolute;top:257;left:686"><nobr><span class="ft1">3</span></nobr></DIV>
<DIV style="position:absolute;top:254;left:693"><nobr><span class="ft5">, x</span></nobr></DIV>
<DIV style="position:absolute;top:257;left:707"><nobr><span class="ft1">4</span></nobr></DIV>
<DIV style="position:absolute;top:254;left:713"><nobr><span class="ft5">), R(x</span></nobr></DIV>
<DIV style="position:absolute;top:257;left:748"><nobr><span class="ft1">3</span></nobr></DIV>
<DIV style="position:absolute;top:254;left:754"><nobr><span class="ft5">, x</span></nobr></DIV>
<DIV style="position:absolute;top:257;left:768"><nobr><span class="ft1">4</span></nobr></DIV>
<DIV style="position:absolute;top:254;left:775"><nobr><span class="ft5">)</span></nobr></DIV>
<DIV style="position:absolute;top:251;left:780"><nobr><span class="ft5">},</span></nobr></DIV>
<DIV style="position:absolute;top:274;left:518"><nobr><span class="ft5">KG(E, ¯</span></nobr></DIV>
<DIV style="position:absolute;top:274;left:562"><nobr><span class="ft5">x) = {R(x</span></nobr></DIV>
<DIV style="position:absolute;top:277;left:624"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:274;left:631"><nobr><span class="ft5">, x</span></nobr></DIV>
<DIV style="position:absolute;top:277;left:645"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:274;left:651"><nobr><span class="ft5">)</span></nobr></DIV>
<DIV style="position:absolute;top:271;left:656"><nobr><span class="ft5">}.</span></nobr></DIV>
<DIV style="position:absolute;top:300;left:475"><nobr><span class="ft5">R(x</span></nobr></DIV>
<DIV style="position:absolute;top:302;left:499"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:300;left:505"><nobr><span class="ft5">, x</span></nobr></DIV>
<DIV style="position:absolute;top:302;left:519"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:300;left:525"><nobr><span class="ft5">)</span></nobr></DIV>
<DIV style="position:absolute;top:296;left:537"><nobr><span class="ft5"> TC(E) means that for any tuple (t</span></nobr></DIV>
<DIV style="position:absolute;top:302;left:770"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:300;left:776"><nobr><span class="ft5">, t</span></nobr></DIV>
<DIV style="position:absolute;top:302;left:788"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:300;left:794"><nobr><span class="ft5">, t</span></nobr></DIV>
<DIV style="position:absolute;top:302;left:805"><nobr><span class="ft1">3</span></nobr></DIV>
<DIV style="position:absolute;top:300;left:811"><nobr><span class="ft5">, t</span></nobr></DIV>
<DIV style="position:absolute;top:302;left:822"><nobr><span class="ft1">4</span></nobr></DIV>
<DIV style="position:absolute;top:300;left:828"><nobr><span class="ft5">)</span></nobr></DIV>
<DIV style="position:absolute;top:315;left:475"><nobr><span class="ft11">from the evaluation of the envelope expression for E,<br>HProver may perform the tuple check R(t</span></nobr></DIV>
<DIV style="position:absolute;top:333;left:736"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:331;left:742"><nobr><span class="ft5">, t</span></nobr></DIV>
<DIV style="position:absolute;top:333;left:753"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:331;left:760"><nobr><span class="ft5">). We have</span></nobr></DIV>
<DIV style="position:absolute;top:347;left:475"><nobr><span class="ft5">also R(x</span></nobr></DIV>
<DIV style="position:absolute;top:349;left:529"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:347;left:535"><nobr><span class="ft5">, x</span></nobr></DIV>
<DIV style="position:absolute;top:349;left:549"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:347;left:555"><nobr><span class="ft5">)</span></nobr></DIV>
<DIV style="position:absolute;top:343;left:567"><nobr><span class="ft5"> KG(E) and therefore we are able to an-</span></nobr></DIV>
<DIV style="position:absolute;top:362;left:475"><nobr><span class="ft11">swer this check using knowledge gathering. On the other<br>hand R(x</span></nobr></DIV>
<DIV style="position:absolute;top:380;left:533"><nobr><span class="ft1">3</span></nobr></DIV>
<DIV style="position:absolute;top:378;left:540"><nobr><span class="ft5">, x</span></nobr></DIV>
<DIV style="position:absolute;top:380;left:553"><nobr><span class="ft1">4</span></nobr></DIV>
<DIV style="position:absolute;top:378;left:560"><nobr><span class="ft5">)</span></nobr></DIV>
<DIV style="position:absolute;top:375;left:570"><nobr><span class="ft5"> TC(E) means that for HProver may per-</span></nobr></DIV>
<DIV style="position:absolute;top:394;left:475"><nobr><span class="ft5">form a tuple check R(t</span></nobr></DIV>
<DIV style="position:absolute;top:396;left:625"><nobr><span class="ft1">3</span></nobr></DIV>
<DIV style="position:absolute;top:394;left:631"><nobr><span class="ft5">, t</span></nobr></DIV>
<DIV style="position:absolute;top:396;left:642"><nobr><span class="ft1">4</span></nobr></DIV>
<DIV style="position:absolute;top:394;left:649"><nobr><span class="ft5">).</span></nobr></DIV>
<DIV style="position:absolute;top:394;left:674"><nobr><span class="ft5">Since we don't have that</span></nobr></DIV>
<DIV style="position:absolute;top:409;left:475"><nobr><span class="ft5">R(x</span></nobr></DIV>
<DIV style="position:absolute;top:412;left:499"><nobr><span class="ft1">3</span></nobr></DIV>
<DIV style="position:absolute;top:409;left:505"><nobr><span class="ft5">, x</span></nobr></DIV>
<DIV style="position:absolute;top:412;left:519"><nobr><span class="ft1">4</span></nobr></DIV>
<DIV style="position:absolute;top:409;left:525"><nobr><span class="ft5">)</span></nobr></DIV>
<DIV style="position:absolute;top:406;left:535"><nobr><span class="ft5"> KG(E) we cannot guarantee that we can answer</span></nobr></DIV>
<DIV style="position:absolute;top:425;left:475"><nobr><span class="ft5">tuple checks R(t</span></nobr></DIV>
<DIV style="position:absolute;top:428;left:572"><nobr><span class="ft1">3</span></nobr></DIV>
<DIV style="position:absolute;top:425;left:578"><nobr><span class="ft5">, t</span></nobr></DIV>
<DIV style="position:absolute;top:428;left:589"><nobr><span class="ft1">4</span></nobr></DIV>
<DIV style="position:absolute;top:425;left:595"><nobr><span class="ft5">) without executing a membership query</span></nobr></DIV>
<DIV style="position:absolute;top:441;left:475"><nobr><span class="ft11">on the database, even though we are able to answer tuple<br>checks R(t</span></nobr></DIV>
<DIV style="position:absolute;top:459;left:540"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:456;left:546"><nobr><span class="ft5">, t</span></nobr></DIV>
<DIV style="position:absolute;top:459;left:557"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:456;left:563"><nobr><span class="ft5">). The complementary set for the discussed</span></nobr></DIV>
<DIV style="position:absolute;top:472;left:475"><nobr><span class="ft5">expression is:</span></nobr></DIV>
<DIV style="position:absolute;top:497;left:563"><nobr><span class="ft5">(E) = {R(x</span></nobr></DIV>
<DIV style="position:absolute;top:500;left:642"><nobr><span class="ft1">3</span></nobr></DIV>
<DIV style="position:absolute;top:497;left:648"><nobr><span class="ft5">, x</span></nobr></DIV>
<DIV style="position:absolute;top:500;left:662"><nobr><span class="ft1">4</span></nobr></DIV>
<DIV style="position:absolute;top:497;left:668"><nobr><span class="ft5">), P (x</span></nobr></DIV>
<DIV style="position:absolute;top:500;left:704"><nobr><span class="ft1">3</span></nobr></DIV>
<DIV style="position:absolute;top:497;left:710"><nobr><span class="ft5">, x</span></nobr></DIV>
<DIV style="position:absolute;top:500;left:724"><nobr><span class="ft1">4</span></nobr></DIV>
<DIV style="position:absolute;top:497;left:730"><nobr><span class="ft5">)</span></nobr></DIV>
<DIV style="position:absolute;top:494;left:736"><nobr><span class="ft5">}.</span></nobr></DIV>
<DIV style="position:absolute;top:527;left:475"><nobr><span class="ft11">Analogous examples can be used to show that the simple<br>knowledge gathering is not sufficient to avoid membership<br>checks when processing expressions with the difference op-<br>erator. Next, we extend the envelope expression so that<br>it evaluation provides us with all information sufficient to<br>answer the tuple checks.</span></nobr></DIV>
<DIV style="position:absolute;top:638;left:490"><nobr><span class="ft5">Definition 17</span></nobr></DIV>
<DIV style="position:absolute;top:638;left:599"><nobr><span class="ft5">(Extended envelope expression).</span></nobr></DIV>
<DIV style="position:absolute;top:652;left:475"><nobr><span class="ft11">For a given -free expression E the extended envelope<br>expression is defined as follows:</span></nobr></DIV>
<DIV style="position:absolute;top:704;left:535"><nobr><span class="ft5">H(E) = F (E)</span></nobr></DIV>
<DIV style="position:absolute;top:690;left:646"><nobr><span class="ft20">|R|<br>j=1</span></nobr></DIV>
<DIV style="position:absolute;top:696;left:667"><nobr><span class="ft1">E.(i+j-1)=R.j</span></nobr></DIV>
<DIV style="position:absolute;top:701;left:624"><nobr><span class="ft5">----------------</span></nobr></DIV>
<DIV style="position:absolute;top:716;left:629"><nobr><span class="ft1">R(x</span></nobr></DIV>
<DIV style="position:absolute;top:719;left:648"><nobr><span class="ft13">i</span></nobr></DIV>
<DIV style="position:absolute;top:716;left:653"><nobr><span class="ft1">,...,x</span></nobr></DIV>
<DIV style="position:absolute;top:720;left:676"><nobr><span class="ft13">i+|R|-1</span></nobr></DIV>
<DIV style="position:absolute;top:714;left:716"><nobr><span class="ft1">)(E)</span></nobr></DIV>
<DIV style="position:absolute;top:704;left:760"><nobr><span class="ft5">R.</span></nobr></DIV>
<DIV style="position:absolute;top:739;left:475"><nobr><span class="ft11">The notation means that we have as many outer joins as<br>there are elements in (E). They can appear in any order.<br>We also define the following auxiliary expression:</span></nobr></DIV>
<DIV style="position:absolute;top:801;left:547"><nobr><span class="ft5">S(E) = E ×</span></nobr></DIV>
<DIV style="position:absolute;top:786;left:674"><nobr><span class="ft19">×</span></nobr></DIV>
<DIV style="position:absolute;top:816;left:625"><nobr><span class="ft1">R(x</span></nobr></DIV>
<DIV style="position:absolute;top:819;left:643"><nobr><span class="ft13">i</span></nobr></DIV>
<DIV style="position:absolute;top:816;left:648"><nobr><span class="ft1">,...,x</span></nobr></DIV>
<DIV style="position:absolute;top:820;left:671"><nobr><span class="ft13">i+|R|-1</span></nobr></DIV>
<DIV style="position:absolute;top:814;left:712"><nobr><span class="ft1">)(E)</span></nobr></DIV>
<DIV style="position:absolute;top:801;left:747"><nobr><span class="ft5">R.</span></nobr></DIV>
<DIV style="position:absolute;top:840;left:475"><nobr><span class="ft11">For both H(E) and S(E) the elements of (E) need to be<br>considered in the same order.</span></nobr></DIV>
<DIV style="position:absolute;top:886;left:475"><nobr><span class="ft11">Using outer joins results in a natural one-to-one correspon-<br>dence between the tuples from the evaluation of the ex-<br>tended envelope expression and the tuples from the original<br>envelope.</span></nobr></DIV>
<DIV style="position:absolute;top:962;left:490"><nobr><span class="ft5">Fact</span></nobr></DIV>
<DIV style="position:absolute;top:960;left:530"><nobr><span class="ft5">4. For a given database instance I and -free ex-</span></nobr></DIV>
<DIV style="position:absolute;top:975;left:475"><nobr><span class="ft21">pression E, the map t  t[1, |E|] is a one-to-one map of<br>QA</span></nobr></DIV>
<DIV style="position:absolute;top:990;left:496"><nobr><span class="ft1">H(E)</span></nobr></DIV>
<DIV style="position:absolute;top:993;left:524"><nobr><span class="ft5">(I) onto QA</span></nobr></DIV>
<DIV style="position:absolute;top:990;left:599"><nobr><span class="ft1">F (E)</span></nobr></DIV>
<DIV style="position:absolute;top:993;left:626"><nobr><span class="ft5">(I).</span></nobr></DIV>
<DIV style="position:absolute;top:1019;left:475"><nobr><span class="ft11">Extending knowledge gathering to null tuples KG(R, (<br>, . . . , )) =  allows us to state that using the extended<br>envelope expression we can determine correctly all relevant<br>facts without querying the database.</span></nobr></DIV>
<DIV style="position:absolute;top:1116;left:449"><nobr><span class="ft9">422</span></nobr></DIV>
</DIV>
<!-- Page 7 -->
<a name="7"></a>
<DIV style="position:relative;width:918;height:1188;">
<STYLE type="text/css">
<!--
	.ft22{font-size:14px;font-family:Times;color:#000000;}
	.ft23{font-size:11px;line-height:19px;font-family:Times;color:#000000;}
	.ft24{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</STYLE>
<IMG width="918" height="1188" src="54007.png" alt="background image">
<DIV style="position:absolute;top:89;left:96"><nobr><span class="ft5">Theorem 5</span></nobr></DIV>
<DIV style="position:absolute;top:89;left:186"><nobr><span class="ft5">(Soundness, completeness of ext. KG).</span></nobr></DIV>
<DIV style="position:absolute;top:102;left:81"><nobr><span class="ft11">For any database instance I and a -free expression E the<br>following holds:</span></nobr></DIV>
<DIV style="position:absolute;top:144;left:96"><nobr><span class="ft5">t  QA</span></nobr></DIV>
<DIV style="position:absolute;top:144;left:146"><nobr><span class="ft1">H(E)</span></nobr></DIV>
<DIV style="position:absolute;top:147;left:174"><nobr><span class="ft5">(I).R(t )  TC(E, t[1, |E|]).</span></nobr></DIV>
<DIV style="position:absolute;top:169;left:201"><nobr><span class="ft5">R(t )</span></nobr></DIV>
<DIV style="position:absolute;top:166;left:235"><nobr><span class="ft5"> KG(S(E), t)  I |= R(t ).</span></nobr></DIV>
<DIV style="position:absolute;top:192;left:81"><nobr><span class="ft5">We note that in the case of</span></nobr></DIV>
<DIV style="position:absolute;top:188;left:244"><nobr><span class="ft5">{, ×}-expressions this approach</span></nobr></DIV>
<DIV style="position:absolute;top:207;left:81"><nobr><span class="ft5">doesn't unnecessarily extend the expression.</span></nobr></DIV>
<DIV style="position:absolute;top:231;left:81"><nobr><span class="ft3"><b>4.3</b></span></nobr></DIV>
<DIV style="position:absolute;top:231;left:121"><nobr><span class="ft3"><b>Other possibilities of optimizations</b></span></nobr></DIV>
<DIV style="position:absolute;top:262;left:85"><nobr><span class="ft22"><i>4.3.1</i></span></nobr></DIV>
<DIV style="position:absolute;top:262;left:134"><nobr><span class="ft22"><i>Negative knowledge gathering</i></span></nobr></DIV>
<DIV style="position:absolute;top:284;left:94"><nobr><span class="ft5">Knowledge gathering KG (as defined in Section 4.1) is</span></nobr></DIV>
<DIV style="position:absolute;top:299;left:81"><nobr><span class="ft11">complete only for queries that translate to a conjunction of<br>positive literals. However, it is possible to come up with a<br>construction that will be complete for queries that translate<br>to a conjunction of positive as well as negative literals. The<br>following example presents this idea.</span></nobr></DIV>
<DIV style="position:absolute;top:387;left:96"><nobr><span class="ft5">Example</span></nobr></DIV>
<DIV style="position:absolute;top:384;left:162"><nobr><span class="ft5">10. Suppose we have tables R(1, 2) and P (1, 2)</span></nobr></DIV>
<DIV style="position:absolute;top:400;left:81"><nobr><span class="ft21">and a set of constraints C. For the query E = R\P , we have<br>F (E) = R \ </span></nobr></DIV>
<DIV style="position:absolute;top:415;left:171"><nobr><span class="ft1">P</span></nobr></DIV>
<DIV style="position:absolute;top:423;left:171"><nobr><span class="ft1">C</span></nobr></DIV>
<DIV style="position:absolute;top:417;left:180"><nobr><span class="ft5">. Take any tuple t  QA</span></nobr></DIV>
<DIV style="position:absolute;top:415;left:336"><nobr><span class="ft1">F (E)</span></nobr></DIV>
<DIV style="position:absolute;top:417;left:362"><nobr><span class="ft5">(I) for some</span></nobr></DIV>
<DIV style="position:absolute;top:433;left:81"><nobr><span class="ft23">instance I. We can easily conclude that t  I(R). Also,<br>we can say that t  QA</span></nobr></DIV>
<DIV style="position:absolute;top:448;left:225"><nobr><span class="ft1"></span></nobr></DIV>
<DIV style="position:absolute;top:447;left:234"><nobr><span class="ft13">P</span></nobr></DIV>
<DIV style="position:absolute;top:454;left:234"><nobr><span class="ft13">C</span></nobr></DIV>
<DIV style="position:absolute;top:452;left:244"><nobr><span class="ft5">(I). Having this and hypergraph</span></nobr></DIV>
<DIV style="position:absolute;top:465;left:81"><nobr><span class="ft5">G</span></nobr></DIV>
<DIV style="position:absolute;top:473;left:89"><nobr><span class="ft1">C,I</span></nobr></DIV>
<DIV style="position:absolute;top:468;left:111"><nobr><span class="ft5">= (</span></nobr></DIV>
<DIV style="position:absolute;top:465;left:131"><nobr><span class="ft5">V</span></nobr></DIV>
<DIV style="position:absolute;top:473;left:140"><nobr><span class="ft1">I</span></nobr></DIV>
<DIV style="position:absolute;top:468;left:146"><nobr><span class="ft5">, E</span></nobr></DIV>
<DIV style="position:absolute;top:473;left:160"><nobr><span class="ft1">C,I</span></nobr></DIV>
<DIV style="position:absolute;top:468;left:177"><nobr><span class="ft5">) we can easily find if t  I(P ). Namely, if</span></nobr></DIV>
<DIV style="position:absolute;top:484;left:81"><nobr><span class="ft5">there exists an edge e  E</span></nobr></DIV>
<DIV style="position:absolute;top:488;left:238"><nobr><span class="ft1">C,I</span></nobr></DIV>
<DIV style="position:absolute;top:484;left:261"><nobr><span class="ft5">that P (t)  e, then t  I(P ).</span></nobr></DIV>
<DIV style="position:absolute;top:499;left:81"><nobr><span class="ft11">And if the vertex P (t) is not involved in any conflict in E<br>then t  I(P ).</span></nobr></DIV>
<DIV style="position:absolute;top:531;left:94"><nobr><span class="ft5">Reasoning of that sort cannot be applied to a query E =</span></nobr></DIV>
<DIV style="position:absolute;top:546;left:81"><nobr><span class="ft5">R × R \ P × P . Given a tuple t = (t</span></nobr></DIV>
<DIV style="position:absolute;top:549;left:300"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:546;left:306"><nobr><span class="ft5">, t</span></nobr></DIV>
<DIV style="position:absolute;top:549;left:317"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:546;left:324"><nobr><span class="ft5">) from the envelope</span></nobr></DIV>
<DIV style="position:absolute;top:566;left:81"><nobr><span class="ft5">we know that t</span></nobr></DIV>
<DIV style="position:absolute;top:568;left:168"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:566;left:174"><nobr><span class="ft5">, t</span></nobr></DIV>
<DIV style="position:absolute;top:568;left:185"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:563;left:195"><nobr><span class="ft5"> R, but the fact (t</span></nobr></DIV>
<DIV style="position:absolute;top:568;left:310"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:566;left:316"><nobr><span class="ft5">, t</span></nobr></DIV>
<DIV style="position:absolute;top:568;left:327"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:566;left:333"><nobr><span class="ft5">)</span></nobr></DIV>
<DIV style="position:absolute;top:563;left:343"><nobr><span class="ft5"> QA</span></nobr></DIV>
<DIV style="position:absolute;top:561;left:377"><nobr><span class="ft1"></span></nobr></DIV>
<DIV style="position:absolute;top:561;left:386"><nobr><span class="ft13">P</span></nobr></DIV>
<DIV style="position:absolute;top:567;left:386"><nobr><span class="ft13">C</span></nobr></DIV>
<DIV style="position:absolute;top:561;left:394"><nobr><span class="ft1">×</span></nobr></DIV>
<DIV style="position:absolute;top:561;left:412"><nobr><span class="ft13">P</span></nobr></DIV>
<DIV style="position:absolute;top:567;left:412"><nobr><span class="ft13">C</span></nobr></DIV>
<DIV style="position:absolute;top:566;left:422"><nobr><span class="ft5">(I)</span></nobr></DIV>
<DIV style="position:absolute;top:585;left:81"><nobr><span class="ft5">doesn't imply that t</span></nobr></DIV>
<DIV style="position:absolute;top:588;left:201"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:582;left:213"><nobr><span class="ft5"> QA</span></nobr></DIV>
<DIV style="position:absolute;top:581;left:249"><nobr><span class="ft1"></span></nobr></DIV>
<DIV style="position:absolute;top:580;left:258"><nobr><span class="ft13">P</span></nobr></DIV>
<DIV style="position:absolute;top:587;left:258"><nobr><span class="ft13">C</span></nobr></DIV>
<DIV style="position:absolute;top:585;left:268"><nobr><span class="ft5">(I) or t</span></nobr></DIV>
<DIV style="position:absolute;top:588;left:316"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:582;left:328"><nobr><span class="ft5"> QA</span></nobr></DIV>
<DIV style="position:absolute;top:581;left:364"><nobr><span class="ft1"></span></nobr></DIV>
<DIV style="position:absolute;top:580;left:373"><nobr><span class="ft13">P</span></nobr></DIV>
<DIV style="position:absolute;top:587;left:373"><nobr><span class="ft13">C</span></nobr></DIV>
<DIV style="position:absolute;top:585;left:383"><nobr><span class="ft5">(I). And</span></nobr></DIV>
<DIV style="position:absolute;top:601;left:81"><nobr><span class="ft5">therefore we are not able to find if t</span></nobr></DIV>
<DIV style="position:absolute;top:603;left:297"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:598;left:307"><nobr><span class="ft5"> I(P ) or t</span></nobr></DIV>
<DIV style="position:absolute;top:603;left:376"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:598;left:386"><nobr><span class="ft5"> I(P ).</span></nobr></DIV>
<DIV style="position:absolute;top:623;left:81"><nobr><span class="ft11">This mechanism hasn't been included in the tested imple-<br>mentation yet. Implementing only positive knowledge gath-<br>ering allows us to better observe the benefits of extending<br>the envelope expression.</span></nobr></DIV>
<DIV style="position:absolute;top:686;left:94"><nobr><span class="ft5">We notice here that the query rewriting approach to com-</span></nobr></DIV>
<DIV style="position:absolute;top:702;left:81"><nobr><span class="ft11">puting consistent query answers described in [2] works also<br>only for queries that are conjunctions of literals. However,<br>as shown below, our approach leads to faster computation<br>of consistent answers than query rewriting.</span></nobr></DIV>
<DIV style="position:absolute;top:774;left:85"><nobr><span class="ft22"><i>4.3.2</i></span></nobr></DIV>
<DIV style="position:absolute;top:774;left:134"><nobr><span class="ft22"><i>Intersection</i></span></nobr></DIV>
<DIV style="position:absolute;top:795;left:94"><nobr><span class="ft5">Another possible venue of optimization comes from di-</span></nobr></DIV>
<DIV style="position:absolute;top:810;left:81"><nobr><span class="ft11">rectly implementing derived operators of relational algebra.<br>For example, for intersection the appropriate extensions of<br>the operators F and G are very simple:</span></nobr></DIV>
<DIV style="position:absolute;top:865;left:81"><nobr><span class="ft5">F (E</span></nobr></DIV>
<DIV style="position:absolute;top:868;left:107"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:862;left:114"><nobr><span class="ft5">E</span></nobr></DIV>
<DIV style="position:absolute;top:868;left:135"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:865;left:141"><nobr><span class="ft5">) = F (E</span></nobr></DIV>
<DIV style="position:absolute;top:868;left:191"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:865;left:198"><nobr><span class="ft5">)</span></nobr></DIV>
<DIV style="position:absolute;top:862;left:204"><nobr><span class="ft5">F (E</span></nobr></DIV>
<DIV style="position:absolute;top:868;left:241"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:865;left:247"><nobr><span class="ft5">), G(E</span></nobr></DIV>
<DIV style="position:absolute;top:868;left:290"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:862;left:297"><nobr><span class="ft5">E</span></nobr></DIV>
<DIV style="position:absolute;top:868;left:318"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:865;left:324"><nobr><span class="ft5">) = G(E</span></nobr></DIV>
<DIV style="position:absolute;top:868;left:374"><nobr><span class="ft1">1</span></nobr></DIV>
<DIV style="position:absolute;top:865;left:380"><nobr><span class="ft5">)</span></nobr></DIV>
<DIV style="position:absolute;top:862;left:387"><nobr><span class="ft5">G(E</span></nobr></DIV>
<DIV style="position:absolute;top:868;left:424"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:865;left:430"><nobr><span class="ft5">).</span></nobr></DIV>
<DIV style="position:absolute;top:889;left:81"><nobr><span class="ft11">Now R P is equivalent to R \(R \P ) b ut F (R P ) = R P<br>is not equivalent to F (R \ (R \ P )) = R \ (</span></nobr></DIV>
<DIV style="position:absolute;top:902;left:340"><nobr><span class="ft1">R</span></nobr></DIV>
<DIV style="position:absolute;top:911;left:340"><nobr><span class="ft1">C</span></nobr></DIV>
<DIV style="position:absolute;top:901;left:351"><nobr><span class="ft5">\P ). Thus the</span></nobr></DIV>
<DIV style="position:absolute;top:920;left:81"><nobr><span class="ft11">envelope constructed by the operator F becomes sensitive<br>to the way the original query is formulated.</span></nobr></DIV>
<DIV style="position:absolute;top:967;left:81"><nobr><span class="ft3"><b>5.</b></span></nobr></DIV>
<DIV style="position:absolute;top:967;left:112"><nobr><span class="ft3"><b>EXPERIMENTAL RESULTS</b></span></nobr></DIV>
<DIV style="position:absolute;top:998;left:81"><nobr><span class="ft3"><b>5.1</b></span></nobr></DIV>
<DIV style="position:absolute;top:998;left:121"><nobr><span class="ft3"><b>The setting for the experiments</b></span></nobr></DIV>
<DIV style="position:absolute;top:1019;left:94"><nobr><span class="ft5">Among available methods for computing consistent query</span></nobr></DIV>
<DIV style="position:absolute;top:1035;left:81"><nobr><span class="ft11">answers, only the query rewriting technique [2] seems to be<br>feasible for large databases. This is why in this work we<br>compare the following engines:</span></nobr></DIV>
<DIV style="position:absolute;top:86;left:475"><nobr><span class="ft5">SQL An engine that executes the given query on the un-</span></nobr></DIV>
<DIV style="position:absolute;top:102;left:509"><nobr><span class="ft11">derlying RDBMS, and returns the query result. This<br>method doesn't return consistent query answers, but<br>provides a baseline to observe the overhead of com-<br>puting consistent query answers using the proposed<br>methods.</span></nobr></DIV>
<DIV style="position:absolute;top:188;left:475"><nobr><span class="ft5">QR Using the SQL engine, we execute the rewritten query</span></nobr></DIV>
<DIV style="position:absolute;top:204;left:509"><nobr><span class="ft11">constructed as decribed in [2]. More details on this<br>approach can be found in Section 6.</span></nobr></DIV>
<DIV style="position:absolute;top:243;left:475"><nobr><span class="ft5">KG This method constructs the basic envelope expression</span></nobr></DIV>
<DIV style="position:absolute;top:259;left:509"><nobr><span class="ft11">and uses knowledge gathering, as described in Section<br>4.1.</span></nobr></DIV>
<DIV style="position:absolute;top:298;left:475"><nobr><span class="ft5">ExtKG This engine constructs the extended envelope ex-</span></nobr></DIV>
<DIV style="position:absolute;top:314;left:509"><nobr><span class="ft11">pression (Section 4.2) and uses extended knowledge<br>gathering.</span></nobr></DIV>
<DIV style="position:absolute;top:358;left:479"><nobr><span class="ft22"><i>5.1.1</i></span></nobr></DIV>
<DIV style="position:absolute;top:358;left:529"><nobr><span class="ft22"><i>Generating test data</i></span></nobr></DIV>
<DIV style="position:absolute;top:380;left:489"><nobr><span class="ft5">Every test was performed with the database containing</span></nobr></DIV>
<DIV style="position:absolute;top:395;left:475"><nobr><span class="ft11">two tables P and Q, both having three attributes X, Y, Z.<br>For the constraints, we took a functional dependency X <br>Z in each table. The test databases had the following pa-<br>rameters:</span></nobr></DIV>
<DIV style="position:absolute;top:468;left:495"><nobr><span class="ft24">· n : the number of base tuples in each table,<br>· m : the number of additional conflicting tuples,</span></nobr></DIV>
<DIV style="position:absolute;top:524;left:475"><nobr><span class="ft5">and had both tables constructed in the following way:</span></nobr></DIV>
<DIV style="position:absolute;top:553;left:491"><nobr><span class="ft5">1. Insert n different base tuples with X and Z being equal</span></nobr></DIV>
<DIV style="position:absolute;top:569;left:509"><nobr><span class="ft11">and taking subsequent values 0, . . . , n - 1, and Y being<br>randomly drawn from the set</span></nobr></DIV>
<DIV style="position:absolute;top:581;left:691"><nobr><span class="ft5">{0, 1}.</span></nobr></DIV>
<DIV style="position:absolute;top:616;left:491"><nobr><span class="ft5">2. Insert m different conflicting tuples with X taking sub-</span></nobr></DIV>
<DIV style="position:absolute;top:632;left:509"><nobr><span class="ft5">sequent values</span></nobr></DIV>
<DIV style="position:absolute;top:629;left:606"><nobr><span class="ft5">{0, n/m , 2  n/m , . . . , (m - 1) </span></nobr></DIV>
<DIV style="position:absolute;top:647;left:509"><nobr><span class="ft11">n/m }, Z = X + 1, and Y being randomly drawn<br>from the set</span></nobr></DIV>
<DIV style="position:absolute;top:660;left:587"><nobr><span class="ft5">{0, 1}.</span></nobr></DIV>
<DIV style="position:absolute;top:692;left:475"><nobr><span class="ft5">In addition, we define auxiliary tables (P</span></nobr></DIV>
<DIV style="position:absolute;top:697;left:737"><nobr><span class="ft1">core</span></nobr></DIV>
<DIV style="position:absolute;top:692;left:766"><nobr><span class="ft5">and Q</span></nobr></DIV>
<DIV style="position:absolute;top:697;left:806"><nobr><span class="ft1">core</span></nobr></DIV>
<DIV style="position:absolute;top:692;left:828"><nobr><span class="ft5">)</span></nobr></DIV>
<DIV style="position:absolute;top:708;left:475"><nobr><span class="ft21">containing only non-conflicting tuples from the base tables<br>(resp. P and Q). Those table were used as materialized<br>views of the core expressions (</span></nobr></DIV>
<DIV style="position:absolute;top:738;left:670"><nobr><span class="ft1">P</span></nobr></DIV>
<DIV style="position:absolute;top:747;left:670"><nobr><span class="ft1">C</span></nobr></DIV>
<DIV style="position:absolute;top:741;left:684"><nobr><span class="ft5">and </span></nobr></DIV>
<DIV style="position:absolute;top:738;left:723"><nobr><span class="ft17">Q<br>C</span></nobr></DIV>
<DIV style="position:absolute;top:741;left:732"><nobr><span class="ft5">).</span></nobr></DIV>
<DIV style="position:absolute;top:772;left:490"><nobr><span class="ft5">Example</span></nobr></DIV>
<DIV style="position:absolute;top:770;left:556"><nobr><span class="ft5">11. We show how a table P with n = 4 and</span></nobr></DIV>
<DIV style="position:absolute;top:786;left:475"><nobr><span class="ft5">m = 2 can be generated:</span></nobr></DIV>
<DIV style="position:absolute;top:815;left:491"><nobr><span class="ft5">1. First</span></nobr></DIV>
<DIV style="position:absolute;top:815;left:572"><nobr><span class="ft5">we</span></nobr></DIV>
<DIV style="position:absolute;top:815;left:621"><nobr><span class="ft5">insert</span></nobr></DIV>
<DIV style="position:absolute;top:815;left:689"><nobr><span class="ft5">the</span></nobr></DIV>
<DIV style="position:absolute;top:815;left:741"><nobr><span class="ft5">base</span></nobr></DIV>
<DIV style="position:absolute;top:815;left:799"><nobr><span class="ft5">tuples</span></nobr></DIV>
<DIV style="position:absolute;top:830;left:509"><nobr><span class="ft5">(0, 1, 0), (1, 0, 1), (2, 0, 2), (3, 1, 3) into P</span></nobr></DIV>
<DIV style="position:absolute;top:862;left:491"><nobr><span class="ft5">2. Then</span></nobr></DIV>
<DIV style="position:absolute;top:862;left:553"><nobr><span class="ft5">we</span></nobr></DIV>
<DIV style="position:absolute;top:862;left:581"><nobr><span class="ft5">insert</span></nobr></DIV>
<DIV style="position:absolute;top:862;left:628"><nobr><span class="ft5">the</span></nobr></DIV>
<DIV style="position:absolute;top:862;left:658"><nobr><span class="ft5">following</span></nobr></DIV>
<DIV style="position:absolute;top:862;left:725"><nobr><span class="ft5">conflicting</span></nobr></DIV>
<DIV style="position:absolute;top:862;left:799"><nobr><span class="ft5">tuples</span></nobr></DIV>
<DIV style="position:absolute;top:878;left:509"><nobr><span class="ft5">(0, 1, 1), (2, 0, 3) into P</span></nobr></DIV>
<DIV style="position:absolute;top:909;left:491"><nobr><span class="ft5">3. P</span></nobr></DIV>
<DIV style="position:absolute;top:914;left:518"><nobr><span class="ft1">core</span></nobr></DIV>
<DIV style="position:absolute;top:909;left:545"><nobr><span class="ft5">will hold the following tuples (1, 0, 1), (3, 1, 3).</span></nobr></DIV>
<DIV style="position:absolute;top:938;left:475"><nobr><span class="ft11">In every table constructed in such a way the number of tu-<br>ples is n + m, and the number of conflicts is m.</span></nobr></DIV>
<DIV style="position:absolute;top:983;left:479"><nobr><span class="ft22"><i>5.1.2</i></span></nobr></DIV>
<DIV style="position:absolute;top:983;left:529"><nobr><span class="ft22"><i>The environment</i></span></nobr></DIV>
<DIV style="position:absolute;top:1004;left:489"><nobr><span class="ft5">The implementation is done in Java2, using PostgreSQL</span></nobr></DIV>
<DIV style="position:absolute;top:1019;left:475"><nobr><span class="ft11">(version 7.3.3) as the relational backend. All test have been<br>performed on a PC with a 1.4GHz AMD Athlon processor<br>under SuSE Linux 8.2 (kernel ver. 2.4.20) using Sun JVM<br>1.4.1.</span></nobr></DIV>
<DIV style="position:absolute;top:1116;left:449"><nobr><span class="ft9">423</span></nobr></DIV>
</DIV>
<!-- Page 8 -->
<a name="8"></a>
<DIV style="position:relative;width:918;height:1188;">
<STYLE type="text/css">
<!--
	.ft25{font-size:3px;font-family:Times;color:#ffffff;}
	.ft26{font-size:3px;font-family:Times;color:#000000;}
	.ft27{font-size:8px;line-height:14px;font-family:Times;color:#000000;}
	.ft28{font-size:8px;line-height:15px;font-family:Times;color:#000000;}
-->
</STYLE>
<IMG width="918" height="1188" src="54008.png" alt="background image">
<DIV style="position:absolute;top:84;left:81"><nobr><span class="ft3"><b>5.2</b></span></nobr></DIV>
<DIV style="position:absolute;top:84;left:121"><nobr><span class="ft3"><b>Test results</b></span></nobr></DIV>
<DIV style="position:absolute;top:106;left:94"><nobr><span class="ft5">Testing a query with a given engine consisted of comput-</span></nobr></DIV>
<DIV style="position:absolute;top:121;left:81"><nobr><span class="ft5">ing the consistent</span></nobr></DIV>
<DIV style="position:absolute;top:117;left:187"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:121;left:198"><nobr><span class="ft5">answers to the query and then iterating</span></nobr></DIV>
<DIV style="position:absolute;top:137;left:81"><nobr><span class="ft11">over the results. Iteration over the result is necessary, as<br>the subsequent elements of the consistent query answer set<br>are computed by Hippo in a lazy manner (this allows us<br>to process results bigger than the available main memory).<br>Every test has been repeated three times and the median<br>taken. Finally, we note that the cost of computing the con-<br>flict hypergraph, which is incurred only once per session, is<br>ignored while estimating the time of the query evaluation.<br>We take a closer look at the time required for hypergraph<br>construction in Section 5.2.3.</span></nobr></DIV>
<DIV style="position:absolute;top:304;left:85"><nobr><span class="ft22"><i>5.2.1</i></span></nobr></DIV>
<DIV style="position:absolute;top:304;left:134"><nobr><span class="ft22"><i>Simple queries</i></span></nobr></DIV>
<DIV style="position:absolute;top:325;left:94"><nobr><span class="ft5">We first compared performance of different engines on</span></nobr></DIV>
<DIV style="position:absolute;top:341;left:81"><nobr><span class="ft5">simple queries: join, union, and difference.</span></nobr></DIV>
<DIV style="position:absolute;top:341;left:368"><nobr><span class="ft5">Because we</span></nobr></DIV>
<DIV style="position:absolute;top:357;left:81"><nobr><span class="ft11">performed the tests for large databases, we added a range<br>selection to the given query to obtain small query results,<br>factoring out the time necessary to write the outputs. As<br>parameters in the experiments, we considered the database<br>size, the conflict percentage, and the estimated result size.</span></nobr></DIV>
<DIV style="position:absolute;top:435;left:94"><nobr><span class="ft5">Figure 3 shows the execution time for join as a function</span></nobr></DIV>
<DIV style="position:absolute;top:451;left:81"><nobr><span class="ft5">of the size of the database. In the case of</span></nobr></DIV>
<DIV style="position:absolute;top:448;left:329"><nobr><span class="ft5">{, ×}-expressions</span></nobr></DIV>
<DIV style="position:absolute;top:467;left:81"><nobr><span class="ft11">(thus also joins), the execution times of KG, ExtKG and<br>SQL are essentially identical. Since no membership queries<br>have to be performed, it means that for simple queries the<br>work done by HProver for all tuples is practically negligible.</span></nobr></DIV>
<DIV style="position:absolute;top:568;left:171"><nobr><span class="ft18"></span></nobr></DIV>
<DIV style="position:absolute;top:571;left:178"><nobr><span class="ft13">X&lt;200</span></nobr></DIV>
<DIV style="position:absolute;top:568;left:211"><nobr><span class="ft18">(P </span></nobr></DIV>
<DIV style="position:absolute;top:571;left:237"><nobr><span class="ft13">X</span></nobr></DIV>
<DIV style="position:absolute;top:568;left:250"><nobr><span class="ft18">Q)</span></nobr></DIV>
<DIV style="position:absolute;top:673;left:108"><nobr><span class="ft18">Time</span></nobr></DIV>
<DIV style="position:absolute;top:642;left:108"><nobr><span class="ft18">(sec.)</span></nobr></DIV>
<DIV style="position:absolute;top:726;left:137"><nobr><span class="ft18">Database size (increases in 1k)</span></nobr></DIV>
<DIV style="position:absolute;top:714;left:125"><nobr><span class="ft18">0</span></nobr></DIV>
<DIV style="position:absolute;top:714;left:171"><nobr><span class="ft18">100</span></nobr></DIV>
<DIV style="position:absolute;top:714;left:224"><nobr><span class="ft18">200</span></nobr></DIV>
<DIV style="position:absolute;top:714;left:276"><nobr><span class="ft18">300</span></nobr></DIV>
<DIV style="position:absolute;top:702;left:114"><nobr><span class="ft18">0</span></nobr></DIV>
<DIV style="position:absolute;top:673;left:114"><nobr><span class="ft18">3</span></nobr></DIV>
<DIV style="position:absolute;top:645;left:114"><nobr><span class="ft18">6</span></nobr></DIV>
<DIV style="position:absolute;top:616;left:114"><nobr><span class="ft18">9</span></nobr></DIV>
<DIV style="position:absolute;top:587;left:108"><nobr><span class="ft18">12</span></nobr></DIV>
<DIV style="position:absolute;top:625;left:363"><nobr><span class="ft27">SQL<br>QR<br>KG<br>ExtKG</span></nobr></DIV>
<DIV style="position:absolute;top:691;left:334"><nobr><span class="ft18">Conflicts: 2%</span></nobr></DIV>
<DIV style="position:absolute;top:781;left:142"><nobr><span class="ft5">Figure 3: Execution time for join.</span></nobr></DIV>
<DIV style="position:absolute;top:816;left:94"><nobr><span class="ft5">Figure 4 contains the results for union.</span></nobr></DIV>
<DIV style="position:absolute;top:816;left:355"><nobr><span class="ft5">It shows that</span></nobr></DIV>
<DIV style="position:absolute;top:832;left:81"><nobr><span class="ft11">basic knowledge gathering KG is not sufficient to efficiently<br>handle union. The cost of performing membership queries<br>for all tuples is very large. Note that query rewriting is not<br>applicable to union queries.</span></nobr></DIV>
<DIV style="position:absolute;top:895;left:94"><nobr><span class="ft5">Figure 5 contains the results for set difference (the exe-</span></nobr></DIV>
<DIV style="position:absolute;top:910;left:81"><nobr><span class="ft11">cution time for KG was relatively much larger than values<br>of other solutions and in order to increase readability it has<br>not been included on this figure). Here the execution time is<br>a function of the percentage of conflicts. We note that Ex-<br>tKG performs as well as QR and both are approximately<br>twice slower than SQL.</span></nobr></DIV>
<DIV style="position:absolute;top:1062;left:81"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:1067;left:88"><nobr><span class="ft5">Except when using SQL engine.</span></nobr></DIV>
<DIV style="position:absolute;top:93;left:571"><nobr><span class="ft18"></span></nobr></DIV>
<DIV style="position:absolute;top:97;left:578"><nobr><span class="ft13">X&lt;200</span></nobr></DIV>
<DIV style="position:absolute;top:93;left:611"><nobr><span class="ft18">(P  Q)</span></nobr></DIV>
<DIV style="position:absolute;top:199;left:498"><nobr><span class="ft18">Time</span></nobr></DIV>
<DIV style="position:absolute;top:168;left:498"><nobr><span class="ft18">(sec.)</span></nobr></DIV>
<DIV style="position:absolute;top:251;left:532"><nobr><span class="ft18">Database size (increases in 1k)</span></nobr></DIV>
<DIV style="position:absolute;top:239;left:520"><nobr><span class="ft18">0</span></nobr></DIV>
<DIV style="position:absolute;top:239;left:553"><nobr><span class="ft18">20</span></nobr></DIV>
<DIV style="position:absolute;top:239;left:589"><nobr><span class="ft18">40</span></nobr></DIV>
<DIV style="position:absolute;top:239;left:625"><nobr><span class="ft18">60</span></nobr></DIV>
<DIV style="position:absolute;top:239;left:661"><nobr><span class="ft18">80</span></nobr></DIV>
<DIV style="position:absolute;top:239;left:694"><nobr><span class="ft18">100</span></nobr></DIV>
<DIV style="position:absolute;top:228;left:509"><nobr><span class="ft18">0</span></nobr></DIV>
<DIV style="position:absolute;top:207;left:509"><nobr><span class="ft18">3</span></nobr></DIV>
<DIV style="position:absolute;top:187;left:509"><nobr><span class="ft18">6</span></nobr></DIV>
<DIV style="position:absolute;top:167;left:509"><nobr><span class="ft18">9</span></nobr></DIV>
<DIV style="position:absolute;top:146;left:503"><nobr><span class="ft18">12</span></nobr></DIV>
<DIV style="position:absolute;top:126;left:503"><nobr><span class="ft18">15</span></nobr></DIV>
<DIV style="position:absolute;top:165;left:758"><nobr><span class="ft27">SQL<br>KG<br>ExtKG</span></nobr></DIV>
<DIV style="position:absolute;top:216;left:729"><nobr><span class="ft18">Conflicts: 2%</span></nobr></DIV>
<DIV style="position:absolute;top:307;left:530"><nobr><span class="ft5">Figure 4: Execution time for union.</span></nobr></DIV>
<DIV style="position:absolute;top:348;left:571"><nobr><span class="ft18"></span></nobr></DIV>
<DIV style="position:absolute;top:351;left:578"><nobr><span class="ft13">X&lt;200</span></nobr></DIV>
<DIV style="position:absolute;top:348;left:611"><nobr><span class="ft18">(P \ Q);</span></nobr></DIV>
<DIV style="position:absolute;top:453;left:502"><nobr><span class="ft18">Time</span></nobr></DIV>
<DIV style="position:absolute;top:422;left:502"><nobr><span class="ft18">(sec.)</span></nobr></DIV>
<DIV style="position:absolute;top:506;left:577"><nobr><span class="ft18">Conflicts (%)</span></nobr></DIV>
<DIV style="position:absolute;top:494;left:520"><nobr><span class="ft18">0</span></nobr></DIV>
<DIV style="position:absolute;top:494;left:556"><nobr><span class="ft18">1</span></nobr></DIV>
<DIV style="position:absolute;top:494;left:593"><nobr><span class="ft18">2</span></nobr></DIV>
<DIV style="position:absolute;top:494;left:629"><nobr><span class="ft18">3</span></nobr></DIV>
<DIV style="position:absolute;top:494;left:666"><nobr><span class="ft18">4</span></nobr></DIV>
<DIV style="position:absolute;top:494;left:703"><nobr><span class="ft18">5</span></nobr></DIV>
<DIV style="position:absolute;top:482;left:509"><nobr><span class="ft18">0</span></nobr></DIV>
<DIV style="position:absolute;top:449;left:509"><nobr><span class="ft18">1</span></nobr></DIV>
<DIV style="position:absolute;top:415;left:509"><nobr><span class="ft18">2</span></nobr></DIV>
<DIV style="position:absolute;top:381;left:509"><nobr><span class="ft18">3</span></nobr></DIV>
<DIV style="position:absolute;top:420;left:758"><nobr><span class="ft28">SQL<br>QR<br>ExtKG</span></nobr></DIV>
<DIV style="position:absolute;top:471;left:729"><nobr><span class="ft18">DB size: 100k</span></nobr></DIV>
<DIV style="position:absolute;top:562;left:516"><nobr><span class="ft5">Figure 5: Execution time for difference.</span></nobr></DIV>
<DIV style="position:absolute;top:604;left:479"><nobr><span class="ft22"><i>5.2.2</i></span></nobr></DIV>
<DIV style="position:absolute;top:604;left:529"><nobr><span class="ft22"><i>Complex queries</i></span></nobr></DIV>
<DIV style="position:absolute;top:625;left:489"><nobr><span class="ft5">In order to estimate the cost of extending the envelope we</span></nobr></DIV>
<DIV style="position:absolute;top:641;left:475"><nobr><span class="ft5">considered a complex union query</span></nobr></DIV>
<DIV style="position:absolute;top:665;left:496"><nobr><span class="ft5"></span></nobr></DIV>
<DIV style="position:absolute;top:670;left:504"><nobr><span class="ft1">X&lt;d</span></nobr></DIV>
<DIV style="position:absolute;top:665;left:528"><nobr><span class="ft5">(P </span></nobr></DIV>
<DIV style="position:absolute;top:670;left:558"><nobr><span class="ft1">X</span></nobr></DIV>
<DIV style="position:absolute;top:665;left:573"><nobr><span class="ft5">Q </span></nobr></DIV>
<DIV style="position:absolute;top:670;left:597"><nobr><span class="ft1">X</span></nobr></DIV>
<DIV style="position:absolute;top:665;left:612"><nobr><span class="ft5">P </span></nobr></DIV>
<DIV style="position:absolute;top:670;left:636"><nobr><span class="ft1">X</span></nobr></DIV>
<DIV style="position:absolute;top:665;left:650"><nobr><span class="ft5">Q  Q </span></nobr></DIV>
<DIV style="position:absolute;top:670;left:701"><nobr><span class="ft1">X</span></nobr></DIV>
<DIV style="position:absolute;top:665;left:716"><nobr><span class="ft5">P </span></nobr></DIV>
<DIV style="position:absolute;top:670;left:740"><nobr><span class="ft1">X</span></nobr></DIV>
<DIV style="position:absolute;top:665;left:754"><nobr><span class="ft5">Q </span></nobr></DIV>
<DIV style="position:absolute;top:670;left:779"><nobr><span class="ft1">X</span></nobr></DIV>
<DIV style="position:absolute;top:665;left:793"><nobr><span class="ft5">P ),</span></nobr></DIV>
<DIV style="position:absolute;top:690;left:475"><nobr><span class="ft11">with d being a parameter that will allow us to control the<br>number of tuples processed by each engine. To assure no<br>membership queries will be performed, we have to add 8<br>outer joins. The main goal was to compare two versions<br>of knowledge gathering: KG and ExtKG. We have also<br>included the results for SQL. (It should be noted here that<br>this query has common subexpressions and RDBMS might<br>use this to optimize the query evaluation plan. PostgreSQL,<br>however, does not perform this optimization.)</span></nobr></DIV>
<DIV style="position:absolute;top:831;left:489"><nobr><span class="ft5">As we can see in Figure 6, KG outperforms ExtKG only</span></nobr></DIV>
<DIV style="position:absolute;top:847;left:475"><nobr><span class="ft11">in the case when the number of processed tuples is small.<br>As the result size increases, the execution time of ExtKG<br>grows significantly slower than that of KG. We notice also<br>that ExtKG needs 2­3 times more time than SQL but the<br>execution times of both grow in a similar fashion.</span></nobr></DIV>
<DIV style="position:absolute;top:936;left:479"><nobr><span class="ft22"><i>5.2.3</i></span></nobr></DIV>
<DIV style="position:absolute;top:936;left:529"><nobr><span class="ft22"><i>Hypergraph computation</i></span></nobr></DIV>
<DIV style="position:absolute;top:957;left:489"><nobr><span class="ft5">The time of constructing the hypergraph is presented on</span></nobr></DIV>
<DIV style="position:absolute;top:972;left:475"><nobr><span class="ft11">Figure 7). It depends on the total number of conflicts and<br>the size of the database.</span></nobr></DIV>
<DIV style="position:absolute;top:1004;left:489"><nobr><span class="ft5">It should be noticed here that the time of hypergraph con-</span></nobr></DIV>
<DIV style="position:absolute;top:1019;left:475"><nobr><span class="ft11">struction consists mainly of the execution time of conflict<br>detection queries. Therefore the time of hypergraph compu-<br>tation depends also on the number of integrity constraints<br>and their arity.</span></nobr></DIV>
<DIV style="position:absolute;top:1116;left:449"><nobr><span class="ft9">424</span></nobr></DIV>
</DIV>
<!-- Page 9 -->
<a name="9"></a>
<DIV style="position:relative;width:918;height:1188;">
<STYLE type="text/css">
<!--
	.ft29{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft30{font-size:11px;line-height:14px;font-family:Times;color:#000000;}
-->
</STYLE>
<IMG width="918" height="1188" src="54009.png" alt="background image">
<DIV style="position:absolute;top:94;left:134"><nobr><span class="ft13">X&lt;d(P X Q X P X Q  Q X P X Q X P )</span></nobr></DIV>
<DIV style="position:absolute;top:199;left:103"><nobr><span class="ft18">Time</span></nobr></DIV>
<DIV style="position:absolute;top:168;left:103"><nobr><span class="ft18">(sec.)</span></nobr></DIV>
<DIV style="position:absolute;top:251;left:133"><nobr><span class="ft18">Result size estimation (d tuples)</span></nobr></DIV>
<DIV style="position:absolute;top:239;left:125"><nobr><span class="ft18">0</span></nobr></DIV>
<DIV style="position:absolute;top:239;left:158"><nobr><span class="ft18">30</span></nobr></DIV>
<DIV style="position:absolute;top:239;left:194"><nobr><span class="ft18">60</span></nobr></DIV>
<DIV style="position:absolute;top:239;left:229"><nobr><span class="ft18">90</span></nobr></DIV>
<DIV style="position:absolute;top:239;left:262"><nobr><span class="ft18">120</span></nobr></DIV>
<DIV style="position:absolute;top:239;left:298"><nobr><span class="ft18">150</span></nobr></DIV>
<DIV style="position:absolute;top:228;left:114"><nobr><span class="ft18">0</span></nobr></DIV>
<DIV style="position:absolute;top:194;left:108"><nobr><span class="ft18">10</span></nobr></DIV>
<DIV style="position:absolute;top:160;left:108"><nobr><span class="ft18">20</span></nobr></DIV>
<DIV style="position:absolute;top:126;left:108"><nobr><span class="ft18">30</span></nobr></DIV>
<DIV style="position:absolute;top:150;left:363"><nobr><span class="ft27">SQL<br>KG<br>ExtKG</span></nobr></DIV>
<DIV style="position:absolute;top:200;left:334"><nobr><span class="ft18">DB size: 100k</span></nobr></DIV>
<DIV style="position:absolute;top:216;left:334"><nobr><span class="ft18">Conflicts: 2%</span></nobr></DIV>
<DIV style="position:absolute;top:307;left:138"><nobr><span class="ft5">Figure 6: Impact of the result size.</span></nobr></DIV>
<DIV style="position:absolute;top:453;left:109"><nobr><span class="ft18">Time</span></nobr></DIV>
<DIV style="position:absolute;top:422;left:109"><nobr><span class="ft18">(sec.)</span></nobr></DIV>
<DIV style="position:absolute;top:512;left:156"><nobr><span class="ft18">Database size (increments in 1k)</span></nobr></DIV>
<DIV style="position:absolute;top:497;left:130"><nobr><span class="ft18">0</span></nobr></DIV>
<DIV style="position:absolute;top:497;left:165"><nobr><span class="ft18">50</span></nobr></DIV>
<DIV style="position:absolute;top:497;left:200"><nobr><span class="ft18">100</span></nobr></DIV>
<DIV style="position:absolute;top:497;left:238"><nobr><span class="ft18">150</span></nobr></DIV>
<DIV style="position:absolute;top:497;left:275"><nobr><span class="ft18">200</span></nobr></DIV>
<DIV style="position:absolute;top:497;left:313"><nobr><span class="ft18">250</span></nobr></DIV>
<DIV style="position:absolute;top:486;left:119"><nobr><span class="ft18">0</span></nobr></DIV>
<DIV style="position:absolute;top:460;left:119"><nobr><span class="ft18">3</span></nobr></DIV>
<DIV style="position:absolute;top:434;left:119"><nobr><span class="ft18">6</span></nobr></DIV>
<DIV style="position:absolute;top:408;left:119"><nobr><span class="ft18">9</span></nobr></DIV>
<DIV style="position:absolute;top:382;left:113"><nobr><span class="ft18">12</span></nobr></DIV>
<DIV style="position:absolute;top:400;left:345"><nobr><span class="ft18">Conflicts:</span></nobr></DIV>
<DIV style="position:absolute;top:446;left:372"><nobr><span class="ft18">0%</span></nobr></DIV>
<DIV style="position:absolute;top:429;left:372"><nobr><span class="ft18">2%</span></nobr></DIV>
<DIV style="position:absolute;top:412;left:372"><nobr><span class="ft18">4%</span></nobr></DIV>
<DIV style="position:absolute;top:563;left:119"><nobr><span class="ft5">Figure 7: Hypergraph computation time</span></nobr></DIV>
<DIV style="position:absolute;top:605;left:81"><nobr><span class="ft3"><b>6.</b></span></nobr></DIV>
<DIV style="position:absolute;top:605;left:112"><nobr><span class="ft3"><b>RELATED WORK</b></span></nobr></DIV>
<DIV style="position:absolute;top:627;left:94"><nobr><span class="ft5">The discussion of related work here is very brief and fo-</span></nobr></DIV>
<DIV style="position:absolute;top:643;left:81"><nobr><span class="ft11">cuses mainly on the most recent research. For a comprehen-<br>sive discussion, please see [7].</span></nobr></DIV>
<DIV style="position:absolute;top:674;left:94"><nobr><span class="ft5">Bry [10] was the first to note that the standard notion of</span></nobr></DIV>
<DIV style="position:absolute;top:690;left:81"><nobr><span class="ft11">query answer needs to be modified in the context of incon-<br>sistent databases and to propose the notion of a consistent<br>query answer. Bry's definition of consistent query answer is<br>based on provability in minimal logic and expresses the in-<br>tuition that the part of the database instance involved in an<br>integrity violation should not be involved in the derivation<br>of consistent query answers. This is not quite satisfactory, as<br>one would like to have a semantic, model-theoretic notion of<br>consistent query answer that parallels that of the standard<br>notion of query answer in relational databases. Moreover,<br>the data involved in an integrity violation is not entirely<br>useless and reliable indefinite information can often be ex-<br>tracted from it, as seen in Example 1.</span></nobr></DIV>
<DIV style="position:absolute;top:894;left:94"><nobr><span class="ft5">Query rewriting [2, 12] rewrites the original query Q to</span></nobr></DIV>
<DIV style="position:absolute;top:910;left:81"><nobr><span class="ft11">another query Q with the property that the set of all the<br>answers to Q in the original database is equal to the set<br>of consistent answers to Q in that database. When ap-<br>plicable, this approach provides an easy way to compute<br>consistent query answers, as the rewritten query Q can<br>typically be evaluated using the same query engine as the<br>query Q. Because the query Q is rewritten independently<br>of the database, the existence of a rewriting shows that re-<br>questing consistent query answers instead of the regular ones<br>does not increase data complexity. However, query rewrit-<br>ing has been found to apply only to restricted classes of</span></nobr></DIV>
<DIV style="position:absolute;top:81;left:475"><nobr><span class="ft5">queries: the</span></nobr></DIV>
<DIV style="position:absolute;top:78;left:552"><nobr><span class="ft5">{, ×, \}-subset [2] or the {, }-subset [13] of</span></nobr></DIV>
<DIV style="position:absolute;top:97;left:475"><nobr><span class="ft11">the relational algebra. No method is presently known to<br>rewrite queries with projection considered together with the<br>binary operators, or union. Also, the class of constraints<br>is limited to binary universal constraints [2] or single func-<br>tional dependencies [13]. The line of research from [2] is con-<br>tinued in [17] where a class of tractable conjunctive queries,<br>based on generalized perfect matching, is identified. It is<br>proved that the consistent answers to queries in this class<br>cannot be obtained by query rewriting. We note here that<br>the nonexistence of query rewriting for conjunctive queries<br>follows also from the fact that computing consistent query<br>answers for such queries is a co-NP-complete problem [4,<br>13]. This is because the rewritten query is first-order and<br>thus can be evaluated in AC</span></nobr></DIV>
<DIV style="position:absolute;top:296;left:656"><nobr><span class="ft1">0</span></nobr></DIV>
<DIV style="position:absolute;top:301;left:663"><nobr><span class="ft5">, while known NP-complete</span></nobr></DIV>
<DIV style="position:absolute;top:317;left:475"><nobr><span class="ft5">problems like SAT are not in AC</span></nobr></DIV>
<DIV style="position:absolute;top:312;left:676"><nobr><span class="ft1">0</span></nobr></DIV>
<DIV style="position:absolute;top:317;left:682"><nobr><span class="ft5">.</span></nobr></DIV>
<DIV style="position:absolute;top:332;left:489"><nobr><span class="ft5">Several different approaches have been developed to spec-</span></nobr></DIV>
<DIV style="position:absolute;top:348;left:475"><nobr><span class="ft11">ify all repairs of a database as a logic program with dis-<br>junction and classical negation [3, 6, 15, 18, 19, 22]. Such a<br>program can then be evaluated using an existing system like<br>dlv [14]. These approaches have the advantage of generality,<br>as typically arbitrary first-order queries and universal con-<br>straints (or even some referential integrity constraints [3])<br>can be handled. However, the generality comes at a price:<br>The classes of logic programs used are </span></nobr></DIV>
<DIV style="position:absolute;top:455;left:719"><nobr><span class="ft1">p</span></nobr></DIV>
<DIV style="position:absolute;top:462;left:719"><nobr><span class="ft1">2</span></nobr></DIV>
<DIV style="position:absolute;top:458;left:726"><nobr><span class="ft5">-complete. There-</span></nobr></DIV>
<DIV style="position:absolute;top:474;left:475"><nobr><span class="ft11">fore, the approaches based on logic programming are un-<br>likely to work for large databases. The paper [15] proposes<br>several optimizations that are applicable to logic program-<br>ming approaches. One is localization of conflict resolution,<br>another - encoding tuple membership in individual repairs<br>using bit-vectors, which makes possible efficient computa-<br>tion of consistent query answers using bitwise operators.<br>However, it is known that even in the presence of one func-<br>tional dependency there may be exponentially many repairs<br>[4]. With only 80 tuples involved in conflicts, the number<br>of repairs may exceed 10</span></nobr></DIV>
<DIV style="position:absolute;top:626;left:625"><nobr><span class="ft1">12</span></nobr></DIV>
<DIV style="position:absolute;top:631;left:637"><nobr><span class="ft5">! It is clearly impractical to effi-</span></nobr></DIV>
<DIV style="position:absolute;top:646;left:475"><nobr><span class="ft5">ciently manipulate bit-vectors of that size.</span></nobr></DIV>
<DIV style="position:absolute;top:662;left:489"><nobr><span class="ft5">[11] describes several possible definitions of repair, includ-</span></nobr></DIV>
<DIV style="position:absolute;top:678;left:475"><nobr><span class="ft11">ing Definition 5, and analyzes the complexity of computing<br>consistent query answers under those definitions. Key and<br>inclusion dependencies are considered. The computational<br>approaches proposed are based on combinations of repair<br>enumeration and chase computation [1]. New tractability<br>results are obtained for classes of databases that satisfy key<br>constraints but may violate inclusion dependencies.</span></nobr></DIV>
<DIV style="position:absolute;top:788;left:489"><nobr><span class="ft5">Presently, our approach requires that the integrated</span></nobr></DIV>
<DIV style="position:absolute;top:803;left:475"><nobr><span class="ft11">database be materialized at a single site. It remains to be<br>seen if it can be generalized to a scenario where data is pulled<br>from different sites during the evaluation of queries rewritten<br>using, for example, the LAV approach [20]. This problem<br>has been considered in the context of a logic-program-based<br>approach to the computation of consistent query answers [8,<br>9] but, as explained earlier, such an approach does not scale<br>up to large databases.</span></nobr></DIV>
<DIV style="position:absolute;top:929;left:489"><nobr><span class="ft5">A new scenario for data integration, data exchange, has</span></nobr></DIV>
<DIV style="position:absolute;top:944;left:475"><nobr><span class="ft5">been recently proposed [16].</span></nobr></DIV>
<DIV style="position:absolute;top:944;left:671"><nobr><span class="ft5">In this scenario, a target</span></nobr></DIV>
<DIV style="position:absolute;top:960;left:475"><nobr><span class="ft11">database is materialized on the basis of a source database us-<br>ing source-to-target dependencies. In the presence of target<br>integrity constraints, a suitable consistent target database<br>may not exist. This is a natural context for the application<br>of the concepts of repair and consistent query answer. How-<br>ever, [16] does not consider the issue of the inconsistency of<br>target databases. [11] addresses the problem of consistent<br>query answering in a restricted data exchange setting.</span></nobr></DIV>
<DIV style="position:absolute;top:1116;left:449"><nobr><span class="ft9">425</span></nobr></DIV>
</DIV>
<!-- Page 10 -->
<a name="10"></a>
<DIV style="position:relative;width:918;height:1188;">
<STYLE type="text/css">
<!--
	.ft31{font-size:8px;line-height:11px;font-family:Times;color:#000000;}
-->
</STYLE>
<IMG width="918" height="1188" src="54010.png" alt="background image">
<DIV style="position:absolute;top:84;left:81"><nobr><span class="ft3"><b>7.</b></span></nobr></DIV>
<DIV style="position:absolute;top:84;left:112"><nobr><span class="ft3"><b>CONCLUSIONS AND FUTURE WORK</b></span></nobr></DIV>
<DIV style="position:absolute;top:106;left:94"><nobr><span class="ft5">In this paper, we have presented a practical, scalable</span></nobr></DIV>
<DIV style="position:absolute;top:121;left:81"><nobr><span class="ft11">framework for computing consistent query answers for large<br>databases. We have also described a number of novel opti-<br>mization techniques applicable in this context and summa-<br>rized experimental results that validate our approach.</span></nobr></DIV>
<DIV style="position:absolute;top:184;left:94"><nobr><span class="ft5">The approach, however, has a number of limitations. Only</span></nobr></DIV>
<DIV style="position:absolute;top:200;left:81"><nobr><span class="ft11">projection-free relational algebra queries and denial integrity<br>constraints are currently supported. Adding projection to<br>the query language is a difficult issue because the complexity<br>of computing consistent query answers becomes in that case<br>co-NP-complete [4, 13]. So, unless P=NP, we cannot hope<br>for computing consistent query answers efficiently for arbi-<br>trary conjunctive queries and arbitrary database instances.<br>However, the evaluation of queries with projection can make<br>use of the conflict hypergraph representation of all repairs,<br>and of the operators F and G introduced in Section 3. More-<br>over, we expect to be able to compute consistent answers to<br>queries with projection in polynomial time if conflict hyper-<br>graphs are suitably restricted. We hope that such restric-<br>tions can be translated into corresponding restrictions on<br>database instances and integrity constraints.</span></nobr></DIV>
<DIV style="position:absolute;top:435;left:94"><nobr><span class="ft5">In [4], we have studied scalar aggregation queries in the</span></nobr></DIV>
<DIV style="position:absolute;top:451;left:81"><nobr><span class="ft11">presence of functional dependencies, also making use of con-<br>flict graphs. It remains to be seen whether the techniques<br>developed in [4] can be combined with those of the present<br>paper.</span></nobr></DIV>
<DIV style="position:absolute;top:514;left:94"><nobr><span class="ft5">Going beyond denial constraints appears challenging, too.</span></nobr></DIV>
<DIV style="position:absolute;top:529;left:81"><nobr><span class="ft11">Essentially, integrity violations of denial constraints are due<br>to the presence of some facts in the database, and thus can<br>be compactly represented using the conflict hypergraph. If<br>arbitrary universal constraints, for example tuple-generating<br>dependencies [1, 21], are allowed, constraint violations may<br>be due to the simultaneous presence and absence of certain<br>tuples in the database. It is not clear how to construct in<br>this case a compact representation of all repairs that can<br>be used for the computation of consistent query answers.<br>Also, repairs are no longer guaranteed to be subsets of the<br>original database but can contain additional tuples. If refer-<br>ential integrity is to be captured, constraints have to contain<br>existentially quantified variables, which leads to the unde-<br>cidability of consistent query answers [11]. Only in very re-<br>stricted cases this problem has been shown to be tractable<br>[11, 13].</span></nobr></DIV>
<DIV style="position:absolute;top:780;left:94"><nobr><span class="ft5">Another avenue of further research involves using prefer-</span></nobr></DIV>
<DIV style="position:absolute;top:796;left:81"><nobr><span class="ft11">ences to reduce the number of repairs and consequently make<br>the computation of consistent query answers more efficient.<br>For example, in data integration, we may have a preference<br>for certain sources or for more recent information.</span></nobr></DIV>
<DIV style="position:absolute;top:859;left:94"><nobr><span class="ft5">The issue of benchmarking systems that compute con-</span></nobr></DIV>
<DIV style="position:absolute;top:875;left:81"><nobr><span class="ft5">sistent query answers requires more work.</span></nobr></DIV>
<DIV style="position:absolute;top:875;left:364"><nobr><span class="ft5">It would be</span></nobr></DIV>
<DIV style="position:absolute;top:890;left:81"><nobr><span class="ft11">desirable to design mechanisms that generate inconsistent<br>databases in a systematic way and to perform more ex-<br>tensive experimental comparisons between implemented sys-<br>tems.</span></nobr></DIV>
<DIV style="position:absolute;top:993;left:81"><nobr><span class="ft3"><b>8.</b></span></nobr></DIV>
<DIV style="position:absolute;top:993;left:112"><nobr><span class="ft3"><b>REFERENCES</b></span></nobr></DIV>
<DIV style="position:absolute;top:1019;left:89"><nobr><span class="ft18">[1] S. Abiteboul, R. Hull, and V. Vianu. Foundations of</span></nobr></DIV>
<DIV style="position:absolute;top:1031;left:109"><nobr><span class="ft18">Databases. Addison-Wesley, 1995.</span></nobr></DIV>
<DIV style="position:absolute;top:1045;left:89"><nobr><span class="ft18">[2] M. Arenas, L. Bertossi, and J. Chomicki. Consistent Query</span></nobr></DIV>
<DIV style="position:absolute;top:1057;left:109"><nobr><span class="ft31">Answers in Inconsistent Databases. In ACM Symposium on<br>Principles of Database Systems (PODS), pages 68­79, 1999.</span></nobr></DIV>
<DIV style="position:absolute;top:88;left:484"><nobr><span class="ft18">[3] M. Arenas, L. Bertossi, and J. Chomicki. Answer Sets for</span></nobr></DIV>
<DIV style="position:absolute;top:100;left:503"><nobr><span class="ft31">Consistent Query Answering in Inconsistent Databases. Theory<br>and Practice of Logic Programming, 3(4­5):393­424, 2003.</span></nobr></DIV>
<DIV style="position:absolute;top:126;left:484"><nobr><span class="ft18">[4] M. Arenas, L. Bertossi, J. Chomicki, X. He, V. Raghavan, and</span></nobr></DIV>
<DIV style="position:absolute;top:138;left:503"><nobr><span class="ft31">J. Spinrad. Scalar Aggregation in Inconsistent Databases.<br>Theoretical Computer Science, 296(3):405­434, 2003.</span></nobr></DIV>
<DIV style="position:absolute;top:163;left:484"><nobr><span class="ft18">[5] M. Arenas, L. Bertossi, and M. Kifer. Applications of</span></nobr></DIV>
<DIV style="position:absolute;top:175;left:503"><nobr><span class="ft31">Annotated Predicate Calculus to Querying Inconsistent<br>Databases. In International Conference on Computational<br>Logic, pages 926­941. Springer-Verlag, LNCS 1861, 2000.</span></nobr></DIV>
<DIV style="position:absolute;top:212;left:484"><nobr><span class="ft18">[6] P. Barcelo and L. Bertossi. Logic Programs for Querying</span></nobr></DIV>
<DIV style="position:absolute;top:224;left:503"><nobr><span class="ft31">Inconsistent Databases. In International Symposium on<br>Practical Aspects of Declarative Languages (PADL), pages<br>208­222. Springer-Verlag, LNCS 2562, 2003.</span></nobr></DIV>
<DIV style="position:absolute;top:262;left:484"><nobr><span class="ft18">[7] L. Bertossi and J. Chomicki. Query Answering in Inconsistent</span></nobr></DIV>
<DIV style="position:absolute;top:274;left:503"><nobr><span class="ft31">Databases. In J. Chomicki, R. van der Meyden, and G. Snake,<br>editors, Logics for Emerging Applications of Databases, pages<br>43­83. Springer-Verlag, 2003.</span></nobr></DIV>
<DIV style="position:absolute;top:311;left:484"><nobr><span class="ft18">[8] L. Bertossi, J. Chomicki, A. Cortes, and C. Gutierrez.</span></nobr></DIV>
<DIV style="position:absolute;top:323;left:503"><nobr><span class="ft31">Consistent Answers from Integrated Data Sources. In<br>International Conference on Flexible Query Answering<br>Systems (FQAS), pages 71­85, Copenhagen, Denmark,<br>October 2002. Springer-Verlag.</span></nobr></DIV>
<DIV style="position:absolute;top:372;left:484"><nobr><span class="ft18">[9] L. Bravo and L. Bertossi. Logic Programs for Consistently</span></nobr></DIV>
<DIV style="position:absolute;top:384;left:503"><nobr><span class="ft31">Querying Data Integration Systems. In International Joint<br>Conference on Artificial Intelligence (IJCAI), pages 10­15,<br>2003.</span></nobr></DIV>
<DIV style="position:absolute;top:422;left:478"><nobr><span class="ft18">[10] F. Bry. Query Answering in Information Systems with</span></nobr></DIV>
<DIV style="position:absolute;top:434;left:503"><nobr><span class="ft31">Integrity Constraints. In IFIP WG 11.5 Working Conference<br>on Integrity and Control in Information Systems, pages<br>113­130. Chapman &amp;Hall, 1997.</span></nobr></DIV>
<DIV style="position:absolute;top:471;left:478"><nobr><span class="ft18">[11] A. Cali, D. Lembo, and R. Rosati. On the Decidability and</span></nobr></DIV>
<DIV style="position:absolute;top:483;left:503"><nobr><span class="ft31">Complexity of Query Answering over Inconsistent and<br>Incomplete Databases. In ACM Symposium on Principles of<br>Database Systems (PODS), pages 260­271, 2003.</span></nobr></DIV>
<DIV style="position:absolute;top:520;left:478"><nobr><span class="ft18">[12] A. Celle and L. Bertossi. Querying Inconsistent Databases:</span></nobr></DIV>
<DIV style="position:absolute;top:532;left:503"><nobr><span class="ft31">Algorithms and Implementation. In International Conference<br>on Computational Logic, pages 942­956. Springer-Verlag,<br>LNCS 1861, 2000.</span></nobr></DIV>
<DIV style="position:absolute;top:570;left:478"><nobr><span class="ft18">[13] J. Chomicki and J. Marcinkowski. Minimal-Change Integrity</span></nobr></DIV>
<DIV style="position:absolute;top:582;left:503"><nobr><span class="ft31">Maintenance Using Tuple Deletions. Information and<br>Computation, 2004. To appear. Earlier version: Technical<br>Report cs.DB/0212004, arXiv.org e-Print archive.</span></nobr></DIV>
<DIV style="position:absolute;top:619;left:478"><nobr><span class="ft18">[14] T. Eiter, W. Faber, N. Leone, and G. Pfeifer. Declarative</span></nobr></DIV>
<DIV style="position:absolute;top:631;left:503"><nobr><span class="ft31">Problem-Solving in DLV. In J. Minker, editor, Logic-Based<br>Artificial Intelligence, pages 79­103. Kluwer, 2000.</span></nobr></DIV>
<DIV style="position:absolute;top:656;left:478"><nobr><span class="ft18">[15] T. Eiter, M. Fink, G. Greco, and D. Lembo. Efficient</span></nobr></DIV>
<DIV style="position:absolute;top:668;left:503"><nobr><span class="ft31">Evaluation of Logic Programs for Querying Data Integration<br>Systems. In International Conference on Logic Programming<br>(ICLP), pages 163­177, 2003.</span></nobr></DIV>
<DIV style="position:absolute;top:706;left:478"><nobr><span class="ft18">[16] R. Fagin, P. G. Kolaitis, R. J. Miller, and L. Popa. Data</span></nobr></DIV>
<DIV style="position:absolute;top:718;left:503"><nobr><span class="ft31">Exchange: Semantics and Query Answering. In International<br>Conference on Database Theory (ICDT), pages 207­224.<br>Springer-Verlag, LNCS 2572, 2003.</span></nobr></DIV>
<DIV style="position:absolute;top:755;left:478"><nobr><span class="ft18">[17] A. Fuxman and R. Miller. Towards Inconsistency Management</span></nobr></DIV>
<DIV style="position:absolute;top:767;left:503"><nobr><span class="ft31">in Data Integration Systems. In IJCAI-03 Workshop on<br>Information Integration on the Web (IIWeb-03), 2003.</span></nobr></DIV>
<DIV style="position:absolute;top:792;left:478"><nobr><span class="ft18">[18] G. Greco, S. Greco, and E. Zumpano. A Logic Programming</span></nobr></DIV>
<DIV style="position:absolute;top:804;left:503"><nobr><span class="ft31">Approach to the Integration, Repairing and Querying of<br>Inconsistent Databases. In International Conference on Logic<br>Programming (ICLP), pages 348­364. Springer-Verlag, LNCS<br>2237, 2001.</span></nobr></DIV>
<DIV style="position:absolute;top:853;left:478"><nobr><span class="ft18">[19] G. Greco, S. Greco, and E. Zumpano. A Logical Framework for</span></nobr></DIV>
<DIV style="position:absolute;top:865;left:503"><nobr><span class="ft31">Querying and Repairing Inconsistent Databases. IEEE<br>Transactions on Knowledge and Data Engineering,<br>15(6):1389­1408, 2003.</span></nobr></DIV>
<DIV style="position:absolute;top:903;left:478"><nobr><span class="ft18">[20] A. Y. Halevy. Answering Queries Using Views: A Survey.</span></nobr></DIV>
<DIV style="position:absolute;top:915;left:503"><nobr><span class="ft18">VLDB Journal, 10(4):270­294, 2001.</span></nobr></DIV>
<DIV style="position:absolute;top:928;left:478"><nobr><span class="ft18">[21] P. C. Kanellakis. Elements of Relational Database Theory. In</span></nobr></DIV>
<DIV style="position:absolute;top:940;left:503"><nobr><span class="ft31">Jan van Leeuwen, editor, Handbook of Theoretical Computer<br>Science, volume B, chapter 17, pages 1073­1158. Elsevier/MIT<br>Press, 1990.</span></nobr></DIV>
<DIV style="position:absolute;top:978;left:478"><nobr><span class="ft18">[22] D. Van Nieuwenborgh and D. Vermeir. Preferred Answer Sets</span></nobr></DIV>
<DIV style="position:absolute;top:989;left:503"><nobr><span class="ft31">for Ordered Logic Programs. In European Conference on<br>Logics for Artificial Intelligence (JELIA), pages 432­443.<br>Springer-Verlag, LNAI 2424, 2002.</span></nobr></DIV>
<DIV style="position:absolute;top:1027;left:478"><nobr><span class="ft18">[23] J. Wijsen. Condensed Representation of Database Repairs for</span></nobr></DIV>
<DIV style="position:absolute;top:1039;left:503"><nobr><span class="ft31">Consistent Query Answering. In International Conference on<br>Database Theory (ICDT), pages 378­393. Springer-Verlag,<br>LNCS 2572, 2003.</span></nobr></DIV>
<DIV style="position:absolute;top:1116;left:449"><nobr><span class="ft9">426</span></nobr></DIV>
</DIV>
</BODY>
</HTML>
