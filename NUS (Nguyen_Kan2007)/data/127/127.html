<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
<TITLE>D:\Paper\HTML\127</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="generator" content="pdftohtml 0.35beta">
<META name="date" content="2001-07-18T11:17:01+00:00">
</HEAD>
<BODY bgcolor="#A0A0A0" vlink="blue" link="blue">
<!-- Page 1 -->
<a name="1"></a>
<DIV style="position:relative;width:918;height:1188;">
<STYLE type="text/css">
<!--
	.ft0{font-size:5px;font-family:Times;color:#000000;}
	.ft1{font-size:7px;font-family:Times;color:#000000;}
	.ft2{font-size:16px;font-family:Times;color:#000000;}
	.ft3{font-size:13px;font-family:Times;color:#000000;}
	.ft4{font-size:11px;font-family:Times;color:#000000;}
	.ft5{font-size:11px;font-family:Times;color:#000000;}
	.ft6{font-size:11px;font-family:Times;color:#000000;}
	.ft7{font-size:25px;font-family:Times;color:#000000;}
	.ft8{font-size:16px;font-family:Times;color:#000000;}
	.ft9{font-size:10px;font-family:Times;color:#000000;}
	.ft10{font-size:12px;font-family:Times;color:#000000;}
	.ft11{font-size:16px;font-family:Courier;color:#000000;}
	.ft12{font-size:16px;font-family:Times;color:#000000;}
	.ft13{font-size:7px;line-height:9px;font-family:Times;color:#000000;}
	.ft14{font-size:11px;line-height:14px;font-family:Times;color:#000000;}
	.ft15{font-size:11px;line-height:15px;font-family:Times;color:#000000;}
	.ft16{font-size:10px;line-height:14px;font-family:Times;color:#000000;}
-->
</STYLE>
<IMG width="918" height="1188" src="127001.png" alt="background image">
<DIV style="position:absolute;top:909;left:82"><nobr><span class="ft0"> </span></nobr></DIV>
<DIV style="position:absolute;top:912;left:88"><nobr><span class="ft1">2550 Garcia Avenue, MTV18-212</span></nobr></DIV>
<DIV style="position:absolute;top:921;left:82"><nobr><span class="ft13">Mountain View, CA 94043-1100<br>michael.deering@Eng.Sun.COM</span></nobr></DIV>
<DIV style="position:absolute;top:930;left:216"><nobr><span class="ft1">(415)336-3017</span></nobr></DIV>
<DIV style="position:absolute;top:939;left:82"><nobr><span class="ft1">scott.nelson@Eng.Sun.COM</span></nobr></DIV>
<DIV style="position:absolute;top:939;left:216"><nobr><span class="ft1">(415)336-3106</span></nobr></DIV>
<DIV style="position:absolute;top:337;left:81"><nobr><span class="ft2"><b>ABSTRACT</b></span></nobr></DIV>
<DIV style="position:absolute;top:364;left:81"><nobr><span class="ft14">A physically compact, low cost, high performance 3D graphics ac-<br>celerator is presented. It supports shaded rendering of triangles and<br>antialiased lines into a double-buffered 24-bit true color frame buf-<br>fer with a 24-bit Z-buffer. Nearly the only chips used besides stan-<br>dard memory parts are 11 ASICs (of four types). Special geometry<br>data reformatting hardware on one ASIC greatly speeds and simpli-<br>fies the data input pipeline. Floating-point performance is enhanced<br>by another ASIC: a custom graphics microprocessor, with special-<br>ized graphics instructions and features. Screen primitive rasteriza-<br>tion is carried out in parallel by five drawing ASICs, employing a<br>new partitioning of the back-end rendering task. For typical render-<br>ing cases, the only system performance bottleneck is that intrinsi-<br>cally imposed by VRAM.</span></nobr></DIV>
<DIV style="position:absolute;top:577;left:81"><nobr><span class="ft2"><b>Categories and Subject Descriptors:</b></span></nobr></DIV>
<DIV style="position:absolute;top:577;left:311"><nobr><span class="ft4"> C.1.2 [Processor Archi-</span></nobr></DIV>
<DIV style="position:absolute;top:592;left:81"><nobr><span class="ft15">tectures]: Multiprocessors; I.3.1 [Computer Graphics]: Hardware<br>Architecture; I.3.3 [Computer Graphics]: Picture/Image Generation<br><i>Display algorithms</i>; I.3.7 [Computer Graphics]: Three Dimension-<br>al Graphics and Realism.</span></nobr></DIV>
<DIV style="position:absolute;top:658;left:81"><nobr><span class="ft5"><b>Additional Keywords and Phrases:</b></span></nobr></DIV>
<DIV style="position:absolute;top:658;left:286"><nobr><span class="ft4"> 3D graphics hardware, ren-</span></nobr></DIV>
<DIV style="position:absolute;top:673;left:81"><nobr><span class="ft14">dering, parallel graphics algorithms, gouraud shading, antialiased<br>lines, floating-point microprocessors.</span></nobr></DIV>
<DIV style="position:absolute;top:723;left:102"><nobr><span class="ft2"><b>1 INTRODUCTION</b></span></nobr></DIV>
<DIV style="position:absolute;top:748;left:81"><nobr><span class="ft14">To expand the role of 3D graphics in the mainstream computer in-<br>dustry, cost effective, physically small, usable performance 3D<br>shaded graphics architectures must be developed. For such systems,<br>new features and sheer performance at any price can no longer be<br>the driving force behind the architecture; instead, the focus must be<br>on affordable desktop systems.</span></nobr></DIV>
<DIV style="position:absolute;top:843;left:81"><nobr><span class="ft14">The historical approach to achieving low cost in 3D graphics sys-<br>tems has been to compromise both performance and image quality.<br>But now, falling memory component prices are bringing nearly ideal</span></nobr></DIV>
<DIV style="position:absolute;top:337;left:477"><nobr><span class="ft14">frame buffers into the price range of the volume market: double<br>buffered 24-bit color with a 24-bit Z-buffer. The challenge is to drive<br>these memory chips at their maximum rate with a minimum of sup-<br>porting rendering chips, keeping the total system cost and physical<br>size to an absolute minimum. To achieve this, graphics architectures<br>must be repartitioned to reduce chip count and internal bus sizes,<br>while still supporting existing 2D and 3D functionality.</span></nobr></DIV>
<DIV style="position:absolute;top:448;left:477"><nobr><span class="ft14">This paper describes a new 3D graphics system, Leo, designed to<br>these philosophies. For typical cases, Leo's only performance limit<br>is that intrinsically imposed by VRAM. This was achieved by a<br>combination of new architectural techniques and advances in VLSI<br>technology. The result is a system without performance or image<br>quality compromises, at an affordable cost and small physical size.<br>The Leo board set is about the size of one and a half paperback nov-<br>els; the complete workstation is slightly larger than two copies of<br>Foley and Van Dam [7]. Leo supports both the traditional require-<br>ments of the 2D X window system and the needs of 3D rendering:<br>shaded triangles, antialiased vectors, etc.</span></nobr></DIV>
<DIV style="position:absolute;top:633;left:503"><nobr><span class="ft2"><b>2 ARCHITECTURAL ALTERNATIVES</b></span></nobr></DIV>
<DIV style="position:absolute;top:658;left:477"><nobr><span class="ft14">A generic pipeline for 3D shaded graphics is shown in Figure 1. ([7]<br>Chapter 18 is a good overview of 3D graphics hardware pipeline is-<br>sues.) This pipeline is truly generic, as at the top level nearly every<br>commercial 3D graphics accelerator fits this abstraction. Where in-<br>dividual systems differ is in the partitioning of this rendering pipe-<br>line, especially in how they employ parallelism. Two major areas<br>have been subject to separate optimization: the floating-point inten-<br>sive initial stages of processing up to, and many times including,<br>primitive set-up; and the drawing-intensive operation of generating<br>pixels within a primitive and Z-buffering them into the frame buffer.</span></nobr></DIV>
<DIV style="position:absolute;top:813;left:477"><nobr><span class="ft14">For low end accelerators, only portions of the pixel drawing stages<br>of the pipeline are in hardware; the floating-point intensive parts of<br>the pipe are processed by the host in software. As general purpose<br>processors increase in floating-point power, such systems are start-<br>ing to support interesting rendering rates, while minimizing cost<br>[8]. But, beyond some limit, support of higher performance requires<br>dedicated hardware for the entire pipeline.</span></nobr></DIV>
<DIV style="position:absolute;top:923;left:477"><nobr><span class="ft14">There are several choices available for partitioning the floating-<br>point intensive stages. Historically, older systems performed these<br>tasks in a serial fashion [2]. In time though, breaking the pipe into<br>more pieces for more parallelism (and thus performance) meant<br>that each section was devoting more and more of its time to I/O<br>overhead rather than to real work. Also, computational variance<br>meant that many portions of the pipe would commonly be idle<br>while others were overloaded. This led to the data parallel designs<br>of most recent 3D graphics architectures [12].</span></nobr></DIV>
<DIV style="position:absolute;top:101;left:270"><nobr><span class="ft7"><b>Leo: A System for Cost Effective</b></span></nobr></DIV>
<DIV style="position:absolute;top:145;left:340"><nobr><span class="ft7"><b>3D Shaded Graphics</b></span></nobr></DIV>
<DIV style="position:absolute;top:225;left:333"><nobr><span class="ft8"><i>Michael F Deering, Scott R Nelson</i></span></nobr></DIV>
<DIV style="position:absolute;top:245;left:306"><nobr><span class="ft8"><i>Sun Microsystems Computer Corporation</i></span></nobr></DIV>
<DIV style="position:absolute;top:247;left:608"><nobr><span class="ft1"></span></nobr></DIV>
<DIV style="position:absolute;top:971;left:81"><nobr><span class="ft9">Permission to copy without fee all or part of this material is granted </span></nobr></DIV>
<DIV style="position:absolute;top:984;left:81"><nobr><span class="ft16">provided that the copies are not made or distributed for direct  <br>commercial advantage, the ACM copyright notice and the title of the </span></nobr></DIV>
<DIV style="position:absolute;top:1012;left:81"><nobr><span class="ft9">publication and its date appear, and notice is given that copying is by </span></nobr></DIV>
<DIV style="position:absolute;top:1026;left:81"><nobr><span class="ft9">permission of the Association for Computing Machinery.  To copy </span></nobr></DIV>
<DIV style="position:absolute;top:1039;left:81"><nobr><span class="ft16">otherwise, or to republish, requires a fee and/or specific permission. <br>©1993  ACM-0-89791-601-8/93/008/0015...$1.50</span></nobr></DIV>
<DIV style="position:absolute;top:1052;left:328"><nobr><span class="ft10"> </span></nobr></DIV>
<DIV style="position:absolute;top:971;left:79"><nobr><span class="ft9">Permission to copy without fee all or part of this material is granted </span></nobr></DIV>
<DIV style="position:absolute;top:984;left:79"><nobr><span class="ft16">provided that the copies are not made or distributed for direct  <br>commercial advantage, the ACM copyright notice and the title of the </span></nobr></DIV>
<DIV style="position:absolute;top:1012;left:79"><nobr><span class="ft9">publication and its date appear, and notice is given that copying is by </span></nobr></DIV>
<DIV style="position:absolute;top:1026;left:79"><nobr><span class="ft9">permission of the Association for Computing Machinery.  To copy </span></nobr></DIV>
<DIV style="position:absolute;top:1039;left:79"><nobr><span class="ft16">otherwise, or to republish, requires a fee and/or specific permission. <br>©1993  ACM-0-89791-601-8/93/008...$1.50</span></nobr></DIV>
<DIV style="position:absolute;top:1052;left:299"><nobr><span class="ft10"> </span></nobr></DIV>
<DIV style="position:absolute;top:1134;left:446"><nobr><span class="ft12">101</span></nobr></DIV>
</DIV>
<!-- Page 2 -->
<a name="2"></a>
<DIV style="position:relative;width:918;height:1188;">
<STYLE type="text/css">
<!--
	.ft17{font-size:16px;font-family:Helvetica;color:#000000;}
	.ft18{font-size:13px;font-family:Helvetica;color:#000000;}
	.ft19{font-size:7px;font-family:Helvetica;color:#000000;}
	.ft20{font-size:10px;font-family:Helvetica;color:#000000;}
	.ft21{font-size:10px;font-family:Helvetica;color:#000000;}
	.ft22{font-size:16px;font-family:Helvetica;color:#000000;}
	.ft23{font-size:16px;line-height:19px;font-family:Helvetica;color:#000000;}
	.ft24{font-size:13px;line-height:15px;font-family:Helvetica;color:#000000;}
	.ft25{font-size:11px;line-height:13px;font-family:Times;color:#000000;}
	.ft26{font-size:10px;line-height:12px;font-family:Helvetica;color:#000000;}
-->
</STYLE>
<IMG width="918" height="1188" src="127002.png" alt="background image">
<DIV style="position:absolute;top:675;left:81"><nobr><span class="ft14">Here the concept is that multiple parallel computation units can<br>each process the entire floating-point intensive task, working in par-<br>allel on different parts of the scene to be rendered. This allows each<br>pipe to be given a large task to chew on, minimizing handshake<br>overhead. But now there is a different load balancing problem. If<br>one pipe has an extra large task, the other parallel pipes may go idle<br>waiting for their slowest peer, if the common requirement of in-or-<br>der execution of tasks is to be maintained. Minor load imbalances<br>can be averaged out by adding FIFO buffers to the inputs and out-<br>puts of the parallel pipes. Limiting the maximum size of task given<br>to any one pipe also limits the maximum imbalance, at the expense<br>of further fragmenting the tasks and inducing additional overhead.</span></nobr></DIV>
<DIV style="position:absolute;top:860;left:81"><nobr><span class="ft14">But the most severe performance bottleneck lies in the pixel draw-<br>ing back-end. The most fundamental constraint on 3D computer<br>graphics architecture over the last ten years has been the memory<br>chips that comprise the frame buffer. Several research systems have<br>attempted to avoid this bottleneck by various techniques [10][4][8],<br>but all commercial workstation systems use conventional Z-buffer<br>rendering algorithms into standard VRAMs or DRAMs. How this<br>RAM is organized is an important defining feature of any high per-<br>formance rendering system.</span></nobr></DIV>
<DIV style="position:absolute;top:1013;left:81"><nobr><span class="ft2"><b>3 LEO OVERVIEW</b></span></nobr></DIV>
<DIV style="position:absolute;top:1040;left:81"><nobr><span class="ft14">Figure 2 is a diagram of the Leo system. This figure is <i>not</i> just a<br>block diagram; it is also a <i>chip level</i> diagram, as every chip in the</span></nobr></DIV>
<DIV style="position:absolute;top:918;left:477"><nobr><span class="ft14">system is shown in this diagram. All input data and window system<br>interactions enter through the LeoCommand chip. Geometry data is<br>reformatted in this chip before being distributed to the array of Leo-<br>Float chips below. The LeoFloat chips are microcoded specialized<br>DSP-like processors that tackle the floating-point intensive stages<br>of the rendering pipeline. The LeoDraw chips handle all screen<br>space pixel rendering and are directly connected to the frame buffer<br>RAM chips. LeoCross handles the back-end color look-up tables,<br>double buffering, and video timing, passing the final digital pixel<br>values to the RAMDAC.</span></nobr></DIV>
<DIV style="position:absolute;top:137;left:520"><nobr><span class="ft23"><b>     Leo<br>Command</b></span></nobr></DIV>
<DIV style="position:absolute;top:265;left:450"><nobr><span class="ft23"><b> Leo<br>Float</b></span></nobr></DIV>
<DIV style="position:absolute;top:413;left:436"><nobr><span class="ft23"><b> Leo<br>Draw</b></span></nobr></DIV>
<DIV style="position:absolute;top:677;left:538"><nobr><span class="ft23"><b> Leo<br>Cross</b></span></nobr></DIV>
<DIV style="position:absolute;top:759;left:544"><nobr><span class="ft24">RAM<br>DAC</span></nobr></DIV>
<DIV style="position:absolute;top:725;left:648"><nobr><span class="ft24">   Clock<br>Generator</span></nobr></DIV>
<DIV style="position:absolute;top:725;left:751"><nobr><span class="ft24"> Boot<br>PROM</span></nobr></DIV>
<DIV style="position:absolute;top:310;left:524"><nobr><span class="ft19">SRAM</span></nobr></DIV>
<DIV style="position:absolute;top:289;left:524"><nobr><span class="ft19">SRAM</span></nobr></DIV>
<DIV style="position:absolute;top:269;left:524"><nobr><span class="ft19">SRAM</span></nobr></DIV>
<DIV style="position:absolute;top:249;left:524"><nobr><span class="ft19">SRAM</span></nobr></DIV>
<DIV style="position:absolute;top:485;left:423"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:505;left:423"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:526;left:423"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:546;left:423"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:566;left:423"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:586;left:423"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:485;left:470"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:505;left:470"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:526;left:470"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:545;left:470"><nobr><span class="ft19">DRAM</span></nobr></DIV>
<DIV style="position:absolute;top:566;left:470"><nobr><span class="ft19">DRAM</span></nobr></DIV>
<DIV style="position:absolute;top:413;left:538"><nobr><span class="ft23"><b> Leo<br>Draw</b></span></nobr></DIV>
<DIV style="position:absolute;top:485;left:524"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:505;left:524"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:526;left:524"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:546;left:524"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:566;left:524"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:586;left:524"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:485;left:571"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:505;left:571"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:526;left:571"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:545;left:571"><nobr><span class="ft19">DRAM</span></nobr></DIV>
<DIV style="position:absolute;top:566;left:571"><nobr><span class="ft19">DRAM</span></nobr></DIV>
<DIV style="position:absolute;top:413;left:639"><nobr><span class="ft23"><b> Leo<br>Draw</b></span></nobr></DIV>
<DIV style="position:absolute;top:485;left:625"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:505;left:625"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:526;left:625"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:546;left:625"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:566;left:625"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:586;left:625"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:485;left:673"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:505;left:673"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:526;left:673"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:545;left:673"><nobr><span class="ft19">DRAM</span></nobr></DIV>
<DIV style="position:absolute;top:566;left:673"><nobr><span class="ft19">DRAM</span></nobr></DIV>
<DIV style="position:absolute;top:413;left:740"><nobr><span class="ft23"><b> Leo<br>Draw</b></span></nobr></DIV>
<DIV style="position:absolute;top:485;left:727"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:505;left:727"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:526;left:727"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:546;left:727"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:566;left:727"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:586;left:727"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:485;left:774"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:505;left:774"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:526;left:774"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:545;left:774"><nobr><span class="ft19">DRAM</span></nobr></DIV>
<DIV style="position:absolute;top:566;left:774"><nobr><span class="ft19">DRAM</span></nobr></DIV>
<DIV style="position:absolute;top:413;left:335"><nobr><span class="ft23"><b> Leo<br>Draw</b></span></nobr></DIV>
<DIV style="position:absolute;top:485;left:322"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:505;left:322"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:526;left:322"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:546;left:322"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:566;left:322"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:586;left:322"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:485;left:369"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:505;left:369"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:526;left:369"><nobr><span class="ft19">VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:545;left:369"><nobr><span class="ft19">DRAM</span></nobr></DIV>
<DIV style="position:absolute;top:566;left:369"><nobr><span class="ft19">DRAM</span></nobr></DIV>
<DIV style="position:absolute;top:265;left:585"><nobr><span class="ft23"><b> Leo<br>Float</b></span></nobr></DIV>
<DIV style="position:absolute;top:310;left:659"><nobr><span class="ft19">SRAM</span></nobr></DIV>
<DIV style="position:absolute;top:289;left:659"><nobr><span class="ft19">SRAM</span></nobr></DIV>
<DIV style="position:absolute;top:269;left:659"><nobr><span class="ft19">SRAM</span></nobr></DIV>
<DIV style="position:absolute;top:249;left:659"><nobr><span class="ft19">SRAM</span></nobr></DIV>
<DIV style="position:absolute;top:265;left:720"><nobr><span class="ft23"><b> Leo<br>Float</b></span></nobr></DIV>
<DIV style="position:absolute;top:310;left:794"><nobr><span class="ft19">SRAM</span></nobr></DIV>
<DIV style="position:absolute;top:289;left:794"><nobr><span class="ft19">SRAM</span></nobr></DIV>
<DIV style="position:absolute;top:269;left:794"><nobr><span class="ft19">SRAM</span></nobr></DIV>
<DIV style="position:absolute;top:249;left:794"><nobr><span class="ft19">SRAM</span></nobr></DIV>
<DIV style="position:absolute;top:265;left:315"><nobr><span class="ft23"><b> Leo<br>Float</b></span></nobr></DIV>
<DIV style="position:absolute;top:310;left:389"><nobr><span class="ft19">SRAM</span></nobr></DIV>
<DIV style="position:absolute;top:289;left:389"><nobr><span class="ft19">SRAM</span></nobr></DIV>
<DIV style="position:absolute;top:269;left:389"><nobr><span class="ft19">SRAM</span></nobr></DIV>
<DIV style="position:absolute;top:249;left:389"><nobr><span class="ft19">SRAM</span></nobr></DIV>
<DIV style="position:absolute;top:213;left:504"><nobr><span class="ft20"><b>CF Bus</b></span></nobr></DIV>
<DIV style="position:absolute;top:193;left:639"><nobr><span class="ft20"><b>CD Bus</b></span></nobr></DIV>
<DIV style="position:absolute;top:679;left:639"><nobr><span class="ft20"><b>CX Bus </b>(Subset of CD Bus)</span></nobr></DIV>
<DIV style="position:absolute;top:864;left:477"><nobr><span class="ft25">Figure 2: The Leo Block Diagram. Every chip in the system is<br>represented in this diagram.</span></nobr></DIV>
<DIV style="position:absolute;top:832;left:517"><nobr><span class="ft18">Video Output</span></nobr></DIV>
<DIV style="position:absolute;top:80;left:531"><nobr><span class="ft22">SBus</span></nobr></DIV>
<DIV style="position:absolute;top:90;left:129"><nobr><span class="ft21">Data Input</span></nobr></DIV>
<DIV style="position:absolute;top:130;left:123"><nobr><span class="ft21">Transformation</span></nobr></DIV>
<DIV style="position:absolute;top:157;left:136"><nobr><span class="ft21">Clip Test</span></nobr></DIV>
<DIV style="position:absolute;top:184;left:109"><nobr><span class="ft21">Face Determination</span></nobr></DIV>
<DIV style="position:absolute;top:211;left:136"><nobr><span class="ft21">Lighting</span></nobr></DIV>
<DIV style="position:absolute;top:239;left:116"><nobr><span class="ft21">Clip (if needed)</span></nobr></DIV>
<DIV style="position:absolute;top:266;left:109"><nobr><span class="ft21">Perspective Divide</span></nobr></DIV>
<DIV style="position:absolute;top:292;left:123"><nobr><span class="ft26">Screen Space<br>  Conversion</span></nobr></DIV>
<DIV style="position:absolute;top:333;left:109"><nobr><span class="ft26">       Set Up for<br>Incremental Render</span></nobr></DIV>
<DIV style="position:absolute;top:387;left:129"><nobr><span class="ft21">Edge-Walk</span></nobr></DIV>
<DIV style="position:absolute;top:415;left:116"><nobr><span class="ft21">Span-Interpolate</span></nobr></DIV>
<DIV style="position:absolute;top:442;left:109"><nobr><span class="ft21">Z-Buffered Blend</span></nobr></DIV>
<DIV style="position:absolute;top:482;left:109"><nobr><span class="ft21">VRAM Frame Buffer</span></nobr></DIV>
<DIV style="position:absolute;top:523;left:101"><nobr><span class="ft26">Double Buffered MUX<br> Output Lookup Table</span></nobr></DIV>
<DIV style="position:absolute;top:583;left:116"><nobr><span class="ft26">Digital to Analog<br>    Conversion</span></nobr></DIV>
<DIV style="position:absolute;top:633;left:81"><nobr><span class="ft4">Figure 1: Generic 3D Graphics Pipeline</span></nobr></DIV>
<DIV style="position:absolute;top:427;left:236"><nobr><span class="ft19">Drawing</span></nobr></DIV>
<DIV style="position:absolute;top:271;left:253"><nobr><span class="ft19">Floating-point</span></nobr></DIV>
<DIV style="position:absolute;top:284;left:267"><nobr><span class="ft19">Intensive Functions</span></nobr></DIV>
<DIV style="position:absolute;top:454;left:250"><nobr><span class="ft19">Intensive Functions</span></nobr></DIV>
<DIV style="position:absolute;top:342;left:571"><nobr><span class="ft20"><b>CD Bus</b></span></nobr></DIV>
<DIV style="position:absolute;top:1134;left:446"><nobr><span class="ft12">102</span></nobr></DIV>
</DIV>
<!-- Page 3 -->
<a name="3"></a>
<DIV style="position:relative;width:918;height:1188;">
<STYLE type="text/css">
<!--
	.ft27{font-size:11px;font-family:Times;color:#000000;}
	.ft28{font-size:7px;font-family:Helvetica;color:#000000;}
	.ft29{font-size:10px;line-height:13px;font-family:Helvetica;color:#000000;}
-->
</STYLE>
<IMG width="918" height="1188" src="127003.png" alt="background image">
<DIV style="position:absolute;top:81;left:81"><nobr><span class="ft14">The development of the Leo architecture started with the con-<br>straints imposed by contemporary VRAM technology. As will be<br>derived in the LeoDraw section below, these constraints led to the<br>partitioning of the VRAM controlling LeoDraw chips, and set a<br>maximum back-end rendering rate. This rate in turn set the perfor-<br>mance goal for LeoFloat, as well as the data input bandwidth and<br>processing rate for LeoCommand. After the initial partitioning of<br>the rendering pipeline into these chips, each chip was subjected to<br>additional optimization. Throughput bottlenecks in input geometry<br>format conversion, floating-point processing, and pixel rendering<br>were identified and overcome by adding reinforcing hardware to<br>the appropriate chips.</span></nobr></DIV>
<DIV style="position:absolute;top:266;left:81"><nobr><span class="ft14">Leo's floating-point intensive section uses data parallel partition-<br>ing. LeoCommand helps minimize load balancing problems by<br>breaking down rendering tasks to the smallest isolated primitives:<br>individual triangles, vectors, dots, portions of pixel rasters, render-<br>ing attributes, etc., at the cost of precluding optimizations for<br>shared data in triangle strips and polylines. This was considered<br>acceptable due to the very low average strip length empirically<br>observed in real applications. The overhead of splitting geometric<br>data into isolated primitives is minimized by the use of dedicated<br>hardware for this task. Another benefit of converting all rendering<br>operations to isolated primitives is that down-stream processing of<br>primitives is considerably simplified by only needing to focus on<br>the isolated case.</span></nobr></DIV>
<DIV style="position:absolute;top:479;left:81"><nobr><span class="ft2"><b>4 INPUT PROCESSING: LEO COMMAND</b></span></nobr></DIV>
<DIV style="position:absolute;top:509;left:81"><nobr><span class="ft3"><b>Feeding the pipe</b></span></nobr></DIV>
<DIV style="position:absolute;top:533;left:81"><nobr><span class="ft14">Leo supports input of geometry data both as programmed I/O and<br>through DMA. The host CPU can directly store up to 32 data words<br>in an internal LeoCommand buffer without expensive read back<br>testing of input status every few words. This is useful on hosts that<br>do not support DMA, or when the host must perform format con-<br>versions beyond those supported in hardware. In DMA mode, Leo-<br>Command employs efficient block transfer protocols on the system<br>bus to transfer data from system memory to its input buffer, allow-<br>ing much higher bandwidth than simple programmed I/O. Virtual<br>memory pointers to application's geometry arrays are passed direct-<br>ly to LeoCommand, which converts them to physical memory<br>addresses without operating system intervention (except when a<br>page is marked as currently non-resident). This frees the host CPU<br>to perform other computations during the data transfer. Thus the<br>DMA can be efficient even for pure immediate-mode applications,<br>where the geometry is being created on the fly.</span></nobr></DIV>
<DIV style="position:absolute;top:791;left:81"><nobr><span class="ft3"><b>Problem: Tower of Babel of input formats</b></span></nobr></DIV>
<DIV style="position:absolute;top:815;left:81"><nobr><span class="ft14">One of the problems modern display systems face is the explosion<br>of different input formats for similar drawing functions that need to<br>be supported. Providing optimized microcode for each format<br>rapidly becomes unwieldy. The host CPU could be used to pretrans-<br>late the primitive formats, but at high speeds this conversion oper-<br>ation can itself become a system bottleneck. Because DMA com-<br>pletely bypasses the host CPU, LeoCommand includes a program-<br>mable format conversion unit in the geometry data pipeline. This<br>reformatter is considerably less complex than a general purpose<br>CPU, but can handle the most commonly used input formats, and at<br>very high speeds.</span></nobr></DIV>
<DIV style="position:absolute;top:986;left:81"><nobr><span class="ft14">The geometry reformatting subsystem allows several orthogonal<br>operations to be applied to input data. This geometric input data is<br>abstracted as a stream of vertex packets. Each vertex packet may<br>contain any combination of vertex position, vertex normal, vertex<br>color, facet normal, facet color, texture map coordinates, pick IDs,<br>headers, and other information. One conversion supports arbitrary</span></nobr></DIV>
<DIV style="position:absolute;top:81;left:477"><nobr><span class="ft14">re-ordering of data within a vertex, allowing a standardized element<br>order after reformatting. Another operation supports the conversion<br>of multiple numeric formats to 32-bit IEEE floating-point. The<br>source data can be 8-bit or 16-bit fixed-point, or 32-bit or 64-bit<br>IEEE floating-point. Additional miscellaneous reformatting allows<br>the stripping of headers and other fields, the addition of an internal-<br>ly generated sequential pick ID, and insertion of constants. The<br>final reformatting stage re-packages vertex packets into complete<br>isolated geometry primitives (points, lines, triangles). Chaining bits<br>in vertex headers delineate which vertices form primitives.</span></nobr></DIV>
<DIV style="position:absolute;top:236;left:477"><nobr><span class="ft14">Like some other systems, Leo supports a generalized form of trian-<br>gle strip (see Figure 3), where vertex header bits within a strip spec-<br>ify how the incoming vertex should be combined with previous ver-<br>tices to form the next triangle. A stack of the last three vertices used<br>to form a triangle is kept. The three vertices are labeled oldest, mid-<br>dle, and newest. An incoming vertex of type <i>replace</i></span></nobr></DIV>
<DIV style="position:absolute;top:311;left:760"><nobr><span class="ft27"><i>_oldest </i>causes</span></nobr></DIV>
<DIV style="position:absolute;top:326;left:477"><nobr><span class="ft14">the oldest vertex to be replaced by the middle, the middle to be re-<br>placed by the newest, and the incoming vertex becomes the newest.<br>This corresponds to a PHIGS PLUS triangle strip (sometimes called<br>a "zig-zag" strip). The replacement type <i>replace</i></span></nobr></DIV>
<DIV style="position:absolute;top:371;left:737"><nobr><span class="ft27"><i>_middle</i> leaves the</span></nobr></DIV>
<DIV style="position:absolute;top:386;left:477"><nobr><span class="ft14">oldest vertex unchanged, replaces the middle vertex by the newest,<br>and the incoming vertex becomes the newest. This corresponds to a<br>triangle star. The replacement type <i>restart</i> marks the oldest and mid-<br>dle vertices as invalid, and the incoming vertex becomes the newest.<br>Generalized triangle strips must always start with this code. A trian-<br>gle will be output only when a replacement operation results in three<br>valid vertices. <i>Restart </i>corresponds to a "move" operation in<br>polylines, and allows multiple unconnected variable-length triangle<br>strips to be described by a single data structure passed in by the user,</span></nobr></DIV>
<DIV style="position:absolute;top:601;left:619"><nobr><span class="ft28"><b>1</b></span></nobr></DIV>
<DIV style="position:absolute;top:548;left:646"><nobr><span class="ft28"><b>2</b></span></nobr></DIV>
<DIV style="position:absolute;top:601;left:673"><nobr><span class="ft28"><b>3</b></span></nobr></DIV>
<DIV style="position:absolute;top:548;left:700"><nobr><span class="ft28"><b>4</b></span></nobr></DIV>
<DIV style="position:absolute;top:601;left:727"><nobr><span class="ft28"><b>5</b></span></nobr></DIV>
<DIV style="position:absolute;top:548;left:754"><nobr><span class="ft28"><b>6</b></span></nobr></DIV>
<DIV style="position:absolute;top:681;left:662"><nobr><span class="ft28"><b>7</b></span></nobr></DIV>
<DIV style="position:absolute;top:683;left:627"><nobr><span class="ft28"><b>8</b></span></nobr></DIV>
<DIV style="position:absolute;top:647;left:648"><nobr><span class="ft28"><b>9</b></span></nobr></DIV>
<DIV style="position:absolute;top:644;left:700"><nobr><span class="ft28"><b>10</b></span></nobr></DIV>
<DIV style="position:absolute;top:685;left:720"><nobr><span class="ft28"><b>11</b></span></nobr></DIV>
<DIV style="position:absolute;top:732;left:700"><nobr><span class="ft28"><b>12</b></span></nobr></DIV>
<DIV style="position:absolute;top:732;left:640"><nobr><span class="ft28"><b>13</b></span></nobr></DIV>
<DIV style="position:absolute;top:696;left:623"><nobr><span class="ft28"><b>14</b></span></nobr></DIV>
<DIV style="position:absolute;top:810;left:632"><nobr><span class="ft28"><b>15</b></span></nobr></DIV>
<DIV style="position:absolute;top:753;left:666"><nobr><span class="ft28"><b>16</b></span></nobr></DIV>
<DIV style="position:absolute;top:809;left:684"><nobr><span class="ft28"><b>17</b></span></nobr></DIV>
<DIV style="position:absolute;top:890;left:626"><nobr><span class="ft28"><b>18</b></span></nobr></DIV>
<DIV style="position:absolute;top:835;left:629"><nobr><span class="ft28"><b>19</b></span></nobr></DIV>
<DIV style="position:absolute;top:890;left:672"><nobr><span class="ft28"><b>20</b></span></nobr></DIV>
<DIV style="position:absolute;top:972;left:630"><nobr><span class="ft28"><b>22</b></span></nobr></DIV>
<DIV style="position:absolute;top:916;left:630"><nobr><span class="ft28"><b>23</b></span></nobr></DIV>
<DIV style="position:absolute;top:972;left:670"><nobr><span class="ft28"><b>24</b></span></nobr></DIV>
<DIV style="position:absolute;top:916;left:670"><nobr><span class="ft28"><b>25</b></span></nobr></DIV>
<DIV style="position:absolute;top:949;left:718"><nobr><span class="ft28"><b>26</b></span></nobr></DIV>
<DIV style="position:absolute;top:916;left:711"><nobr><span class="ft28"><b>27</b></span></nobr></DIV>
<DIV style="position:absolute;top:933;left:767"><nobr><span class="ft28"><b>28</b></span></nobr></DIV>
<DIV style="position:absolute;top:974;left:767"><nobr><span class="ft28"><b>29</b></span></nobr></DIV>
<DIV style="position:absolute;top:1004;left:750"><nobr><span class="ft28"><b>30</b></span></nobr></DIV>
<DIV style="position:absolute;top:1013;left:720"><nobr><span class="ft28"><b>31</b></span></nobr></DIV>
<DIV style="position:absolute;top:984;left:668"><nobr><span class="ft28"><b>32</b></span></nobr></DIV>
<DIV style="position:absolute;top:1018;left:679"><nobr><span class="ft28"><b>33</b></span></nobr></DIV>
<DIV style="position:absolute;top:835;left:671"><nobr><span class="ft28"><b>21</b></span></nobr></DIV>
<DIV style="position:absolute;top:561;left:538"><nobr><span class="ft29">  1 Restart<br>  2 RO<br>  3 RO<br>  4 RO<br>  5 RO<br>  6 RO<br>  7 Restart<br>  8 RO<br>  9 RO<br>10 RM</span></nobr></DIV>
<DIV style="position:absolute;top:696;left:538"><nobr><span class="ft21">11 RM</span></nobr></DIV>
<DIV style="position:absolute;top:710;left:538"><nobr><span class="ft29">12 RM<br>13 RM<br>14 RM<br>15 Restart<br>16 RO<br>17 RO<br>18 Restart<br>19 RO<br>20 RO<br>21 RO<br>22 Restart<br>23 RO<br>24 RO<br>25 RO<br>26 RO<br>27 RO<br>28 RO<br>29 RM<br>30 RM<br>31 RM<br>32 RM<br>33 RO</span></nobr></DIV>
<DIV style="position:absolute;top:615;left:673"><nobr><span class="ft21">Triangle Strip</span></nobr></DIV>
<DIV style="position:absolute;top:716;left:720"><nobr><span class="ft21">Triangle Star</span></nobr></DIV>
<DIV style="position:absolute;top:770;left:701"><nobr><span class="ft26">Independent<br>Triangle</span></nobr></DIV>
<DIV style="position:absolute;top:858;left:700"><nobr><span class="ft26">Independent<br>Quad</span></nobr></DIV>
<DIV style="position:absolute;top:1032;left:700"><nobr><span class="ft21">Mixed Strip</span></nobr></DIV>
<DIV style="position:absolute;top:1062;left:531"><nobr><span class="ft4">Figure 3: A Generalized Triangle Strip</span></nobr></DIV>
<DIV style="position:absolute;top:541;left:524"><nobr><span class="ft20"><b>Vertex Codes</b></span></nobr></DIV>
<DIV style="position:absolute;top:1020;left:531"><nobr><span class="ft29">RO = Replace Oldest<br>RM = Replace Middle</span></nobr></DIV>
<DIV style="position:absolute;top:1134;left:446"><nobr><span class="ft12">103</span></nobr></DIV>
</DIV>
<!-- Page 4 -->
<a name="4"></a>
<DIV style="position:relative;width:918;height:1188;">
<STYLE type="text/css">
<!--
	.ft30{font-size:8px;font-family:Times;color:#000000;}
	.ft31{font-size:13px;font-family:Times;color:#000000;}
	.ft32{font-size:10px;line-height:14px;font-family:Helvetica;color:#000000;}
	.ft33{font-size:10px;line-height:15px;font-family:Helvetica;color:#000000;}
-->
</STYLE>
<IMG width="918" height="1188" src="127004.png" alt="background image">
<DIV style="position:absolute;top:81;left:81"><nobr><span class="ft14">reducing the overhead. The generalized triangle strip's ability to ef-<br>fectively change from "strip" to "star" mode in the middle of a strip<br>allows more complex geometry to be represented compactly, and re-<br>quires less input data bandwidth. The restart capability allows sev-<br>eral pieces of disconnected geometry to be passed in one DMA op-<br>eration. Figure 3 shows a <i>single</i> generalized triangle strip, and the<br>associated replacement codes. LeoCommand also supports header-<br>less strips of triangle vertices either as pure strips, pure stars, or pure<br>independent triangles.</span></nobr></DIV>
<DIV style="position:absolute;top:221;left:81"><nobr><span class="ft14">LeoCommand hardware automatically converts generalized trian-<br>gle strips into isolated triangles. Triangles are normalized such that<br>the front face is always defined by a clockwise vertex order after<br>transformation. To support this, a header bit in each <i>restart</i> defines<br>the initial face order of each sub-strip, and the vertex order is re-<br>versed after every <i>replace</i></span></nobr></DIV>
<DIV style="position:absolute;top:296;left:221"><nobr><span class="ft27"><i>_oldest</i>. LeoCommand passes each com-</span></nobr></DIV>
<DIV style="position:absolute;top:311;left:81"><nobr><span class="ft14">pleted triangle to the next available LeoFloat chip, as indicated by<br>the input FIFO status that each LeoFloat sends back to Leo-<br>Command. The order in which triangles have been sent to each<br>LeoFloat is scoreboarded by LeoCommand, so that processed trian-<br>gles are let out of the LeoFloat array in the same order as they en-<br>tered. Non-sequential rendering order is also supported, but the<br>automatic rendering task distribution hardware works so well that<br>the performance difference is less than 3%. A similar, but less com-<br>plex vertex repackaging is supported for polylines and multi-<br>polylines via a move/draw bit in the vertex packet header.</span></nobr></DIV>
<DIV style="position:absolute;top:467;left:81"><nobr><span class="ft14">To save IC pins and PC board complexity, the internal Leo data bus-<br>ses connecting LeoCommand, LeoFloat, and LeoDraw are 16 bits in<br>size. When colors, normals, and texture map coefficients are being<br>transmitted on the CF-bus between LeoCommand and the Leo-<br>Floats, these components are (optionally) compressed from 32-bit<br>IEEE floating-point into 16-bit fixed point fractions by Leo-<br>Command, and then automatically reconverted back to 32-bit IEEE<br>floating-point values by LeoFloat. This quantization does not effect<br>quality. Color components will eventually end up as 8-bit values in<br>the frame buffer. For normals, 16-bit (signed) accuracy represents a<br>resolution of approximately plus or minus an inch at one mile. This<br>optimization reduces the required data transfer bandwidth by 25%.</span></nobr></DIV>
<DIV style="position:absolute;top:83;left:501"><nobr><span class="ft2"><b>5 FLOATING-POINT PROCESSING: LEO FLOAT</b></span></nobr></DIV>
<DIV style="position:absolute;top:108;left:477"><nobr><span class="ft14">After canonical format conversion, the next stages of processing tri-<br>angles in a display pipeline are: transformation, clip test, face deter-<br>mination, lighting, clipping (if required), screen space conversion,<br>and set-up. These operations are complex enough to require the use<br>of a general purpose processor.</span></nobr></DIV>
<DIV style="position:absolute;top:188;left:477"><nobr><span class="ft14">Use of commercially available DSP (Digital Signal Processing)<br>chips for this work has two major drawbacks. First, most such pro-<br>cessors require a considerable number of surrounding glue chips,<br>especially when they are deployed as multi-processors. These glue<br>chips can easily quadruple the board area dedicated to the DSP<br>chip, as well as adversely affecting power, heat, cost, and reliability.<br>Second, few of these chips have been optimized for 3D graphics.</span></nobr></DIV>
<DIV style="position:absolute;top:299;left:477"><nobr><span class="ft14">A better solution might be to augment the DSP with a special ASIC<br>that would replace all of these glue chips. Given the expense of de-<br>veloping an ASIC, we decided to merge that ASIC with a custom<br>DSP core optimized for graphics.</span></nobr></DIV>
<DIV style="position:absolute;top:364;left:477"><nobr><span class="ft14">The resulting chip was LeoFloat. LeoFloat combines a 32-bit mi-<br>crocodable floating-point core with concurrent input and output<br>packet communication subsystems (see Figure 4</span></nobr></DIV>
<DIV style="position:absolute;top:396;left:734"><nobr><span class="ft30">.</span></nobr></DIV>
<DIV style="position:absolute;top:394;left:737"><nobr><span class="ft4">), similar to the ap-</span></nobr></DIV>
<DIV style="position:absolute;top:409;left:477"><nobr><span class="ft14">proach of [3]. The only support chips required are four SRAM chips<br>for external microcode store. A number of specialized graphics in-<br>structions and features make LeoFloat different from existing DSP<br>processors. Each individual feature only makes a modest incremen-<br>tal contribution to performance, and indeed many have appeared in<br>other designs. What is novel about LeoFloat is the combination of<br>features, whose cumulative effect leads to impressive overall sys-<br>tem performance. The following sections describe some of the<br>more important special graphics instructions and features.</span></nobr></DIV>
<DIV style="position:absolute;top:550;left:477"><nobr><span class="ft5"><b>Double buffered asynchronous I/O register files.</b></span></nobr></DIV>
<DIV style="position:absolute;top:549;left:764"><nobr><span class="ft4">All input and</span></nobr></DIV>
<DIV style="position:absolute;top:564;left:477"><nobr><span class="ft14">output commands are packaged up by separate I/O packet hardware.<br>Variable length packets of up to 32 32-bit words are automatically<br>written into (or out of) on-chip double-buffered register files (the I<br>and O registers). These are mapped directly into microcode register<br>space. Special instructions allow complete packets to be requested,<br>relinquished, or queued for transmission in one instruction cycle.</span></nobr></DIV>
<DIV style="position:absolute;top:660;left:477"><nobr><span class="ft5"><b>Enough internal registers.</b></span></nobr></DIV>
<DIV style="position:absolute;top:660;left:627"><nobr><span class="ft4"> Most commercial DSP chips support a</span></nobr></DIV>
<DIV style="position:absolute;top:675;left:477"><nobr><span class="ft14">very small number of internal fast registers, certainly much smaller<br>than the data needed by the inner loops of most 3D pipeline algo-<br>rithms. They attempt to make up for this with on-chip SRAM or<br>data caches, but typically SRAMs are not multi-ported and the<br>caches not user-schedulable. We cheated with LeoFloat. We first<br>wrote the code for the largest important inner loop (triangles),<br>counted how many registers were needed (288), and built that many<br>into the chip.</span></nobr></DIV>
<DIV style="position:absolute;top:800;left:477"><nobr><span class="ft5"><b>Parallel internal function units</b></span></nobr></DIV>
<DIV style="position:absolute;top:800;left:653"><nobr><span class="ft4">. The floating-point core functions</span></nobr></DIV>
<DIV style="position:absolute;top:815;left:477"><nobr><span class="ft14">(32-bit IEEE format) include multiply, ALU, reciprocal, and inte-<br>ger operations, all of which can often be executed in parallel. It is<br>particularly important that the floating-point reciprocal operation<br>not tie up the multiply and add units, so that perspective or slope<br>calculations can proceed in parallel with the rest of geometric pro-<br>cessing. Less frequently used reciprocal square root hardware is<br>shared with the integer function unit.</span></nobr></DIV>
<DIV style="position:absolute;top:926;left:477"><nobr><span class="ft5"><b>Put all non-critical algorithms on the host.</b></span></nobr></DIV>
<DIV style="position:absolute;top:926;left:715"><nobr><span class="ft4"> We avoided the neces-</span></nobr></DIV>
<DIV style="position:absolute;top:941;left:477"><nobr><span class="ft14">sity of building a high level language compiler (and support instruc-<br>tions) for LeoFloat by moving any code not worth hand coding in<br>microcode to the host processor. The result is a small, clean kernel<br>of graphics routines in microcode. (A fairly powerful macro-assem-<br>bler with a `C'-like syntax was built to support the hand coding.)</span></nobr></DIV>
<DIV style="position:absolute;top:1021;left:477"><nobr><span class="ft5"><b>Software pipeline scheduling.</b></span></nobr></DIV>
<DIV style="position:absolute;top:1021;left:647"><nobr><span class="ft4"> One of the most complex parts of</span></nobr></DIV>
<DIV style="position:absolute;top:1036;left:477"><nobr><span class="ft14">modern CPUs to design and debug is their scoreboard section,<br>which schedules the execution of instructions across multiple steps<br>in time and function units, presenting the programmer with the</span></nobr></DIV>
<DIV style="position:absolute;top:1064;left:82"><nobr><span class="ft4">Figure 4: LeoFloat arithmetic function units, registers and data paths.</span></nobr></DIV>
<DIV style="position:absolute;top:710;left:97"><nobr><span class="ft32">I0 -I31<br>I0'-I31'</span></nobr></DIV>
<DIV style="position:absolute;top:855;left:128"><nobr><span class="ft31">*</span></nobr></DIV>
<DIV style="position:absolute;top:835;left:128"><nobr><span class="ft31">*</span></nobr></DIV>
<DIV style="position:absolute;top:933;left:216"><nobr><span class="ft21">+</span></nobr></DIV>
<DIV style="position:absolute;top:953;left:216"><nobr><span class="ft21">+</span></nobr></DIV>
<DIV style="position:absolute;top:973;left:216"><nobr><span class="ft21">+</span></nobr></DIV>
<DIV style="position:absolute;top:852;left:275"><nobr><span class="ft21">IALU</span></nobr></DIV>
<DIV style="position:absolute;top:852;left:353"><nobr><span class="ft21">1/X</span></nobr></DIV>
<DIV style="position:absolute;top:931;left:156"><nobr><span class="ft21">FALU</span></nobr></DIV>
<DIV style="position:absolute;top:878;left:86"><nobr><span class="ft21">FMULT</span></nobr></DIV>
<DIV style="position:absolute;top:677;left:82"><nobr><span class="ft19">Input from off-chip</span></nobr></DIV>
<DIV style="position:absolute;top:772;left:351"><nobr><span class="ft19">Off-chip output</span></nobr></DIV>
<DIV style="position:absolute;top:710;left:178"><nobr><span class="ft33">P0 -P31<br>P32-P63<br>P64-P91</span></nobr></DIV>
<DIV style="position:absolute;top:710;left:259"><nobr><span class="ft32">R0 -R31<br>R32-R63</span></nobr></DIV>
<DIV style="position:absolute;top:710;left:340"><nobr><span class="ft32">O0 -O31<br>O0'-O31'</span></nobr></DIV>
<DIV style="position:absolute;top:1134;left:446"><nobr><span class="ft12">104</span></nobr></DIV>
</DIV>
<!-- Page 5 -->
<a name="5"></a>
<DIV style="position:relative;width:918;height:1188;">
<STYLE type="text/css">
<!--
	.ft34{font-size:11px;font-family:Symbol;color:#000000;}
	.ft35{font-size:10px;line-height:-6px;font-family:Helvetica;color:#000000;}
-->
</STYLE>
<IMG width="918" height="1188" src="127005.png" alt="background image">
<DIV style="position:absolute;top:81;left:81"><nobr><span class="ft14">illusion that individual instructions are executed in one shot. Leo-<br>Float avoided all this hardware by using more direct control fields,<br>like horizontal microprogrammable machines, and leaving it to the<br>assembler (and occasionally the programmer) to skew one logical<br>instruction across several physical instructions.</span></nobr></DIV>
<DIV style="position:absolute;top:161;left:81"><nobr><span class="ft5"><b>Special clip condition codes &amp; clip branch.</b></span></nobr></DIV>
<DIV style="position:absolute;top:161;left:332"><nobr><span class="ft4"> For clip testing we</span></nobr></DIV>
<DIV style="position:absolute;top:176;left:81"><nobr><span class="ft14">employ a modified Sutherland-Hodgman algorithm, which first<br>computes a vector of clip condition bits. LeoFloat has a clip test in-<br>struction that computes these bits two at a time, shifting them into<br>a special clip-bits register. After the bits have been computed, spe-<br>cial branch instructions decode these bits into the appropriate case:<br>clip rejected, clip accepted, single edge clip (six cases), or needs<br>general clipping. There are separate branch instructions for trian-<br>gles and vectors. (A similar approach was taken in [9].) The branch<br>instructions allow multiple other conditions to be checked at the<br>same time, including backfacing and model clipping.</span></nobr></DIV>
<DIV style="position:absolute;top:332;left:81"><nobr><span class="ft5"><b>Register Y sort instruction.</b></span></nobr></DIV>
<DIV style="position:absolute;top:332;left:238"><nobr><span class="ft4">The first step of the algorithm we used</span></nobr></DIV>
<DIV style="position:absolute;top:347;left:81"><nobr><span class="ft14">for setting up triangles for scan conversion sorts the three triangle<br>vertices in ascending Y order. On a conventional processor this re-<br>quires either moving a lot of data, always referring to vertex data<br>through indirect pointers, or replicating the set-up code for all six<br>possible permutations of triangle vertex order. LeoFloat has a special<br>instruction that takes the results of the last three comparisons and re-<br>orders part of the R register file to place vertices in sorted order.</span></nobr></DIV>
<DIV style="position:absolute;top:457;left:81"><nobr><span class="ft5"><b>Miscellaneous.</b></span></nobr></DIV>
<DIV style="position:absolute;top:457;left:165"><nobr><span class="ft4"> LeoFloat contains many performance features tra-</span></nobr></DIV>
<DIV style="position:absolute;top:472;left:81"><nobr><span class="ft14">ditionally found on DSP chips, including an internal subroutine<br>stack, block load/store SRAM, and integer functions. Also there is<br>a "kitchen sink" instruction that initiates multiple housekeeping<br>functions in one instruction, such as "transmit current output packet<br>(if not clip pending), request new input packet, extract op-code and<br>dispatch to next task."</span></nobr></DIV>
<DIV style="position:absolute;top:568;left:81"><nobr><span class="ft5"><b>Code results: equivalent to 150 megaflop DSP.</b></span></nobr></DIV>
<DIV style="position:absolute;top:567;left:362"><nobr><span class="ft4">Each 25 MHz</span></nobr></DIV>
<DIV style="position:absolute;top:582;left:81"><nobr><span class="ft14">LeoFloat processes the benchmark isolated triangle (including clip-<br>test and set-up) in 379 clocks. (With a few exceptions, microcode<br>instructions issue at a rate of one per clock tick.) The same graphics<br>algorithm was tightly coded on several RISC processors and DSP<br>chips (SPARC, i860, C30, etc.), and typically took on the order of<br>1100 clocks. Thus the 379 LeoFloat instruction at 25 MHz do the<br>equivalent work of a traditional DSP chip running at 75 MHz (even<br>though there are only 54 megaflops of hardware). Of course these<br>numbers only hold for triangles and vectors, but that's most of what<br>LeoFloat does. Four LeoFloats assure that floating-point processing<br>is not the bottleneck for 100-pixel isolated, lighted triangles.</span></nobr></DIV>
<DIV style="position:absolute;top:768;left:105"><nobr><span class="ft2"><b>SCREEN SPACE RENDERING: LEO DRAW</b></span></nobr></DIV>
<DIV style="position:absolute;top:796;left:81"><nobr><span class="ft3"><b>VRAM limits</b></span></nobr></DIV>
<DIV style="position:absolute;top:819;left:81"><nobr><span class="ft14">Commercial VRAM chips represent a fundamental constraint on<br>the possible pixel rendering performance of Leo's class of graphics<br>accelerator. The goal of the Leo architecture was to ensure to the<br>greatest extent possible that this was the <i>only</i> performance limit for<br>typical rendering operations.</span></nobr></DIV>
<DIV style="position:absolute;top:900;left:81"><nobr><span class="ft14">The fundamental memory transaction for Z-buffered rendering<br>algorithms is a conditional read-modify-write cycle. Given an XY<br>address and a computed RGBZ value, the old Z value at the XY ad-<br>dress is first read, and then if the computed Z is in front of the old<br>Z, the computed RGBZ value is written into the memory. Such<br>transactions can be mapped to allowable VRAM control signals in<br>many different ways: reads and writes may be batched, Z may be<br>read out through the video port, etc.</span></nobr></DIV>
<DIV style="position:absolute;top:1025;left:81"><nobr><span class="ft14">VRAM chips constrain system rendering performance in two ways.<br>First, they impose a minimum cycle time per RAM bank for the Z-<br>buffered read-modify-write cycle. Figure 5 is a plot of this cycle</span></nobr></DIV>
<DIV style="position:absolute;top:459;left:477"><nobr><span class="ft14">time (when in "page" mode) and its changes over a half-decade<br>period. VRAMs also constrain the ways in which a frame buffer can<br>be partitioned into independently addressable banks. Throughout<br>the five year period in Figure 5, three generations of VRAM technol-<br>ogy have been organized as 256K by 4, 8, and 16-bit memories. For<br>contemporary display resolutions of 1280</span></nobr></DIV>
<DIV style="position:absolute;top:529;left:709"><nobr><span class="ft34">×</span></nobr></DIV>
<DIV style="position:absolute;top:534;left:721"><nobr><span class="ft4">1024, the chips com-</span></nobr></DIV>
<DIV style="position:absolute;top:549;left:477"><nobr><span class="ft14">prising a minimum frame buffer can be organized into no more than<br>five separately-addressed interleave banks. Combining this informa-<br>tion, a theoretical maximum rendering speed for a primitive can be<br>computed. The second line in Figure 5 is the corresponding perfor-<br>mance for rendering 100-pixel Z-buffered triangles, including the<br>overhead for entering page mode, content refresh, and video shift<br>register transfers (video refresh). Higher rendering rates are only<br>possible if additional redundant memory chips are added, allowing<br>for higher interleaving factors, at the price of increased system cost.</span></nobr></DIV>
<DIV style="position:absolute;top:689;left:477"><nobr><span class="ft14">Even supporting five parallel interleaves has a cost: at least 305<br>memory interface pins (five banks of (24 RGB + 24 Z + 13 address/<br>control)) are required, more pins than it is currently possible to ded-<br>icate to a memory interface on one chip. Some systems have used<br>external buffer chips, but on a minimum cost and board area sys-<br>tem, this costs almost as much as additional custom chips. Thus, on<br>the Leo system we opted for five separate VRAM control chips<br>(LeoDraws).</span></nobr></DIV>
<DIV style="position:absolute;top:827;left:477"><nobr><span class="ft3"><b>Triangle scan conversion</b></span></nobr></DIV>
<DIV style="position:absolute;top:851;left:477"><nobr><span class="ft14">Traditional shaded triangle scan conversion has typically been via<br>a linear pipeline of edge-walking followed by scan interpolation<br>[12]. There have been several approaches to achieving higher<br>throughput in rasterization. [2] employed a single edge-walker, but<br>parallel scan interpolation. [4][10] employed massively parallel<br>rasterizers. [6] and other recent machines use moderately parallel<br>rasterizers, with additional logic to merge the pixel rasterization<br>streams back together.</span></nobr></DIV>
<DIV style="position:absolute;top:977;left:477"><nobr><span class="ft14">In the Leo design we chose to broadcast the identical triangle spec-<br>ification to five parallel rendering chips, each tasked with rendering<br>only those pixels visible in the local interleave. Each chip performs<br>its own complete edge-walk and span interpolation of the triangle,<br>biased by the chip's local interleave. By paying careful attention to<br>proper mathematical sampling theory for rasterized pixels, the five</span></nobr></DIV>
<DIV style="position:absolute;top:383;left:525"><nobr><span class="ft17"><b>90</b></span></nobr></DIV>
<DIV style="position:absolute;top:383;left:584"><nobr><span class="ft17"><b>91</b></span></nobr></DIV>
<DIV style="position:absolute;top:383;left:642"><nobr><span class="ft17"><b>92</b></span></nobr></DIV>
<DIV style="position:absolute;top:383;left:700"><nobr><span class="ft17"><b>93</b></span></nobr></DIV>
<DIV style="position:absolute;top:383;left:759"><nobr><span class="ft17"><b>94</b></span></nobr></DIV>
<DIV style="position:absolute;top:192;left:482"><nobr><span class="ft19">180 ns</span></nobr></DIV>
<DIV style="position:absolute;top:211;left:482"><nobr><span class="ft19">160 ns</span></nobr></DIV>
<DIV style="position:absolute;top:231;left:482"><nobr><span class="ft19">140 ns</span></nobr></DIV>
<DIV style="position:absolute;top:115;left:807"><nobr><span class="ft19">260K</span></nobr></DIV>
<DIV style="position:absolute;top:154;left:807"><nobr><span class="ft19">220K</span></nobr></DIV>
<DIV style="position:absolute;top:174;left:807"><nobr><span class="ft19">200K</span></nobr></DIV>
<DIV style="position:absolute;top:135;left:807"><nobr><span class="ft19">240K</span></nobr></DIV>
<DIV style="position:absolute;top:172;left:482"><nobr><span class="ft19">200 ns</span></nobr></DIV>
<DIV style="position:absolute;top:267;left:685"><nobr><span class="ft26">100 pixel triangle<br>theoretical<br>maximum<br>render rate</span></nobr></DIV>
<DIV style="position:absolute;top:267;left:535"><nobr><span class="ft26">VRAM minimum<br>Z-buffer RGB<br>read/modify/write<br>cycle time (on page)<br>(off page = 1.5x)</span></nobr></DIV>
<DIV style="position:absolute;top:408;left:489"><nobr><span class="ft25">Figure 5: VRAM cycle time and theoretical maximum trian-<br>gle rendering rate (for five-way interleaved frame buffers).</span></nobr></DIV>
<DIV style="position:absolute;top:231;left:539"><nobr><span class="ft21">VRAM Cycle T</span></nobr></DIV>
<DIV style="position:absolute;top:152;left:539"><nobr><span class="ft21">ime</span></nobr></DIV>
<DIV style="position:absolute;top:231;left:784"><nobr><span class="ft35">T<br>riangle Rendering Rate</span></nobr></DIV>
<DIV style="position:absolute;top:354;left:544"><nobr><span class="ft21">1 Meg VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:354;left:641"><nobr><span class="ft21">2 Meg VRAM</span></nobr></DIV>
<DIV style="position:absolute;top:354;left:753"><nobr><span class="ft21">4 Meg</span></nobr></DIV>
<DIV style="position:absolute;top:1134;left:446"><nobr><span class="ft12">105</span></nobr></DIV>
</DIV>
<!-- Page 6 -->
<a name="6"></a>
<DIV style="position:relative;width:918;height:1188;">
<STYLE type="text/css">
<!--
-->
</STYLE>
<IMG width="918" height="1188" src="127006.png" alt="background image">
<DIV style="position:absolute;top:81;left:81"><nobr><span class="ft14">chips can act in concert to produce the correct combined rasterized<br>image. Mathematically, each chip thinks it is rasterizing the triangle<br>into an image memory with valid pixel centers only every five orig-<br>inal pixels horizontally, with each chip starting off biased one more<br>pixel to the right.</span></nobr></DIV>
<DIV style="position:absolute;top:161;left:81"><nobr><span class="ft14">To obtain the speed benefits of parallel chips, most high perfor-<br>mance graphics systems have split the edge-walk and span-interpo-<br>late functions into separate chips. But an examination of the relative<br>amounts of data flow between rendering pipeline stages shows that<br>the overall peak data transfer bandwidth demand occurs between<br>the edge-walk and span-interpolate sections, induced by long thin<br>triangles, which commonly occur in tessellated geometry. To mini-<br>mize pin counts and PC board bus complexity, Leo decided to rep-<br>licate the edge-walking function into each of the five span-interpo-<br>lation chips.</span></nobr></DIV>
<DIV style="position:absolute;top:317;left:81"><nobr><span class="ft14">One potential drawback of this approach is that the edge-walking<br>section of each LeoDraw chip will have to advance to the next scan<br>line up to five times more often than a single rasterization chip<br>would. Thus LeoDraw's edge-walking circuit was designed to oper-<br>ate in one single pixel cycle time (160 ns. read-modify-write VRAM<br>cycle), so it would never hold back scan conversion. Other usual<br>pipelining techniques were used, such as loading in and buffering<br>the next triangle to be drawn in parallel with rasterizing the current<br>triangle. Window clipping, blending, and other pixel post processing<br>are handled in later pipelined stages.</span></nobr></DIV>
<DIV style="position:absolute;top:485;left:81"><nobr><span class="ft3"><b>Line scan conversion</b></span></nobr></DIV>
<DIV style="position:absolute;top:509;left:81"><nobr><span class="ft14">As with triangles, the mathematics of the line rasterization algo-<br>rithms were set up to allow distributed rendering of aliased and<br>antialiased lines and dots, with each LeoDraw chip handling the<br>1/5 of the frame buffer pixels that it owns. While the Leo system<br>uses the X11 semantics of Bresenham lines for window system<br>operations, these produce unacceptable motion artifacts in 3D<br>wireframe rendering. Therefore, when rendering 3D lines, Leo<br>employs a high-accuracy DDA algorithm, using 32 bits internally<br>for sufficient subpixel precision.</span></nobr></DIV>
<DIV style="position:absolute;top:649;left:81"><nobr><span class="ft14">At present there is no agreement in the industry on the definition of a<br>high quality antialiased line. We choose to use the image quality of<br>vector strokers of years ago as our quality standard, and we tested dif-<br>ferent algorithms with end users, many of whom were still using cal-<br>ligraphic displays. We found users desired algorithms that displayed<br>no roping, angle sensitivities, short vector artifacts, or end-point arti-<br>facts. We submitted the resulting antialiased line quality test patterns<br>as a GPC [11] test image. In achieving the desired image quality lev-<br>el, we determined several properties that a successful line antialias-<br>ing algorithm must have. First, the lines must have at least three pix-<br>els of width across the minor axis. Two-pixel wide antialiased lines<br>exhibit serious roping artifacts. Four-pixel wide lines offer no visible<br>improvement except for lines near 45 degrees. Second, proper end-<br>point ramps spread over at least two pixels are necessary both for<br>seamless line segment joins as well as for isolated line-ends. Third,<br>proper care must be taken when sampling lines of subpixel length to<br>maintain proper final intensity. Fourth, intensity or filter adjustments<br>based on the slope are necessary to avoid artifacts when rotating<br>wireframe images. To implement all this, we found that we needed at<br>least four bits of subpixel positional accuracy <i>after</i> cumulative inter-<br>polation error is factored in. That is why we used 32 bits for XY co-<br>ordinate accuracy: 12 for pixel location, 4 for subpixel location, and<br>16 for DDA interpolation error. (The actual error limit is imposed by<br>the original, user-supplied 32-bit IEEE floating-point data.)</span></nobr></DIV>
<DIV style="position:absolute;top:1014;left:81"><nobr><span class="ft14">Because of the horizontal interleaving and preferred scan direction,<br>the X-major and Y-major aliased and antialiased line rasterization<br>algorithms are not symmetric, so separate optimized algorithms<br>were employed for each.</span></nobr></DIV>
<DIV style="position:absolute;top:81;left:477"><nobr><span class="ft3"><b>Antialiased dots</b></span></nobr></DIV>
<DIV style="position:absolute;top:105;left:477"><nobr><span class="ft14">Empirical testing showed that only three bits of subpixel precision<br>are necessary for accurate rendering of antialiased dots. For ASIC<br>implementation, this was most easily accomplished using a brute-<br>force table lookup of one of 64 precomputed 3</span></nobr></DIV>
<DIV style="position:absolute;top:145;left:723"><nobr><span class="ft34"> ×</span></nobr></DIV>
<DIV style="position:absolute;top:150;left:736"><nobr><span class="ft4">3 pixel dot images.</span></nobr></DIV>
<DIV style="position:absolute;top:165;left:477"><nobr><span class="ft14">These images are stored in on-chip ROM, and were generated using<br>a circular symmetric Gaussian filter.</span></nobr></DIV>
<DIV style="position:absolute;top:213;left:477"><nobr><span class="ft3"><b>Triangle, line, and dot hardware</b></span></nobr></DIV>
<DIV style="position:absolute;top:237;left:477"><nobr><span class="ft14">Implementation of the triangle and antialiased vector rasterization<br>algorithms require substantial hardware resources. Triangles need<br>single pixel cycle edge-walking hardware in parallel with RGBZ<br>span interpolation hardware. To obtain the desired quality of anti-<br>aliased vectors, our algorithms require hardware to apply multiple<br>waveform shaping functions to every generated pixel. As a result,<br>the total VLSI area needed for antialiased vectors is nearly as large<br>as for triangles. To keep the chip die size reasonable, we reformu-<br>lated both the triangle and antialiased vector algorithms to combine<br>and reuse the same function units. The only difference is how the<br>separate sequencers set up the rasterization pipeline.</span></nobr></DIV>
<DIV style="position:absolute;top:421;left:477"><nobr><span class="ft3"><b>Per-pixel depth cue</b></span></nobr></DIV>
<DIV style="position:absolute;top:444;left:477"><nobr><span class="ft14">Depth cueing has long been a heavily-used staple of wireframe ap-<br>plications, but in most modern rendering systems it is an extra time<br>expense feature, performed on endpoints back in the floating-point<br>section. We felt that we were architecting Leo not for benchmarks,<br>but for users, and many wireframe users want to have depth cueing<br>on all the time. Therefore, we built a parallel hardware depth cue<br>function unit into each LeoDraw. Each triangle, vector, or dot ren-<br>dered by Leo can be optionally depth cued at absolutely no cost in<br>performance. Another benefit of per-pixel depth cueing is full com-<br>pliance with the PHIGS PLUS depth cueing specification. For Leo,<br>per-pixel depth cueing hardware also simplifies the LeoFloat mi-<br>crocode, by freeing the LeoFloats from ever having to deal with it.</span></nobr></DIV>
<DIV style="position:absolute;top:643;left:477"><nobr><span class="ft3"><b>Picking support</b></span></nobr></DIV>
<DIV style="position:absolute;top:666;left:477"><nobr><span class="ft14">Interactive graphics requires not only the rapid display of geometric<br>data, but also interaction with that data: the ability to pick a partic-<br>ular part or primitive within a part. Any pixels drawn within the<br>bounds of a 3D pick aperture result in a pick hit, causing the current<br>pick IDs to be automatically DMAed back to host memory.</span></nobr></DIV>
<DIV style="position:absolute;top:760;left:477"><nobr><span class="ft3"><b>Window system support</b></span></nobr></DIV>
<DIV style="position:absolute;top:783;left:477"><nobr><span class="ft14">Many otherwise sophisticated 3D display systems become some-<br>what befuddled when having to deal simultaneously with 3D ren-<br>dering applications and a 2D window system. Modern window sys-<br>tems on interactive workstations require frequent context switching<br>of the rendering pipeline state. Some 3D architectures have tried to<br>minimize the overhead associated with context switching by sup-<br>porting multiple 3D contexts in hardware. Leo goes one step fur-<br>ther, maintaining two completely separate pipelines in hardware:<br>one for traditional 2D window operations; the other for full 3D ren-<br>dering. Because the majority of context switch requests are for 2D<br>window system operations, the need for more complex 3D pipeline<br>context switching is significantly reduced. The 2D context is much<br>lighter weight and correspondingly easier to context switch. The<br>two separate graphics pipelines operate completely in parallel, al-<br>lowing simultaneous access by two independent CPUs on a multi-<br>processor host.</span></nobr></DIV>
<DIV style="position:absolute;top:1029;left:477"><nobr><span class="ft14">2D functionality abstracts the frame buffer as a 1-bit, 8-bit, or 24-bit<br>pixel array. Operations include random pixel access, optimized char-<br>acter cell writes, block clear, block copy, and the usual menagerie of</span></nobr></DIV>
<DIV style="position:absolute;top:1134;left:446"><nobr><span class="ft12">106</span></nobr></DIV>
</DIV>
<!-- Page 7 -->
<a name="7"></a>
<DIV style="position:relative;width:918;height:1188;">
<STYLE type="text/css">
<!--
	.ft36{font-size:11px;line-height:14px;font-family:Times;color:#000000;}
	.ft37{font-size:11px;line-height:14px;font-family:Times;color:#000000;}
-->
</STYLE>
<IMG width="918" height="1188" src="127007.png" alt="background image">
<DIV style="position:absolute;top:81;left:81"><nobr><span class="ft14">boolean operations, write masks, etc. Vertical block moves are spe-<br>cial cased, as they are typically used in vertical scrolling of text<br>windows, and can be processed faster than the general block move<br>because the pixel data does not have to move across LeoDraw chip<br>interleaves. Rendering into non-rectangular shaped windows is<br>supported by special clip hardware, resulting in no loss in perfor-<br>mance. A special block clear function allows designated windows<br>(and their Z-buffers) to be initialized to any given constant in under<br>200 microseconds. Without this last feature, 30 Hz or faster anima-<br>tion of non-trivial objects would have been impossible.</span></nobr></DIV>
<DIV style="position:absolute;top:251;left:107"><nobr><span class="ft2"><b>7 VIDEO OUTPUT: LEO CROSS</b></span></nobr></DIV>
<DIV style="position:absolute;top:276;left:81"><nobr><span class="ft4">Leo's standard video output format is 1280</span></nobr></DIV>
<DIV style="position:absolute;top:271;left:311"><nobr><span class="ft34"> ×</span></nobr></DIV>
<DIV style="position:absolute;top:276;left:325"><nobr><span class="ft4">1024 at 76 Hz refresh</span></nobr></DIV>
<DIV style="position:absolute;top:291;left:81"><nobr><span class="ft4">rate, but it also supports other resolutions, including 1152</span></nobr></DIV>
<DIV style="position:absolute;top:286;left:401"><nobr><span class="ft34"> ×</span></nobr></DIV>
<DIV style="position:absolute;top:291;left:417"><nobr><span class="ft4">900,</span></nobr></DIV>
<DIV style="position:absolute;top:306;left:81"><nobr><span class="ft4">interlaced 640</span></nobr></DIV>
<DIV style="position:absolute;top:301;left:164"><nobr><span class="ft34">×</span></nobr></DIV>
<DIV style="position:absolute;top:306;left:175"><nobr><span class="ft4">480 RS-170 (NTSC), interlaced 768</span></nobr></DIV>
<DIV style="position:absolute;top:301;left:380"><nobr><span class="ft34">×</span></nobr></DIV>
<DIV style="position:absolute;top:306;left:392"><nobr><span class="ft4">576 PAL</span></nobr></DIV>
<DIV style="position:absolute;top:321;left:81"><nobr><span class="ft4">timing, and 960</span></nobr></DIV>
<DIV style="position:absolute;top:316;left:175"><nobr><span class="ft34">×</span></nobr></DIV>
<DIV style="position:absolute;top:321;left:187"><nobr><span class="ft4">680 113 Hz field sequential stereo. LeoCross</span></nobr></DIV>
<DIV style="position:absolute;top:336;left:81"><nobr><span class="ft14">contains several color look-up tables, supporting multiple pseudo<br>color maps without color map flashing. The look-up table also sup-<br>ports two different true color abstractions: 24-bit linear color<br>(needed by rendering applications), and REC-709 non-linear color<br>(required by many imaging applications).</span></nobr></DIV>
<DIV style="position:absolute;top:429;left:81"><nobr><span class="ft3"><b>Virtual reality support</b></span></nobr></DIV>
<DIV style="position:absolute;top:453;left:81"><nobr><span class="ft14">Stereo output is becoming increasingly important for use in Virtual<br>Reality applications. Leo's design goals included support for the<br>Virtual Holographic Workstation system configuration described in<br>[5]. Leo's stereo resolution was chosen to support square pixels, so<br>that lines and antialiased lines are displayed properly in stereo, and<br>standard window system applications can co-exist with stereo. Ste-<br>reo can be enabled on a per-window basis (when in stereo mode win-<br>dows are effectively quad-buffered). Hooks were included in Leo-<br>Cross to support display technologies other than CRT's, that may be<br>needed for head-mounted virtual reality displays.</span></nobr></DIV>
<DIV style="position:absolute;top:621;left:81"><nobr><span class="ft2"><b>8 NURBS AND TEXTURE MAP SUPPORT/b></span></nobr></DIV>
<DIV style="position:absolute;top:648;left:81"><nobr><span class="ft14">One of the advantages to using programmable elements within a<br>graphics accelerator is that additional complex functionality, such<br>as NURBS and texture mapping, can be accelerated. Texture map-<br>ping is supported through special LeoFloat microcode and features<br>of LeoCommand. LeoFloat microcode also includes algorithms to<br>accelerate dynamic tessellation of trimmed NURBS surfaces. The<br>dynamic tessellation technique involves reducing trimmed NURBS<br>surfaces into properly sized triangles according to a display/pixel<br>space approximation criteria [1]; i.e. the fineness of tessellation is<br>view dependent. In the past, dynamic tessellation tended to be<br>mainly useful as a compression technique, to avoid storing all the<br>flattened triangles from a NURBS surface in memory. Dynamic tes-<br>sellation was not viewed as a performance enhancer, for while it<br>might generate only a third as many triangles as a static tessellation,<br>the triangles were generated at least an order of magnitude or more<br>slower than brute force triangle rendering. In addition it had other<br>problems, such as not handling general trimming. For many cases,<br>Leo's dynamic tesselator can generate and render triangles only a<br>small integer multiple slower than prestored triangle rendering,<br>which for some views, can result in <i>faster</i> overall object rendering.</span></nobr></DIV>
<DIV style="position:absolute;top:968;left:107"><nobr><span class="ft2"><b>9 RESULTS</b></span></nobr></DIV>
<DIV style="position:absolute;top:993;left:81"><nobr><span class="ft4">Leo is physically a-two board sandwich, measuring 5.7</span></nobr></DIV>
<DIV style="position:absolute;top:988;left:382"><nobr><span class="ft34">×</span></nobr></DIV>
<DIV style="position:absolute;top:993;left:393"><nobr><span class="ft4">6.7</span></nobr></DIV>
<DIV style="position:absolute;top:988;left:413"><nobr><span class="ft34">×</span></nobr></DIV>
<DIV style="position:absolute;top:993;left:424"><nobr><span class="ft4">0.6</span></nobr></DIV>
<DIV style="position:absolute;top:1008;left:81"><nobr><span class="ft14">inches, that fits in a standard 2S SBus slot. Figure 6 is a photo of the<br>two boards, separated, showing all the custom ASICs. Figure 7 is a<br>photo of the complete Leo workstation, next to two of our units of<br>scale and the board set.</span></nobr></DIV>
<DIV style="position:absolute;top:81;left:477"><nobr><span class="ft14">Leo can render 210K 100-pixel isolated, lighted, Gouraud shaded,<br>Z-buffered, depth cued triangles per second, with one infinite dif-<br>fuse and one ambient light source enabled. At 100 pixels, Leo is<br>still VRAM rendering speed limited; smaller triangles render faster.<br>Isolated 10-pixel antialiased, constant color, Z-buffered, depth cued<br>lines (which are actually 12 pixels long due to endpoint ramps, and<br>three pixels wide) render at a 422K per second rate. Corresponding<br>aliased lines render at 730K. Aliased and antialiased constant color,<br>Z-buffered, depth cued dots are clocked at 1100K. 24-bit image ras-<br>ters can be loaded onto the screen at a 10M pixel per second rate.<br>Screen scrolls, block moves, and raster character draws all also<br>have competitive performance. Figure 8 is a sample of shaded tri-<br>angle rendering.</span></nobr></DIV>
<DIV style="position:absolute;top:296;left:509"><nobr><span class="ft2"><b>10 SIMULATION</b></span></nobr></DIV>
<DIV style="position:absolute;top:321;left:477"><nobr><span class="ft14">A system as complex as Leo cannot be debugged after the fact. All<br>the new rendering mathematics were extensively simulated before<br>being committed to hardware design. As each chip was defined, high,<br>medium, and low level simulators of its function were written and<br>continuously used to verify functionality and performance. Com-<br>plete images of simulated rendering were generated throughout the<br>course of the project, from within weeks of its start. As a result, the<br>window system and complex 3D rendering were up and running on<br>a complete board set within a week of receiving the first set of chips.</span></nobr></DIV>
<DIV style="position:absolute;top:476;left:512"><nobr><span class="ft2"><b>11 CONCLUSIONS</b></span></nobr></DIV>
<DIV style="position:absolute;top:501;left:477"><nobr><span class="ft14">By paying careful attention to the forces that drive both perfor-<br>mance and cost, a physically compact complete 3D shaded graphics<br>accelerator was created. The focus was not on new rendering fea-<br>tures, but on cost reduction and performance enhancement of the<br>most useful core of 3D graphics primitives. New parallel algo-<br>rithms were developed to allow accurate screen space rendering of<br>primitives. Judicious use of hardware to perform some key tradi-<br>tional software functions (such as format conversion and primitive<br>vertex reassembly) greatly simplified the microcode task. A spe-<br>cialized floating-point core optimized for the primary task of pro-<br>cessing lines and triangles also supports more general graphics pro-<br>cessing, such as rasters and NURBS. The final system performance<br>is limited by the <i>only</i> chips not custom designed for Leo: the stan-<br>dard RAM chips.</span></nobr></DIV>
<DIV style="position:absolute;top:731;left:490"><nobr><span class="ft2"><b>ACKNOWLEDGEMENTS</b></span></nobr></DIV>
<DIV style="position:absolute;top:756;left:477"><nobr><span class="ft14">The authors would like to thank the entire Leo team for their efforts<br>in producing the system, and Mike Lavelle for help with the paper.</span></nobr></DIV>
<DIV style="position:absolute;top:806;left:490"><nobr><span class="ft2"><b>REFERENCES</b></span></nobr></DIV>
<DIV style="position:absolute;top:831;left:477"><nobr><span class="ft5"><b>1.</b></span></nobr></DIV>
<DIV style="position:absolute;top:831;left:504"><nobr><span class="ft5"><b>Abi-Ezzi, Salim, and L. Shirman.</b></span></nobr></DIV>
<DIV style="position:absolute;top:831;left:704"><nobr><span class="ft4"> Tessellation of Curved</span></nobr></DIV>
<DIV style="position:absolute;top:846;left:504"><nobr><span class="ft14">Surfaces under Highly Varying Transformations. Proc. Euro-<br>graphics '91 (Vienna, Austria, September 1991), 385-397.</span></nobr></DIV>
<DIV style="position:absolute;top:881;left:477"><nobr><span class="ft5"><b>2.</b></span></nobr></DIV>
<DIV style="position:absolute;top:881;left:504"><nobr><span class="ft5"><b>Akeley, Kurt and T. Jermoluk.</b></span></nobr></DIV>
<DIV style="position:absolute;top:881;left:684"><nobr><span class="ft4"> High-Performance Polygon</span></nobr></DIV>
<DIV style="position:absolute;top:896;left:504"><nobr><span class="ft14">Rendering, Proceedings of SIGGRAPH '88 (Atlanta, GA, Aug<br>1-5, 1988). In <i>Computer Graphics</i> 22, 4 (July 1988), 239-246.</span></nobr></DIV>
<DIV style="position:absolute;top:931;left:477"><nobr><span class="ft5"><b>3.</b></span></nobr></DIV>
<DIV style="position:absolute;top:931;left:504"><nobr><span class="ft5"><b>Anido, M., D. Allerton and E. Zaluska.</b></span></nobr></DIV>
<DIV style="position:absolute;top:931;left:725"><nobr><span class="ft4"> MIGS - A Multipro-</span></nobr></DIV>
<DIV style="position:absolute;top:946;left:504"><nobr><span class="ft14">cessor Image Generation System using RISC-like Micropro-<br>cessors. Proceedings of CGI '89 (Leeds, UK, June 1989),<br>Springer Verlag 1990.</span></nobr></DIV>
<DIV style="position:absolute;top:996;left:477"><nobr><span class="ft5"><b>4.</b></span></nobr></DIV>
<DIV style="position:absolute;top:996;left:504"><nobr><span class="ft36"><b>Deering, Michael, S. Winner, B. Schediwy, C. Duffy and N.<br>Hunt.</b></span></nobr></DIV>
<DIV style="position:absolute;top:1010;left:537"><nobr><span class="ft4"> The Triangle Processor and Normal Vector Shader: A</span></nobr></DIV>
<DIV style="position:absolute;top:1025;left:504"><nobr><span class="ft37">VLSI system for High Performance Graphics. Proceedings of<br>SIGGRAPH '88 (Atlanta, GA, Aug 1-5, 1988). In <i>Computer<br>Graphics</i> 22, 4 (July 1988), 21-30.</span></nobr></DIV>
<DIV style="position:absolute;top:1134;left:446"><nobr><span class="ft12">107</span></nobr></DIV>
</DIV>
<!-- Page 8 -->
<a name="8"></a>
<DIV style="position:relative;width:918;height:1188;">
<STYLE type="text/css">
<!--
-->
</STYLE>
<IMG width="918" height="1188" src="127008.png" alt="background image">
<DIV style="position:absolute;top:81;left:81"><nobr><span class="ft5"><b>5.</b></span></nobr></DIV>
<DIV style="position:absolute;top:81;left:108"><nobr><span class="ft5"><b>Deering, Michael.</b></span></nobr></DIV>
<DIV style="position:absolute;top:81;left:210"><nobr><span class="ft4"> High Resolution Virtual Reality. Proceed-</span></nobr></DIV>
<DIV style="position:absolute;top:96;left:108"><nobr><span class="ft14">ings of SIGGRAPH '92 (Chicago, IL, July 26-31, 1992). In<br><i>Computer Graphics</i> 26, 2 (July 1992), 195-202.</span></nobr></DIV>
<DIV style="position:absolute;top:131;left:81"><nobr><span class="ft5"><b>6.</b></span></nobr></DIV>
<DIV style="position:absolute;top:131;left:108"><nobr><span class="ft14"><b>Dunnett, Graham, M. White, P. Lister and R. Grimsdale.<br></b>The Image Chip for High Performance 3D Rendering. <i>IEEE<br>Computer Graphics and Applications</i> 12, 6 (November 1992),<br>41-52.</span></nobr></DIV>
<DIV style="position:absolute;top:196;left:81"><nobr><span class="ft5"><b>7.</b></span></nobr></DIV>
<DIV style="position:absolute;top:196;left:108"><nobr><span class="ft5"><b>Foley, James, A. van Dam, S. Feiner and J Hughes.</b></span></nobr></DIV>
<DIV style="position:absolute;top:196;left:406"><nobr><span class="ft4"> Com-</span></nobr></DIV>
<DIV style="position:absolute;top:210;left:108"><nobr><span class="ft14">puter Graphics: Principles and Practice, 2nd ed., Addison-<br>Wesley, 1990.</span></nobr></DIV>
<DIV style="position:absolute;top:246;left:81"><nobr><span class="ft5"><b>8.</b></span></nobr></DIV>
<DIV style="position:absolute;top:246;left:108"><nobr><span class="ft5"><b>Kelley, Michael, S. Winner, K. Gould.</b></span></nobr></DIV>
<DIV style="position:absolute;top:245;left:324"><nobr><span class="ft4"> A Scalable Hardware</span></nobr></DIV>
<DIV style="position:absolute;top:260;left:108"><nobr><span class="ft14">Render Accelerator using a Modified Scanline Algorithm.<br>Proceedings of SIGGRAPH '92 (Chicago, IL, July 26-31,<br>1992). In <i>Computer Graphics</i> 26, 2 (July 1992), 241-248.</span></nobr></DIV>
<DIV style="position:absolute;top:310;left:81"><nobr><span class="ft5"><b>9.</b></span></nobr></DIV>
<DIV style="position:absolute;top:310;left:108"><nobr><span class="ft5"><b>Kirk, David, and D. Voorhies.</b></span></nobr></DIV>
<DIV style="position:absolute;top:310;left:288"><nobr><span class="ft4">The Rendering Architecture</span></nobr></DIV>
<DIV style="position:absolute;top:325;left:108"><nobr><span class="ft14">of the DN10000VS. Proceedings of SIGGRAPH '90 (Dallas,<br>TX, August 6-10, 1990). In <i>Computer Graphics</i> 24, 4 (August<br>1990), 299-307.</span></nobr></DIV>
<DIV style="position:absolute;top:375;left:81"><nobr><span class="ft5"><b>10. Molnar, Steven, J. Eyles, J. Poulton.</b></span></nobr></DIV>
<DIV style="position:absolute;top:375;left:312"><nobr><span class="ft4"> PixelFlow: High-Speed</span></nobr></DIV>
<DIV style="position:absolute;top:390;left:108"><nobr><span class="ft37">Rendering Using Image Composition. Proceedings of SIG-<br>GRAPH '92 (Chicago, IL, July 26-31, 1992). In <i>Computer<br>Graphics</i> 26, 2 (July 1992), 231-240.</span></nobr></DIV>
<DIV style="position:absolute;top:440;left:81"><nobr><span class="ft5"><b>11. Nelson, Scott.</b></span></nobr></DIV>
<DIV style="position:absolute;top:440;left:190"><nobr><span class="ft4">GPC Line Quality Benchmark Test. GPC Test</span></nobr></DIV>
<DIV style="position:absolute;top:455;left:108"><nobr><span class="ft4">Suite, NCGA GPC committee 1991.</span></nobr></DIV>
<DIV style="position:absolute;top:475;left:81"><nobr><span class="ft5"><b>12. Torborg, John.</b></span></nobr></DIV>
<DIV style="position:absolute;top:475;left:195"><nobr><span class="ft4"> A Parallel Processor Architecture for Graph-</span></nobr></DIV>
<DIV style="position:absolute;top:490;left:108"><nobr><span class="ft14">ics Arithmetic Operations. Proceedings of SIGGRAPH '87<br>(Anaheim, CA, July 27-31, 1987). In <i>Computer Graphics</i> 21,<br>4 (July 1987), 197-204.</span></nobr></DIV>
<DIV style="position:absolute;top:1048;left:162"><nobr><span class="ft14">Figure 8: <b>Traffic Jam to Point Reyes</b>. A scene containing 2,322,000 triangles, rendered by Leo Hardware. Sto-<br>chastically super-sampled 8 times. Models courtesy of Viewpoint Animation Engineering.</span></nobr></DIV>
<DIV style="position:absolute;top:512;left:477"><nobr><span class="ft14">Figure 7: The complete SPARCstation ZX workstation, next to two<br>of our units of scale and the Leo board set.</span></nobr></DIV>
<DIV style="position:absolute;top:309;left:477"><nobr><span class="ft4">Figure 6: The two boards, unfolded.</span></nobr></DIV>
<DIV style="position:absolute;top:1134;left:446"><nobr><span class="ft12">108</span></nobr></DIV>
</DIV>
</BODY>
</HTML>
